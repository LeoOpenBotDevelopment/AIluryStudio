<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="faviconico" rel="icon" href="AIlurylogo.ico" type="image/x-icon">
    <title>AIlury</title>
    <style>
        :root {
            --background-color: #F2F2F7;
            --white-color: #F2F2F7;
            --grey-color: #ccc;
            --lightgrey-color: #fff;
            --lightdarkgrey-color: #fff;
            --black-color: #000;
            --linenumber-color: #999999;
            --drakgrey-color: #F2F2F7;
            --selected-color: rgba(40, 167, 69, 0.5);
            --safariheader-color: #dcdcdc;
            --safariheaderbackground-color: #F2F2F7;
            --urlbarbackground-color: #fff;
            --urlbarcolor-color: #333;
            --browsercontainerbackground-color: #F2F2F7;
            --browserheaderborderbottom-color: #fff;
            --spencialbtnbackground-color: #fff;
            --spencialbtncolor-color: #000;
            --overlayborder-color: #F2F2F7;
            --overlaycolor-color: #333;
            --rectangleborder: #fff;
            --overlaybackground-color: rgba(0, 0, 0, 0.3);
            --contentcontainer-color: #F2F2F7;
            --checkmark-color: #28a745;
            --seccontainerbackground-color: #F2F2F7;
            --seccontainerlinebackground-color: rgba(200, 200, 200, 0.5);
            --navdotcolor-color: #F2F2F7;
            --seccontainerlinecolor-color: #F2F2F7;
            --switchcheckedbackground-color: #007aff;
            --filepathinput-color: rgba(0, 0, 0, 0.5);
            --transparentshade-color: rgba(255, 255, 255, 0.2);
            --superselected-color: #28a745;
            --leftarrow-color: #28a745;
            --loadingbarbackground-color: rgba(0, 0, 0, 0.2);
            --loadingbarloadedbackground-color: #007aff;
            --fileloadingoverlaybackground-color: rgba(0, 0, 0, 0.5);
            --commandlistbackground-color: #F2F2F7;
            --commandlistcolor-color: #555;
            --codeeditoreditbtn-color: #000;
            --codeeditoreditbtnbackground-color: #F2F2F7;
            --browseriframebackgroundcolor-color: #F2F2F7;
            --rectanglecolorcolor-color: rgba(0, 0, 0, 0.5);
            --deviceborder-color: #333;
            --syntaxblock-color: #A222D4;
            --syntaxoperator-color: darkgrey;
            --syntaxbracket-color: grey;
            --syntaxsign-color: #000000;
            --syntaxstring-color: #377B23;
            --syntaxnumber-color: #64C466;
            --syntaxcomment-color: #6a737d;
            --syntaxvariable-color: #316CB1;
            --syntaxcommand-color: #b31d28;
            --syntaxkeyword-color: #0202F4;
            --syntaxhtmlcomment-color: #6a737d;
            --syntaxregex-color: deeppink;
            --syntaxhtmltagcontent-color: #000000;
            --griddot-color: #fff;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --background-color: #0d1117;
                --white-color: #0d1117;
                --grey-color: #2E2E2E;
                --lightgrey-color: #161b22;
                --lightdarkgrey-color: #4f4f4f;
                --black-color: #fff;
                --linenumber-color: #555555;
                --drakgrey-color: #161b22;
                --selected-color: #0E7F9E;
                --safariheader-color: #0c0c0c;
                --safariheaderbackground-color: #0E0F0E;
                --urlbarbackground-color: #161b22;
                --urlbarcolor-color: #fff;
                --browsercontainerbackground-color: #000;
                --browserheaderborderbottom-color: #161b22;
                --spencialbtnbackground-color: #161b22;
                --spencialbtncolor-color: #fff;
                --overlayborder-color: #161b22;
                --overlaycolor-color: #666;
                --rectangleborder: #161b22;
                --overlaybackground-color: rgba(0, 0, 0, 0.3);
                --contentcontainer-color: #0d1117;
                --checkmark-color: #0E7F9E;
                --seccontainerbackground-color: #161b22;
                --seccontainerlinebackground-color: rgba(50, 50, 50, 0.5);
                --navdotcolor-color: #161b22;
                --seccontainerlinecolor-color: #666;
                --switchcheckedbackground-color: #0156CD;
                --filepathinput-color: rgba(255, 255, 255, 0.5);
                --transparentshade-color: rgba(0, 0, 0, 0.2);
                --superselected-color: #28a745;
                --leftarrow-color: #28a745;
                --loadingbarbackground-color: rgba(0, 0, 0, 0.2);
                --loadingbarloadedbackground-color: #0156CD;
                --fileloadingoverlaybackground-color: rgba(0, 0, 0, 0.5);
                --commandlistbackground-color: #0d1117;
                --commandlistcolor-color: #A5A5A5;
                --codeeditoreditbtn-color: #fff;
                --codeeditoreditbtnbackground-color: #0d1117;
                --browseriframebackgroundcolor-color: #000;
                --rectanglecolorcolor-color: #363736;
                --deviceborder-color: #161b22;
                --syntaxblock-color: #C678DD;
                --syntaxoperator-color: #E06C75;
                --syntaxbracket-color: #ABB2BF;
                --syntaxsign-color: #ABB2BF;
                --syntaxstring-color: #98C379;
                --syntaxnumber-color: #D19A66;
                --syntaxcomment-color: #5C6370;
                --syntaxvariable-color: #61AFEF;
                --syntaxcommand-color: #E5C07B;
                --syntaxkeyword-color: #C678DD;
                --syntaxhtmlcomment-color: #5C6370;
                --syntaxregex-color: #E06C75;
                --syntaxhtmltagcontent-color: #fff;
                --griddot-color: rgba(170, 170, 170, 0.1);
            }
        }
        .helloween-theme {
            --selected-color: rgba(255, 109, 0, 0.5);
            --rectangleborder: rgba(255, 109, 0, 0.5);
            --checkmark-color: rgba(255, 109, 0, 0.5);
            --switchcheckedbackground-color: #FF6D00;
            --loadingbarloadedbackground-color: #FF6D00;
            --rectanglecolorcolor-color: rgba(255, 109, 0, 0.5);
            --codeeditoreditbtn-color: rgba(255, 109, 0, 0.5);
            --lightgrey-color: rgba(255, 109, 0, 0.5);;
            --drakgrey-color: rgba(255, 109, 0, 0.5);;
        }
        .winter-theme {
            --selected-color: rgba(173, 216, 230, 0.5);
            --rectangleborder: rgba(173, 216, 230, 0.5);
            --checkmark-color: rgba(173, 216, 230, 0.7);
            --switchcheckedbackground-color: #00bcd4;
            --loadingbarloadedbackground-color: #00acc1;
            --rectanglecolorcolor-color: rgba(173, 216, 230, 0.5);
            --codeeditoreditbtn-color: rgba(173, 216, 230, 0.5);
            --lightgrey-color: rgba(173, 216, 230, 0.5);
            --drakgrey-color: rgba(173, 216, 230, 0.5);
        }
        .spring-theme {
            --selected-color: rgba(144, 238, 144, 0.5);
            --rectangleborder: rgba(144, 238, 144, 0.5);
            --checkmark-color: rgba(102, 187, 106, 0.7);
            --switchcheckedbackground-color: #4caf50;
            --loadingbarloadedbackground-color: #43a047;
            --rectanglecolorcolor-color: rgba(144, 238, 144, 0.5);
            --codeeditoreditbtn-color: rgba(144, 238, 144, 0.5);
            --lightgrey-color: rgba(144, 238, 144, 0.5);
            --drakgrey-color: rgba(144, 238, 144, 0.5);
        }
        .ocean-theme {
            --selected-color: rgba(0, 123, 255, 0.5);
            --rectangleborder: rgba(0, 123, 255, 0.5);
            --checkmark-color: rgba(33, 150, 243, 0.7);
            --switchcheckedbackground-color: #2196f3;
            --loadingbarloadedbackground-color: #1e88e5;
            --rectanglecolorcolor-color: rgba(0, 123, 255, 0.5);
            --codeeditoreditbtn-color: rgba(0, 123, 255, 0.5);
            --lightgrey-color: rgba(0, 123, 255, 0.5);
            --drakgrey-color: rgba(0, 123, 255, 0.5);
        }
        .autumn-theme {
            --selected-color: rgba(255, 165, 0, 0.5);
            --rectangleborder: rgba(255, 165, 0, 0.5);
            --checkmark-color: rgba(255, 152, 0, 0.7);
            --switchcheckedbackground-color: #ff9800;
            --loadingbarloadedbackground-color: #fb8c00;
            --rectanglecolorcolor-color: rgba(255, 165, 0, 0.5);
            --codeeditoreditbtn-color: rgba(255, 165, 0, 0.5);
            --lightgrey-color: rgba(255, 165, 0, 0.5);
            --drakgrey-color: rgba(255, 165, 0, 0.5);
        }
        .nightsky-theme {
            --selected-color: rgba(48, 63, 159, 0.5);
            --rectangleborder: rgba(48, 63, 159, 0.5);
            --checkmark-color: rgba(63, 81, 181, 0.7);
            --switchcheckedbackground-color: #3f51b5;
            --loadingbarloadedbackground-color: #3949ab;
            --rectanglecolorcolor-color: rgba(48, 63, 159, 0.5);
            --codeeditoreditbtn-color: rgba(48, 63, 159, 0.5);
            --lightgrey-color: rgba(48, 63, 159, 0.5);
            --drakgrey-color: rgba(48, 63, 159, 0.5);
        }
        .desert-theme {
            --selected-color: rgba(237, 201, 175, 0.5);
            --rectangleborder: rgba(237, 201, 175, 0.5);
            --checkmark-color: rgba(255, 183, 77, 0.7);
            --switchcheckedbackground-color: #ffcc80;
            --loadingbarloadedbackground-color: #ffa726;
            --rectanglecolorcolor-color: rgba(237, 201, 175, 0.5);
            --codeeditoreditbtn-color: rgba(237, 201, 175, 0.5);
            --lightgrey-color: rgba(237, 201, 175, 0.5);
            --drakgrey-color: rgba(237, 201, 175, 0.5);
        }
        .galaxy-theme {
            --selected-color: rgba(138, 43, 226, 0.5);
            --rectangleborder: rgba(138, 43, 226, 0.5);
            --checkmark-color: rgba(103, 58, 183, 0.7);
            --switchcheckedbackground-color: #673ab7;
            --loadingbarloadedbackground-color: #5e35b1;
            --rectanglecolorcolor-color: rgba(138, 43, 226, 0.5);
            --codeeditoreditbtn-color: rgba(138, 43, 226, 0.5);
            --lightgrey-color: rgba(138, 43, 226, 0.5);
            --drakgrey-color: rgba(138, 43, 226, 0.5);
        }
        .forest-theme {
            --selected-color: rgba(34, 139, 34, 0.5);
            --rectangleborder: rgba(34, 139, 34, 0.5);
            --checkmark-color: rgba(76, 175, 80, 0.7);
            --switchcheckedbackground-color: #4caf50;
            --loadingbarloadedbackground-color: #388e3c;
            --rectanglecolorcolor-color: rgba(34, 139, 34, 0.5);
            --codeeditoreditbtn-color: rgba(34, 139, 34, 0.5);
            --lightgrey-color: rgba(34, 139, 34, 0.5);
            --drakgrey-color: rgba(34, 139, 34, 0.5);
        }
        .neon-theme {
            --selected-color: rgba(57, 255, 20, 0.5);
            --rectangleborder: rgba(57, 255, 20, 0.5);
            --checkmark-color: rgba(124, 252, 0, 0.7);
            --switchcheckedbackground-color: #76ff03;
            --loadingbarloadedbackground-color: #64dd17;
            --rectanglecolorcolor-color: rgba(57, 255, 20, 0.5);
            --codeeditoreditbtn-color: rgba(57, 255, 20, 0.5);
            --lightgrey-color: rgba(57, 255, 20, 0.5);
            --drakgrey-color: rgba(57, 255, 20, 0.5);
        }
        .sunset-theme {
            --selected-color: rgba(255, 87, 34, 0.5);
            --rectangleborder: rgba(255, 87, 34, 0.5);
            --checkmark-color: rgba(244, 67, 54, 0.7);
            --switchcheckedbackground-color: #f44336;
            --loadingbarloadedbackground-color: #e53935;
            --rectanglecolorcolor-color: rgba(255, 87, 34, 0.5);
            --codeeditoreditbtn-color: rgba(255, 87, 34, 0.5);
            --lightgrey-color: rgba(255, 87, 34, 0.5);
            --drakgrey-color: rgba(255, 87, 34, 0.5);
        }
        .custom-theme {
            --background-color: #0d1117;
            --selected-color: #0E7F9E; 
            --rectangleborder: #161b22; 
            --checkmark-color: #0E7F9E; 
            --switchcheckedbackground-color: #0156CD;
            --loadingbarloadedbackground-color: #0156CD;
            --rectanglecolorcolor-color: #363736;
            --codeeditoreditbtn-color: #fff;
            --codeeditoreditbtnbackground-color: #0d1117;
            --contentcontainer-color: #0d1117;
            --white-color: #0d1117;
            --lightgrey-color: #161b22;
            --drakgrey-color: #161b22;
            --black-color: #fff;
            --commandlistbackground-color: #0d1117;
            --spencialbtnbackground-color: #161b22;
            --deviceborder-color: #161b22;
            --commandlistcolor-color: #A5A5A5;
            --browserheaderborderbottom-color: #161b22;
            --browsercontainerbackground-color: #000;
            --browseriframebackgroundcolor-color: #000;
            --safariheaderbackground-color: #0E0F0E;
            --urlbarbackground-color: #161b22;
            --urlbarcolor-color: #fff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            height: 100vh;
            overflow: hidden;
            background-color: var(--background-color);
        }

        .container {
            height: 100vh;
            width: 100vw;
            display: flex;
            scroll-snap-type: x mandatory;
            overflow-x: hidden;
            transition: transform 0.5s ease-in-out;
            transition: 0.5s;

        }

        .sidebarenabled .container{
            width: 70vw;
        }

        .section {
            min-width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: transparent;
            transition: 0.5s;
        }

        .sidebarenabled .section{
            min-width: 70vw;
        }

        @keyframes swipein {
            0%{
                transform: translateY(-100vh);
                opacity: 0;
            }
            100%{
                transform: translateY(0);
                opacity: 1;
            }
        }
        @keyframes swipeout {
            0%{
                transform: translateY(0);
                opacity: 1;
            }
            100%{
                transform: translateY(150vh);
                opacity: 0;
            }
        }
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100vw;
            display: flex;
            height: 50px;
            background-color: var(--background-color);
            border-radius: 10px 10px 0 0;
            overflow-x: auto;
            scroll-behavior: smooth;
            scroll-snap-type: x mandatory;
            transition: 0.3s;
        }

        .sidebarenabled .nav-bar{
            width: 70vw;
            left: 30vw;
            right: 0;
            border-radius: 0;
            border-top: 1px solid var(--rectangleborder);
            transition: 0.3s;
        }
        .sidebarenabled .allcontainer{
            border-radius: 0;
            border: 1px solid var(--rectangleborder);
            border-left: 0;
            transition: 0.3s;
        }

        .nav-bar.expanded {
            background: var(--background-color);
            transition: 0.3s;
        }


        .nav-bar div {
            min-width: 100vw;
            height: 50px;
            background-color: var(--seccontainerbackground-color);
            color: var(--black-color);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            scroll-snap-align: center;
            border-radius: 10px 10px 0 0;
            position: relative;
            overflow: hidden;
            transition: 0.3s;
        }

        .sidebarenabled .nav-bar div{
            min-width: 70vw;
            border-radius: 0;
            transition: 0.3s;
        }

        .nav-bar div:hover {
            background-color: var(--lightdarkgrey-color);
            transition: 0.3s;
        }

        .nav-bar .active {
            background-color: var(--lightgrey-color);
            transition: 0.3s;
        }

        .expanded {
            height: 100vh;
            transition: 0.3s;
        }

        .nav-dot-content {
            display: none;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            width: 100%;
            text-align: center;
            color: var(--black-color);
            position: relative;
            border-radius: 10px;
            animation: fadeInUp 0.5s ease-in-out;
            transition: 0.3s;
        }

        .expanded .nav-dot-content {
            display: block;
            transition: 0.3s;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .input-field {
            margin-top: 20px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            width: 80%;
            font-size: 1rem;
            transition: 0.3s;
        }

        .input-field:focus {
            outline: none;
            transition: 0.3s;
        }

        .seccontainer {
            width: 100vw;
            height: 85vh;
            background-color: var(--background-color);
            color: var(--black-color);
            scroll-snap-align: center;
            border-radius: 10px 10px 0 0;
            position: fixed;
            overflow: hidden;
            bottom: 0;
            left: 0;
            animation: up 1s;
            padding: 10px;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            overflow-y: scroll;
            transition: 0.3s;
        }

        .sidebarenabled .seccontainer{
            width: 70vw;
            left: 30vw;
            right: 0;
            border-radius: 0;
            transition: 0.3s;
        }

        @keyframes up{
            0%{ transform: translateY(100vh); }
            100%{ transform: translateY(0); }
        }

        .input-field {
            margin-top: 20px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            width: 80%;
            font-size: 1rem;
            transition: 0.3s;
        }

        .input-field:focus {
            outline: none;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 51px;
            height: 31px;
            transition: 0.3s;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
            transition: 0.3s;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--grey-color);
            border-radius: 34px;
            transition: 0.3s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 23px;
            width: 23px;
            left: 4px;
            bottom: 4px;
            background: var(--white-color);
            border-radius: 50%;
            transition: 0.3s;
        }

        input:checked + .slider {
            background: var(--switchcheckedbackground-color);
        }

        input:checked + .slider:before {
            transform: translateX(20px);
            transition: 0.3s;
        }

        .code-editor-container {
            position: relative;
            height: calc(88vh - 100px);
            width: 90vw;
            border-radius: 5px;
            background: transparent;
            padding: 5px 4.5em;
            overflow-y: scroll;
            overflow-x: hidden;
            transition: 0.3s;
        }
        .sidebarenabled .code-editor-container {
            width: 70vw;
        }
        @media (max-width: 700px) {
            .code-editor-container {
                width: 90vw;
                padding: 5px 3.5em;
                height: calc(88vh - 100px);
            }
        }
        @media (max-width: 600px) {
            .code-editor-container {
                width: 100vw;
                padding: 5px 3em;
                height: calc(88vh - 100px);
            }
        }
        .code-editor-line {
            display: flex;
            position: relative;
            border-radius: 5px;
            background: transparent;
            color: var(--black-color);
            font-size: 1em;
            font-family: "Fira Code", "JetBrains Mono", monospace;
            letter-spacing: 0.06em;
            text-align: left;
            padding: 5px;
            transition: 0.5s;
            white-space: pre-wrap;
            flex-wrap: wrap;
            box-sizing: border-box;
            cursor: pointer;
            opacity: 1;
        }

        .code-editor-line:focus {
            outline: none;
            background: var(--drakgrey-color);
        }
        .code-editor-line {
            counter-increment: line-number;
            position: relative;
        }
        #linenumberingon .code-editor-line::before {
            content: counter(line-number) ". ";
            position: absolute;
            right: 101%;
            font-family: Arial, sans-serif;
            font-weight: bold;
            font-size: 0.7em;
            border: none;
            color: var(--linenumber-color);
        }
        
        .code-editor-line.selected::after {
            content: '✓';
            position: absolute;
            left: -3.5em;
            top: 0;
            color: var(--checkmark-color);
            font-size: 1.2em;
            transition: 0.3s;
        }
        
        .code-editor-line.importantpin.topimportantpin {
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .code-editor-line.importantpin.bottomimportantpin {
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
        }

        .code-editor-line.importantpin.middleimportantpin {
            border-top-left-radius: 0;
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .code-editor-line.importantpin.singleimportantpin {
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }
        
        .code-editor-line.selected.topSelected {
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .code-editor-line.selected.bottomSelected {
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
        }

        .code-editor-line.selected.middleSelected {
            border-top-left-radius: 0;
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .code-editor-line.selected.singleSelected {
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }
        
        
        .code-editor-line.superselected {
            border-radius: 5px;
            background: var(--superselected-color);
            transform: translateX(1.5em);
        }
        .code-editor-line.superselected::after {
            content: '→';
            position: absolute;
            left: -3.5em;
            top: 0;
            color: var(--leftarrow-color);
            font-size: 1.2em;
            transition: 0.3s;
        }

        .editor-selected-line-btns{
            width: 100vw;
            background: transparent;
            padding: 10px;
            display: flex;
            overflow-x: scroll;
            overflow-y: hidden;
            transition: 0.3s;
        }
        .sidebarenabled .editor-selected-line-btns{
            width: 70vw;
        }
        .eslbtn{
            color: var(--codeeditoreditbtn-color);
            width: 6vh;
            height: 6vh;
            min-width: 40px;
            min-height: 40px;
            background: transparent;
            text-align: center;
            border: none;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.85em;
            margin-left: 1%;
            transition: 0.3s;
        }
        .eslbtn:hover{
            background: var(--drakgrey-color);
        }
        .disabled{
            pointer-events: none;
            opacity: 0.5;
        }
        .disableline{
            pointer-events: none;
            opacity: 0.5;
        }
        .importantpin{
            background: rgba(255, 0, 0, 0.5);
        }
        .code-editor-line.selected {
            background: var(--selected-color);
            transform: translateX(1.5em);
            border-radius: 0;
            transition: 0.3s;
        }
        .code-editor-btn{
            color: var(--codeeditoreditbtn-color);
            width: 6vh;
            height: 6vh;
            min-width: 40px;
            min-height: 40px;
            background: transparent;
            text-align: center;
            border: none;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.85em;
            margin-left: 1%;
            transition: 0.3s;
        }
        .code-editor-btn:hover {
            background: var(--drakgrey-color);
        }
        .unsleeplines:hover{
            background: var(--drakgrey-color);
        }
        .hiddenlinesparent{
            transform: translateX(-1.5em);
        }
        .hidden{
            display: none;
        }
        @keyframes Hide {
            100%{
                transform: translateY(-50px);
                opacity: 0;
                display: none;
            }
        }
        .code-editor-btns{
            width: 100vw;
            background: transparent;
            padding: 10px;
            display: flex;
            overflow-x: scroll;
            overflow-y: hidden;
            transition: 0.3s;
        }
        .sidebarenabled .code-editor-btns {
            width: 70vw;
        }
        .filePathInput{
            font-size: 1em;
            color: var(--filepathinput-color);
            font-weight: bold;
            background: transparent;
            border: none;
            display: inline-block;
            width: 100%;
            text-align: center;
            transition: 0.3s;
            overflow: hidden;
        }
        .filePathInput:focus{
            outline: none;
        }

        .viewcontainer {
            font-family: 'Arial', sans-serif;
            background-color: var(--background-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            transition: 0.3s;
        }

        .swipe-container {
            display: flex;
            width: 100vw;
            height: 100vh;
            scroll-snap-type: x mandatory;
            overflow-x: scroll;
            scroll-behavior: smooth;
            transition: 0.3s;
        }

        .sidebarenabled .swipe-container {
            width: 70vw;
        }

        .view {
            width: 100vw;
            height: 90vh;
            flex-shrink: 0;
            scroll-snap-align: start;
            padding: 5vh 0;
            transition: 0.3s;
        }

        .sidebarenabled .view {
            width: 70vw;
        }

        .mobile-container, .browser-container {
            margin: auto;
            transition: 0.3s;
        }

        .mobile-container {
            max-width: 375px;
            width: calc(100vw - 1em);
            max-height: 667px;
            height: calc(100vh - 1em);
            border-radius: 35px;
            background-color: var(--white-color);
            box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            border: 1em solid var(--deviceborder-color);
            transition: 0.3s;
        }

        .safari-header {
            background: var(--safariheaderbackground-color);
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            border-bottom: 1px solid var(--browserheaderborderbottom-color);
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            transition: 0.3s;
        }

        .safari-header .safari-buttons {
            display: flex;
            gap: 8px;
            transition: 0.3s;
        }

        .safari-buttons .back-btn {
            width: 12px;
            height: 12px;
            background-color: var(--switchcheckedbackground-color);
            mask: url('https://upload.wikimedia.org/wikipedia/commons/2/26/Chevron_left_font_awesome.svg') no-repeat center;
            -webkit-mask: url('https://upload.wikimedia.org/wikipedia/commons/2/26/Chevron_left_font_awesome.svg') no-repeat center;
            mask-size: 100%;
            -webkit-mask-size: 100%;
            transition: 0.3s;
        }

        .url-bar {
            width: 70%;
            height: 28px;
            margin-left: 10px;
            display: flex;
            align-items: center;
            background-color: var(--urlbarbackground-color);
            border-radius: 12px;
            padding: 0 10px;
            font-size: 14px;
            color: #666;
            transition: 0.3s;
        }

        .url-bar input {
            width: 100%;
            border: none;
            background: transparent;
            outline: none;
            color: var(--urlbarcolor-color);
            font-size: 14px;
            transition: 0.3s;
        }

        .safari-header .action-btn {
            background-color: var(--switchcheckedbackground-color);
            padding: 4px 10px;
            color: white;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: 0.3s;
        }

        .iframe-container {
            flex-grow: 1;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            overflow: hidden;
            background-color: var(--browseriframebackgroundcolor-color);
            transition: 0.3s;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            transition: 0s;
        }
        .browser-container {
            width: 80vw;
            max-width: 1200px;
            height: 70vh;
            border-radius: 15px;
            box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
            background-color: var(--browsercontainerbackground-color);
            display: flex;
            flex-direction: column;
            border: 1em solid var(--deviceborder-color);
            transition: 0.3s;
        }

        .sidebarenabled .browser-container {
            width: 68vw;
        }

        .browser-header {
            background-color: var(--safariheaderbackground-color);
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            border-bottom: 1px solid var(--browserheaderborderbottom-color);
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            transition: 0.3s;
        }

        .browser-header .browser-buttons {
            display: flex;
            gap: 8px;
            transition: 0.3s;
        }

        .browser-header .browser-buttons div {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            transition: 0.3s;
        }

        .close-btn {
            background-color: #f96256;
        }

        .minimize-btn {
            background-color: #fdbc40;
        }

        .maximize-btn {
            background-color: #34c84a;
        }

        .url-bar {
            flex-grow: 1;
            height: 28px;
            margin: 0 10px;
            display: flex;
            align-items: center;
            background-color: var(--urlbarbackground-color);
            border-radius: 8px;
            padding: 0 10px;
            font-size: 14px;
            color: #666;
            transition: 0.3s;
        }

        .url-bar input {
            width: 100%;
            border: none;
            background: transparent;
            outline: none;
            color: var(--urlbarcolor-color);
            font-size: 14px;
            transition: 0.3s;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            transition: 0.3s;
        }

        .btn-group button {
            background-color: var(--switchcheckedbackground-color);
            color: #fff;
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
        }

        .iframe-container {
            flex-grow: 1;
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            overflow: hidden;
            background-color: var(--browseriframebackgroundcolor-color);
            transition: 0.3s;
        }
        .line-number-input{
            color: var(--black-color);
            width: 6vh;
            height: 6vh;
            min-width: 40px;
            min-height: 40px;
            background: transparent;
            text-align: left;
            border: none;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.85em;
            margin-left: 1%;
            transition: 0.5s;
            padding: 0 2.5vh;
        }
        .line-number-input:focus{
          border-radius: 100px;
          width: 25vw;
          background: var(--white-color);
          outline: none;
          box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
          transition: 0.3s;
        }
        .code-search-input{
            color: var(--black-color);
            width: 6vh;
            height: 6vh;
            min-width: 40px;
            min-height: 40px;
            background: transparent;
            text-align: left;
            border: none;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.85em;
            margin-left: 1%;
            transition: 0.5s;
            padding: 0 2.5vh;
        }
        .code-search-input:focus{
            border-radius: 100px;
            width: 25vw;
            outline: none;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
            background: var(--white-color);
            transition: 0.3s;
        }
        @media(max-width: 700px){
            #view2{
                display: none;
            }
            .view{
                padding: 0;
                height: 100vh;
            }
            .mobile-container{
                border: none;
                border-radius: 0;
                height: calc(100vh - 50px);
                width: 100vw;
                max-width: none;
            }
            .line-number-input:focus{
                position: fixed;
                top: 0;
                left: 0;
                border-radius: 5px;
                width: 100vw;
                outline: none;
                box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
                background: var(--seccontainerbackground-color);
                z-index: 20;
                transition: 0.3s;
            }

            .code-search-input:focus{
                position: fixed;
                top: 0;
                left: 0;
                border-radius: 5px;
                width: 100vw;
                outline: none;
                box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
                background: var(--seccontainerbackground-color);
                z-index: 20;
                transition: 0.3s;
            }
            .code-editor-line {
                font-size: 0.8em;
            }
        }
        #addFile{
            position: fixed;
            right: 5px;
            bottom: 3px;
            color: #000;
            width: 4vh;
            height: 4vh;
            min-width: 40px;
            min-height: 40px;
            background: transparent;
            text-align: center;
            border: none;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1em;
            margin-left: 1%;
            transition: 0.5s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #addFile:hover{
            background: #f0f0f0;
        }
        #specialbtn{
            display: flex;
            width: 70vw;
            font-size: 1.5em;
            margin-top: 2vh;
            border-radius: 10px;
            padding: 10px;
            transition: 1s;
            justify-content: center;
            background: var(--commandlistbackground-color);
            border: 1px solid var(--browserheaderborderbottom-color);
            color: var(--black-color);
        }
        .sidebarenabled #specialbtn {
            width: 68vw;
        }
        #specialbtn:active{
            background: var(--spencialbtnbackground-color);
            color: var(--spencialbtncolor-color);
        }
        #specialbtn:hover{
            background: var(--spencialbtnbackground-color);
            color: var(--spencialbtncolor-color);
        }
        @keyframes rotatesign {
            100%{
                transform: rotate(360deg);
            }
        }
        @keyframes rotatesignleft {
            0%{
                transform: rotate(360deg);
            }
            100% {
                transform: rotate(0deg);
            }
        }
        @keyframes swipeOutLeft {
            0% {
                transform: translateX(0);
            }
            100% {               
                transform: translateX(-100%);
            }
        }

        @keyframes swipeInLeft {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(0);
            }
        }

        @keyframes swipeOutRight {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(100%);
            }
        }

        @keyframes swipeInRight {
            0% {
                transform: translateX(100%);
            }
            100% {
                transform: translateX(0);
            }
        }
        .overlay-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: var(--overlaybackground-color);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: swipein 0.5s;
            backdrop-filter: blur(5px);
           transition: 0.3s;
        }
        .sidebarenabled .overlay-container {
            width: 70vw;
            left: 30vw;
            right: 0;
        }
        .content-container {
            border: 1px solid var(--rectangleborder);
            background-color: var(--contentcontainer-color);
            padding: 20px;
            border-radius: 5px;
            display: grid;
            align-items: start;
            justify-content: start;
            grid-template-columns: repeat(auto-fit, minmax(150px, 200px));
            gap: 20px;
            width: 80vw;
            max-width: 1200px;
            margin-top: 20px;
            position: relative;
            max-height: 95vh;
            overflow: hidden;
            overflow-y: scroll;
            transition: 0.3s;
        }

        .sidebarenabled .content-container{
            width: 70vw;
            height: 100vh;
            grid-template-columns: repeat(2, 1fr);
            overflow-y: auto;
            right: 0;
            margin-top: 0;
            border: none;
            max-height: 100vh;
            max-width: none;
            border-radius: 0;
            border: 1px solid var(--rectangleborder);
            border-left: none;
        }
        @media(max-width: 800px){
            .sidebarenabled .content-container {
                width: 70vw;
                height: 100vh;
                grid-template-columns: repeat(2, 1fr);
                overflow-y: auto;
                right: 0;
                border: none;
                transition: 0.3s;
                border-radius: 0;
            }
        }

        .sidebarenabled .commandsdisplay-container {
            width: 70vw;
            right: 0;
            margin-top: 0;
            border: none;
            max-height: 100vh;
            max-width: none;
            border-radius: 0;
            border: 1px solid var(--rectangleborder);
            border-left: none;
            border-radius: 0;
            transition: 0.3s;
        }
        .theme-overlay, .commandsoverlay-container, .singsoverlay-container{
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: var(--overlaybackground-color);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: swipein 0.5s;
            backdrop-filter: blur(5px);
            transition: 0.3s;
        }
        .sidebarenabled .theme-overlay, .sidebarenabled .commandsoverlay-container, .sidebarenabled .topandbottomsignsdisplay-container {
            width: 70vw;
            height: 100vh;
            overflow-y: auto;
            right: 0;
            left: 30vw;
            transition: 0.3s;
        }
       .theme-option-container, .topandbottomsignsdisplay-container, .commandsdisplay-container {
            border: 1px solid var(--rectangleborder);
            background-color: var(--contentcontainer-color);
            padding: 20px;
            border-radius: 5px;
            width: 80vw;
            max-width: 1200px;
            margin-top: 20px;
            position: relative;
            max-height: 95vh;
            overflow-y: scroll;
            transition: 0.3s;
       }

       .sidebarenabled .theme-option-container, .sidebarenabled .topandbottomsignsdisplay-container, .sidebarenabled .commandsdisplay-container{
            width: 70vw;
            height: 100vh;
            overflow-y: auto;
            right: 0;
            left: 0;
            margin-top: 0;
            border: none;
            max-height: 100vh;
            max-width: none;
            border-radius: 0;
            border: 1px solid var(--rectangleborder);
            border-left: none;
            transition: 0.3s;
        }

        .sidebarenabled .singsoverlay-container {
            width: 70vw;
            left: 30vw;
            right: 0;
        }

        .top-bar {
            grid-column: 1 / -1;
            width: 100%;
            background-color: var(--contentcontainer-color);
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: 0.3s;
        }


        .overlay-back-btn, .upload-btn, .viewthisfile, .create-file-btn, .overlay-close-btn {
            background: var(--switchcheckedbackground-color);
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            transition: 0.3s;
        }
        .overlay-close-btn{
          display: inline-block;
        }
        .overlay-back-btn{
          display: none;
        }
        @media(max-width: 700px){
            .overlay-close-btn {
                display: none;
            }
            .overlay-back-btn {
                display: inline-block;
            }
        }


        .rectangle {
            background-color: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 150px;
            border-radius: 5px;
            color: var(--rectanglecolorcolor-color);
            font-size: 18px;
            position: relative;
            min-width: 200px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: 0.3s;
        }
        @keyframes easeinanimationfrb {
            0% {
                transform: translateY(-100%);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .rectangle-buttons {
            position: absolute;
            top: 5px;
            right: 5px;
            display: none;
            transition: 0.3s;
        }

        .rectangle:hover .rectangle-buttons {
            display: flex;
            gap: 10px;
        }

        .rectangle.enlarged .rectangle-buttons{
            display: flex;
            gap: 10px;
        }

        .download-btn, .delete-btn, .close, .edit-btn{
            background-color: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            color: var(--overlaycolor-color);
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 3px;
            font-size: 14px;
            animation: easeinanimationfrb 0.3s;
        }

        .download-btn {
            display: none;
        }

        @keyframes easeinanimationfin {
            0% {
                transform: translateY(100%);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .image-name {
            display: none;
            position: absolute;
            color: rgba(255, 255, 255, 0.7);
            font-size: 20px;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 5px;
            border-radius: 3px;
            animation: easeinanimationfin 0.3s;
            transition: 0.5s;
            width: 100%;
            height: 100%;
            text-align: center;
            justify-content: center;
            align-items: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .rectangle:hover .image-name {
            display: flex;
        }

        .rectangle.enlarged .image-name {
            display: flex;
            color: rgba(255, 255, 255, 0.7);
        }

        .rectangle.enlarged .rectangle-buttons .download-btn {
            display: inline-block;
        }

        .rectangle.enlarged {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 80vw;
            height: 80vh;
            transform: translate(-50%, -50%);
            z-index: 1000;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            transition: 0.3s;
        }

        .sidebarenabled .rectangle.enlarged {
            transform: none;
            top: 0;
            right: 0;
            left: 0;
            height: 100vh;
            width: 70vw;
            box-shadow: none;
            border-radius: 0;
            border-left: none;
            transition: 0.3s;
        }

        .close {
            position: absolute;
            top: 5px;
            left: 5px;
            display: none;
            transition: 0.3s;
        }

        .rectangle.enlarged .close{
            display: block;
        }

        @media (max-width: 900px) {
            .commandsdisplay-container {
                width: 100vw;
                height: 100vh;
                max-width: none;
            }
            .topandbottomsignsdisplay-container {
                width: 100vw;
                height: 100vh;
                max-width: none;
            }
            .theme-option-container {
                width: 100vw;
                height: 100vh;
                max-width: none;
             }
            .content-container {
                width: 100vw;
                height: 100vh;
                max-width: none;
                grid-template-columns: repeat(2, 1fr);
                overflow-y: auto;
            }
            .rectangle{
               transition: 0.5s;
            }
            .rectangle.enlarged{
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                z-index: 1000;
                transform: none;
                background-size: contain;
                background-repeat: no-repeat;
                background-position: center;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            }
        }

        @media (max-width: 500px) {
            .content-container {
                width: 100vw;
                height: 100vh;
                grid-template-columns: repeat(1, 1fr);
                overflow-y: auto;
            }
            .rectangle{
                transition: 0.5s;
            }
            .code-editor-line {
                font-size: 0.7em;
            }
        }

        .closeviewthisfilebtn {
            height: 6vh;
            width: 6vh;
            background: var(--transparentshade-color);
            border: none;
            border-radius: 50%;
            display: none;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: var(--black-color);
            position: fixed;
            top: 10px;
            left: 10px;
            font-size: 2vh;
            z-index: 1112;
            transition: 0.3s;
        }

        .sidebarenabled .closeviewthisfilebtn {
            left: calc(30vw + 10px);
        }


        .codesearchresults{
            font-size: 1em;
            background: var(--seccontainerbackground-color);
            width: 25vw;
            border-radius: 5px;
            border: none;var(--switchcheckedbackground-color);
            position: absolute;
            display: none;
            color: var(--black-color);
            flex-direction: column;
            max-height: 50vh;
            overflow-y: scroll;
            word-break: break-word;
            transition: 0.3s;
        }
        .codesearchresults .result{
            padding: 10px;
            margin-top: 2px;
            background: var(--lightgrey-color);
            color: var(--black-color);
            border-radius: 5px;
            word-break: break-word;
            transition: 0.3s;
        }
        .comtiniueresultsbtn {
            padding: 10px;
            margin-top: 2px;
            background: var(--switchcheckedbackground-color);
            color: #fff;
            border: none;
            border-radius: 5px;
            word-break: break-word;
            transition: 0.3s;
        }
        .codesearchresults .result .highlight{
            background: var(--switchcheckedbackground-color);
            font-size: 0.8em;
            padding: 0.1em;
            border-radius: 5px;
            display: inline-block;
            color: #fff;
            transition: 0.3s;
        }
        @media(max-width: 700px){
            .codesearchresults{
                width: 100vw;
            }
        }
        .lineoptions {
            display: none;
            padding: 0.1em;
            background: var(--seccontainerbackground-color);
            color: var(--black-color);
            border-radius: 100px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
            transition: 0s;
        }
        .lineoptions button{
            color: var(--black-color);
            width: 5vh;
            height: 5vh;
            min-width: 40px;
            min-height: 40px;
            background: var(--seccontainerbackground-color);
            text-align: center;
            border: none;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.70em;
            transition: 0.5s;
        }
        .lineoptions button:hover{
            background: var(--seccontainerlinebackground-color);
        }



        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--fileloadingoverlaybackground-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1500;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        #overlay.active {
            visibility: visible;
            opacity: 1;
        }

        .progress-bar-container {
            width: 80%;
            max-width: 400px;
            background: var(--loadingbarbackground-color);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 20px;
            width: 0;
            background: var(--loadingbarloadedbackground-color);
            transition: width 0.5s ease;
        }

        .progress-text {
            color: #fff;
            text-align: center;
            margin-top: 10px;
            font-size: 16px;
        }

        .checkmark {
            font-size: 50px;
            color: white;
            display: none;
            margin-bottom: 10px;
        }

        .checkmark.visible {
            display: block;
        }

        #custom-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1400;
            backdrop-filter: blur(5px);
            animation: fadeInOverlay 0.3s ease-in-out;
        }

        #custom-dialog {
            background: var(--background-color);
            padding: 30px;
            border: 1px solid var(--rectangleborder);
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px;
            text-align: center;
            position: relative;
            animation: fadeInDialog 0.4s ease-in-out;
        }

        #close-dialog {
            position: absolute;
            top: 15px;
            right: 15px;
            cursor: pointer;
            font-size: 24px;
            color: var(--rectangleborder);
            transition: color 0.2s;
        }

        #custom-message {
            font-size: 18px;
            color: var(--black-color);
            margin-bottom: 20px;
            padding: 10px;
            text-align: left;
            max-height: 200px;
            overflow: scroll;
        }

        #prompt-input-container {
            margin-top: 15px;
        }

        #custom-input {
            width: 95%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--rectangleborder);
            font-size: 16px;
            margin-bottom: 15px;
            color: var(--black-color);
            background: transparent;
        }
        #custom-input:focus{
            outline: none;
        }

        #close-alert, #submit-prompt {
            margin-top: 10px;
            padding: 12px;
            width: 100%;
            background: var(--spencialbtnbackground-color);
            color: var(--black-color);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }

        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInDialog {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        .closecommandoverlaybtn {
            background: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            color: var(--overlaycolor-color);
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 3px;
            font-size: 14px;
            animation: easeinanimationfrb 0.3s;
            position: absolute;
            top: 5px;
            left: 5px;
        }

        h2 {
            font-family: Arial, sans-serif;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            color: var(--overlaycolor-color);
            margin-bottom: 20px;
        }

        .command-list {
            list-style: none;
            padding: 0;
            margin: 0 auto;
            max-width: 600px;
            background-color: var(--commandlistbackground-color);
            border: 1px solid var(--rectangleborder);
            border-radius: 8px;
            overflow: hidden;
        }
        .seccontainer-line-container{
            list-style: none;
            padding: 0;
            margin: 0 auto;
            background-color: var(--commandlistbackground-color);
            border: 1px solid var(--rectangleborder);
            border-radius: 8px;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        .command-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid var(--rectangleborder);
            font-family: 'Courier New', monospace;
            font-size: 16px;
            color: var(--commandlistcolor-color);
        }

        .seccontainer-line{
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid var(--rectangleborder);
            font-family: 'Courier New', monospace;
            font-size: 16px;
            color: var(--commandlistcolor-color);
            width: 70vw;
        }

        .sidebarenabled .seccontainer-line{
            width: 68vw;
        }

        .command-list li:last-child {
            border-bottom: none;
        }

        .seccontainer-line-container seccontainer-line:last-child{
            border-bottom: none;
        }

        .command {
            font-weight: bold;
            color: var(--switchcheckedbackground-color);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .symbolsignspan{
            font-weight: bold;
            color: var(--switchcheckedbackground-color);
            font-family: 'Arial', sans-serif;
            letter-spacing: 0.5px;
        }

        .Symbol-Span {
            background-color: var(--switchcheckedbackground-color);
            color: white;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            min-width: 40px;
        }

        @media (max-width: 600px) {
            .command-list li {
                font-size: 10px;
            }
            .seccontainer-line-container seccontainer-line{
                font-size: 10px;
            }
            .Symbol-Span {
                font-size: 12px;
            }
        }

        .Symbol-Span:hover {
            transform: scale(1.1);
        }

        .Symbol-Span:active {
            transform: scale(1);
            background-color: #004494;
        }
        #specialbtn{
            font-family: 'Arial', sans-serif;
        }
        #scrolltopreviousfile, #scrolltonextfile{
            height: 50px;
            width: 50px;
            background: transparent;
            border: none;
            border-radius: 5px;
            color: var(--black-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            opacity: 0;
            position: fixed;
            bottom: 2.5px;
            transition: 0.3s;
        }
        #scrolltopreviousfile{
            left: 0;
        }
        .sidebarenabled #scrolltopreviousfile{
            left: 30vw;
        }
        #scrolltonextfile{
            right: 0;
        }
        #scrolltopreviousfile:hover{
            opacity: 1;
        }
        #scrolltonextfile:hover{
            opacity: 1;
        }
        .sidebarbardiv{
            height: 100vh;
            width: 30vw;
            background: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            color: var(--black-color);
            display: flex;
            flex-direction: column;
            padding: 3px;
            display: none;
            overflow: scroll;
            overflow-x: hidden;
            transition: 0.3s;
        }
        .sidebarenabled .sidebarbardiv{
            display: flex;
        }
        .smallsidebarenabled .sidebarbardiv{
            display: flex;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 7;
            width: 100vw;
            transition: 0.5s
        }
        .sidebarbardiv h3{
            font-family: Arial, sans-serif;
            font-size: 1em;
            font-weight: bold;
            text-align: left;
            margin: 10px;
            color: var(--overlaycolor-color);
            transition: 0.3s;
        }
        .theme-option-container h3 {
            font-family: Arial, sans-serif;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin: 10px;
            color: var(--overlaycolor-color);
            transition: 0.3s;
        }
        .sidebarbardivbuttondiv{
            width: 100%;
            border: none;
            background: transparent;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            padding: 5px;
            transition: 0.3s;
        }
        .sidebarbardivbuttondiv button{
            background: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            color: var(--black-color);
            display: flex;
            padding: 10px;
            text-align: left;
            font-size: 1em;
            border-radius: 5px;
            margin-bottom: 5px;
            transition: 0.3s;
            overflow: hidden;
        }
        .allcontainer{
            width: 100vw;
            height: 100vh;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            background-color: var(--background-color);
            transition: 0.3s;
        }
        .sidebarenabled .allcontainer{
            width: 70vw;
        }
        .divcodeeditor-container{
            height: 100vh;
            width: 100vw;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: space-between;
            transition: 0.3s;
        }
        .togglesidebarbutton {
            border: none;
            background: transparent;
            color: var(--black-color);
            font-size: 1.2em;
            position: absolute;
            margin-top: 5px;
            margin-left: 10px;
            z-index: 5;
        }
        .sidebarenabled .content-container {
            border-radius: 0;
        }
        #closemenuforsmallscreen{
            background: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            color: var(--black-color);
            display: flex;
            padding: 10px;
            text-align: left;
            font-size: 1em;
            border-radius: 5px;
            margin-bottom: 5px;
            transition: 0.3s;
            font-weight: bold;
            border: none;
            display: none;
        }
        .smallsidebarenabled #closemenuforsmallscreen {
            display: flex;
        }
        .themeoption{
            background: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            color: var(--black-color);
            display: flex;
            padding: 10px;
            text-align: left;
            font-size: 1em;
            border-radius: 5px;
            margin-bottom: 5px;
            transition: 0.3s;
            overflow: hidden;
            justify-content: space-between;
        }
        .switchtothememaincolorspan{
            width: 1.2em;
            height: 1.2em;
            border-radius: 50%;
        }
        .switchtothememaincolorspan{
            width: 1.7em;
            height: 1.7em;
            border-radius: 50%;
        }
        .switchtothemetitlespan{
            color: var(--black-color);
            font-size: 1em;
        }
        .themeoption2{
            background: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            color: var(--black-color);
            display: flex;
            padding: 10px;
            text-align: left;
            font-size: 1em;
            border-radius: 5px;
            margin-bottom: 5px;
            transition: 0.3s;
            overflow: hidden;
            justify-content: center;
            flex-direction: column;
        }

        input[type="range"]{
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: linear-gradient(90deg, var(--white-color), var(--switchcheckedbackground-color));
            border-radius: 5px;
            outline: none;
            transition: background 0.3s ease;
            border: 1px solid var(--white-color);
            margin-top: 8px;
        }
        @media(max-width: 700px){
            input[type="range"]{
                width: 30%;
            }
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: var(--white-color);
            border: 2px solid var(--switchcheckedbackground-color);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--white-color);
            border: 2px solid var(--switchcheckedbackground-color);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        input[type="range"]::-ms-thumb {
            width: 20px;
            height: 20px;
            background: var(--white-color);
            border: 2px solid var(--switchcheckedbackground-color);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        .importantsearchresult{
            background: rgba(255, 0, 0, 0.5);
        }
        .result.importantsearchresult{
            background: rgba(255, 0, 0, 0.5);
        }
        .sidebarfilelinklink {
            display: flex;
            justify-content: space-between;
            align-items: center;
            overflow-wrap: break-word;
            word-break: break-word;
            hyphens: auto;
            overflow-x: hidden;
        }

        .threedots {
            margin-left: auto;
            padding: 0 10px;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            z-index: 2000;
        }

        .options-container {
            position: absolute;
            background-color: var(--white-color);
            border-radius: 8px;
            border: 1px solid var(--rectangleborder);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 10px;
            width: 200px;
            color: var(--black-color);
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .option-icon {
            font-size: 18px;
            background: transparent;
            border: none;
            color: var(--black-color);
        }

        .option-text {
            font-size: 14px;
        }
        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: red;
            border-radius: 50%;
            animation: fall 4s ease-out forwards;
            pointer-events: none;
            z-index: 2500;
        }

        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(calc(100vh + 100px)) rotate(360deg);
                opacity: 0;
            }
        }
        .sidebarbardivbuttondiv button{
            background: var(--lightgrey-color);
            border: none;
        }
        #closemenuforsmallscreen h3{
            font-weight: 600;
            color: #333;
        }
        .code-editor-line:focus{
            background: rgba(150, 150, 150, 0.1);
        }
        .customthemecodeinput{
            background: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            color: var(--black-color);
            display: flex;
            padding: 10px;
            text-align: left;
            font-size: 1em;
            border-radius: 5px;
            margin-bottom: 5px;
            transition: 0.3s;
            width: 100%;
            overflow: hidden;
        }
        .customthemecodeinput:focus{
            outline: none;
        }
        .syntax{
            display: inline-block;
        }
        .syntaxcolorinput{
            height: 1.5em;
            width: 1.5em;
            margin-left: 5px;
        }
        .syntaxblock { color: var(--syntaxblock-color); }
        .syntaxoperator { color: var(--syntaxoperator-color); }
        .syntaxbracket { color: var(--syntaxbracket-color); }
        .syntaxsign { color: var(--syntaxsign-color); }
        .syntaxstring { color: var(--syntaxstring-color); }
        .syntaxnumber { color: var(--syntaxnumber-color); }
        .syntaxcomment { color: var(--syntaxcomment-color); }
        .syntaxvariable { color: var(--syntaxvariable-color); }
        .syntaxcommand { color: var(--syntaxcommand-color); }
        .syntaxkeyword { color: var(--syntaxkeyword-color); }
        .syntaxhtmlcomment { color: var(--syntaxhtmlcomment-color); }
        .syntaxregex { color: var(--syntaxregex-color); }
        .syntaxhtmltagcontent { color: var(--syntaxhtmltagcontent-color); }
        .section.gridenabled {
            background-size: 15px 15px;
            background-image: radial-gradient(var(--griddot-color) 1px, transparent 1px);
        }
    </style>

</head>
<body>
  <!-- ☼ -->
    <div class="divcodeeditor-container sidebarenabled">
    <div class="sidebarbardiv">
        <button id="closemenuforsmallscreen" onclick="togglesidebarbuttonfunction()">← close Menu</button>
        <h3>functions</h3>
        <div class="sidebarbardivbuttondiv">
            <button onclick="showthemeoverlay()">theme</button>
            <button id="scrollviewintoviewbtn" onclick="scrollviewintoview()">view</button>
            <button onclick="showallfilescontainer()">files</button>
        </div>
        <h3>files</h3>
        <div class="sidebarbardivbuttondiv sidebarbardivbuttondiv1">
            <button id="sidebarfilelinklink0" class="sidebarfilelinklink" onclick="editthisfile('0', event)">index.html<div class="threedots">⋮</div></button>
            <button id="sidebarfilelinklink1" class="sidebarfilelinklink" onclick="editthisfile('1', event)">styles.css<div class="threedots">⋮</div></button>
            <button id="sidebarfilelinklink2" class="sidebarfilelinklink" onclick="editthisfile('2', event)">script.js<div class="threedots">⋮</div></button>
        </div>
    </div>
    <div class="allcontainer">

    <button class="togglesidebarbutton" onclick="togglesidebarbuttonfunction()">☰</button>
    <div class="container" id="container">
        <div class="section" id="section0">
            <div class="editor-selected-line-btns">
                  <button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onfocus="searchcode(this)" placeholder="⌕ search"></div>
            <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
                <div id="1" class="code-editor-line" contenteditable="true"></div>
            </div>
            <div class="code-editor-btns">
                <button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number">
            </div>
        </div>
        <div class="section" id="section1">
            <div class="editor-selected-line-btns">
                <button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onfocus="searchcode(this)" placeholder="⌕ search">
            </div>
            <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
                <div id="2" class="code-editor-line" contenteditable="true"></div>
            </div>
            <div class="code-editor-btns">
                <button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number">
            </div>

        </div>
        <div class="section" id="section2">
            <div class="editor-selected-line-btns">
                <button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onfocus="searchcode(this)" placeholder="⌕ search"></div>
            <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
                <div id="3" class="code-editor-line" contenteditable="true"></div>
            </div>
            <div class="code-editor-btns">
                <button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number">
            </div>
        </div>
        <div class="section viewcontainer" id="section3">
            <div class="swipe-container">
                <div class="view">
                    <div class="mobile-container">
                        <div class="safari-header">
                            <div class="safari-buttons">
                                <div class="back-btn"></div>
                            </div>
                            <div class="url-bar">
                                <input type="text" id="mobile-url-input" placeholder="file..." list="filenameoptions">
                                <datalist id="filenameoptions">
                                    <option id="option0" value="index.html"></option>
                                    <option id="option1" value="styles.css"></option>
                                    <option id="option2" value="script.js"></option>
                                </datalist>
                            </div>
                            <div class="action-btn" onclick="textCode('mobile-url-input', 'mobile-frame');createConfetti()">⌕</div>
                        </div>
                        <div class="iframe-container">
                            <iframe id="mobile-frame" loading="lazy"></iframe>
                        </div>
                    </div>
                </div>
                <div class="view" id="view2">
                    <div class="browser-container">
                        <div class="browser-header">
                            <div class="browser-buttons">
                                <div class="close-btn"></div>
                                <div class="minimize-btn"></div>
                                <div class="maximize-btn"></div>
                            </div>
                            <div class="url-bar">
                                <input type="text" id="computer-url-input" placeholder="file..." list="filenameoptions">
                            </div>
                            <div class="btn-group">
                                <button onclick="textCode('computer-url-input', 'computer-frame');createConfetti()">⌕</button>
                            </div>
                        </div>
                        <div class="iframe-container">
                            <iframe id="computer-frame" loading="lazy"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="codesearchresults">
        no results
    </div>

    <div class="lineoptions">
        <button onclick="swipethislineleft()">←</button>
        <button onclick="closelineoptionscontainer()">×</button>
        <button onclick="swipethislineright()">→</button>
    </div>

    <!-- Navigation Bar -->
    <div class="nav-bar" id="nav-bar">
        <div data-index="0" class="nav-dot filedot navdot0" onclick="dotonclick()">
            <input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="index.html">
        </div>
        <div data-index="1" class="nav-dot filedot navdot1" onclick="dotonclick()">
            <input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="styles.css">
        </div>
        <div data-index="2" class="nav-dot filedot navdot2" onclick="dotonclick()">
            <input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="script.js">
        </div>
        <div data-index="3" class="nav-dot navdot3" id="view-nav-dot" onclick="dotonclick()">
            <input class="filePathInput" type="text" value="view" maxlength="20" oninput="viewbottominputoninput(this)">
        </div>
    </div>
    <button id="scrolltopreviousfile" onclick="gotonextorpreviousfile('back')">←</button>
    <button id="scrolltonextfile" onclick="gotonextorpreviousfile('forward')">→</button>
    <div class="seccontainer">
        <div class="seccontainer-line-container">
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="copybtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">□</button>
            </div>
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="deletebtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">⌧</button>
            </div>
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="downbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">↓</button>
            </div> 
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="upbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">↑</button>
            </div> 
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="importantPinbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">⚠</button>
            </div>
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="sleapbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">☾</button>
            </div>
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="unsleeplines" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">○</button>
            </div>
            <div class="seccontainer-line" id="search-check">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="code-search-input" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">⌕</button>
            </div>
            <div class="seccontainer-line" id="search-check">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="line-number-input" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">⌕</button>
            </div>
            <div class="seccontainer-line" id="search-check">
                <label class="switch">
                    <input type="checkbox" class="switchbox commandsswitch" data-checked="showcommandlist-btn-element" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">⌘</button>
            </div>
            <div class="seccontainer-line" id="search-check">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="trimbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">●</button>
            </div>
            <div class="seccontainer-line" id="search-check">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="rightbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">→</button>
            </div>
            <div class="seccontainer-line" id="search-check">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="leftbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">←</button>
            </div>
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-update-id="linenumbering" onchange="updatelinenumbercheckbox(this)" checked>
                    <span class="slider"></span>
                </label> line numbers
            </div>
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-update-class="gridenabled" onchange="updategridenabledordisabledcheckbox(this)" checked>
                    <span class="slider"></span>
                </label> grid
            </div>
            <div class="seccontainer-line">
                <label class="switch">
                    <input type="checkbox" class="switchbox" data-update-aceclass="autocompleteenabled" onchange="updateautocompleteenabledordisabledcheckbox(this)" checked>
                    <span class="slider"></span>
                </label> auto complete
            </div>
        </div>
        <div class="seccontainer-line" id="specialbtn" onclick="deleteAllEmptyLines()">
            delete empty lines
        </div>
        <div class="seccontainer-line" id="specialbtn" onclick="deleteAllCommentsInLines()">
            delete comments
        </div>
    </div>
    <div class="commandsoverlay-container" onclick="hideelement('class', 'commandsoverlay-container', event)">
        <div class="commandsdisplay-container">
            <button class="closecommandoverlaybtn" onclick="hidecommandoverlay()">×</button>
            <br>
            <h2>commands</h2>
            <br>
            <ul class="command-list">
                <li><span class="command">/alert</span>  <button class="Symbol-Span">⚠</button></li>
                <li><span class="command">/arrowbottomleft</span>  <button class="Symbol-Span">↙</button></li>
                <li><span class="command">/arrowbottomright</span>  <button class="Symbol-Span">↘</button></li>
                <li><span class="command">/arrowdown</span>  <button class="Symbol-Span">↓</button></li>
                <li><span class="command">/arrowgoleft</span>  <button class="Symbol-Span">↤</button></li>
                <li><span class="command">/arrowgoright</span>  <button class="Symbol-Span">↦</button></li>
                <li><span class="command">/arrowleft</span>  <button class="Symbol-Span">←</button></li>
                <li><span class="command">/arrowright</span>  <button class="Symbol-Span">→</button></li>
                <li><span class="command">/arrowtopleft</span>  <button class="Symbol-Span">↖</button></li>
                <li><span class="command">/arrowtopright</span>  <button class="Symbol-Span">↗</button></li>
                <li><span class="command">/arrowup</span>  <button class="Symbol-Span">↑</button></li>
                <li><span class="command">/bigspark</span>  <button class="Symbol-Span">✶</button></li>
                <li><span class="command">/bottomleftedge</span>  <button class="Symbol-Span">◣</button></li>
                <li><span class="command">/bottomrightedge</span>  <button class="Symbol-Span">◢</button></li>
                <li><span class="command">/smallcheckmark</span>  <button class="Symbol-Span">✓</button></li>
                <li><span class="command">/emptycircle</span>  <button class="Symbol-Span">◯</button></li>
                <li><span class="command">/copyright</span>  <button class="Symbol-Span">©</button></li>
                <li><span class="command">/bigcross</span>  <button class="Symbol-Span">✘</button></li>
                <li><span class="command">/crossincirkle</span>  <button class="Symbol-Span">⊗</button></li>
                <li><span class="command">/crossinsquare</span>  <button class="Symbol-Span">⌧</button></li>
                <li><span class="command">/crossnotinsquare</span>  <button class="Symbol-Span">×</button></li>
                <li><span class="command">/cutoutcircle</span>  <button class="Symbol-Span">◌</button></li>
                <li><span class="command">/diamond</span>  <button class="Symbol-Span">◆</button></li>
                <li><span class="command">/emptyspark</span>  <button class="Symbol-Span">✧</button></li>
                <li><span class="command">/emptysquare</span>  <button class="Symbol-Span">□</button></li>
                <li><span class="command">/emptystar</span>  <button class="Symbol-Span">☆</button></li>
                <li><span class="command">/emptytriangleleft</span>  <button class="Symbol-Span">◁</button></li>
                <li><span class="command">/emptytriangledown</span>  <button class="Symbol-Span">▽</button></li>
                <li><span class="command">/emptytriangleright</span>  <button class="Symbol-Span">▷</button></li>
                <li><span class="command">/emptytriangletop</span>  <button class="Symbol-Span">△</button></li>
                <li><span class="command">/filledcircle</span>  <button class="Symbol-Span">●</button></li>
                <li><span class="command">/heart</span>  <button class="Symbol-Span">♥</button></li>
                <li><span class="command">/infinite</span>  <button class="Symbol-Span">∞</button></li>
                <li><span class="command">/magnifyingglass</span>  <button class="Symbol-Span">⌕</button></li>
                <li><span class="command">/minus</span>  <button class="Symbol-Span">-</button></li>
                <li><span class="command">/moonleft</span>  <button class="Symbol-Span">☽</button></li>
                <li><span class="command">/moonright</span>  <button class="Symbol-Span">☾</button></li>
                <li><span class="command">/movable</span>  <button class="Symbol-Span">✣</button></li>
                <li><span class="command">/eighthnote</span>  <button class="Symbol-Span">♪</button></li>
                <li><span class="command">/beamednote</span>  <button class="Symbol-Span">♫</button></li>
                <li><span class="command">/chordsymbol</span>  <button class="Symbol-Span">♬</button></li>
                <li><span class="command">/quarter note</span>  <button class="Symbol-Span">♩</button></li>
                <li><span class="command">/paperplane</span>  <button class="Symbol-Span">➤</button></li>
                <li><span class="command">/pencil</span>  <button class="Symbol-Span">✎</button></li>
                <li><span class="command">/plus</span>  <button class="Symbol-Span">+</button></li>
                <li><span class="command">/refreshright</span>  <button class="Symbol-Span">↻</button></li>
                <li><span class="command">/refreshleft</span>  <button class="Symbol-Span">↺</button></li>
                <li><span class="command">/registered</span>  <button class="Symbol-Span">®</button></li>
                <li><span class="command">/sidebar</span>  <button class="Symbol-Span">≡</button></li>
                <li><span class="command">/smallcross</span>  <button class="Symbol-Span">×</button></li>
                <li><span class="command">/filledspark</span>  <button class="Symbol-Span">✦</button></li>
                <li><span class="command">/filledsquare</span>  <button class="Symbol-Span">■</button></li>
                <li><span class="command">/filledstar</span>  <button class="Symbol-Span">★</button></li>
                <li><span class="command">/sun</span>  <button class="Symbol-Span">☼</button></li>
                <li><span class="command">/toprightedge</span>  <button class="Symbol-Span">◥</button></li>
                <li><span class="command">/topleftedge</span>  <button class="Symbol-Span">◤</button></li>
                <li><span class="command">/trademark</span>  <button class="Symbol-Span">™</button></li>
                <li><span class="command">/triangleleft</span>  <button class="Symbol-Span">◀</button></li>
                <li><span class="command">/triangleright</span>  <button class="Symbol-Span">▶</button></li>
                <li><span class="command">/triangledown</span>  <button class="Symbol-Span">▼</button></li>
                <li><span class="command">/triangletop</span>  <button class="Symbol-Span">▲</button></li>
                <li><span class="command">/updownleftarrow</span>  <button class="Symbol-Span">↵</button></li>
            </ul>
            <br>
            <h2>short-cuts</h2>
            <br>
            <ul class="command-list">
                <li><span class="command">/:func</span>  <button class="Symbol-Span">function</button></li>
                <li><span class="command">/:if</span>  <button class="Symbol-Span">if statement</button></li>
                <li><span class="command">/:for</span>  <button class="Symbol-Span">for loop</button></li>
                <li><span class="command">/:try</span>  <button class="Symbol-Span">try catch</button></li>
                <li><span class="command">/:div</span>  <button class="Symbol-Span">division tag</button></li>
                <li><span class="command">/:btn</span>  <button class="Symbol-Span">button tag</button></li>
                <li><span class="command">/:span</span>  <button class="Symbol-Span">span tag</button></li>
                <li><span class="command">/:image</span>  <button class="Symbol-Span">image tag</button></li>
                <li><span class="command">/:p</span>  <button class="Symbol-Span">p tag</button></li>
                <li><span class="command">/:h1</span>  <button class="Symbol-Span">h1 tag</button></li>
                <li><span class="command">/:h2</span>  <button class="Symbol-Span">h2 tag</button></li>
                <li><span class="command">/:h3</span>  <button class="Symbol-Span">h3 tag</button></li>
                <li><span class="command">/:h4</span>  <button class="Symbol-Span">h4 tag</button></li>
                <li><span class="command">/:h5</span>  <button class="Symbol-Span">h5 tag</button></li>
                <li><span class="command">/:h6</span>  <button class="Symbol-Span">h6 tag</button></li>
                <li><span class="command">/:at</span>  <button class="Symbol-Span">a tag</button></li>
                <li><span class="command">/:ul</span>  <button class="Symbol-Span">ul tag</button></li>
                <li><span class="command">/:li</span>  <button class="Symbol-Span">li tag</button></li>
                <li><span class="command">/:ol</span>  <button class="Symbol-Span">ol tag</button></li>
                <li><span class="command">/:table</span>  <button class="Symbol-Span">table tag</button></li>
                <li><span class="command">/:tr</span>  <button class="Symbol-Span">tr tag</button></li>
                <li><span class="command">/:td</span>  <button class="Symbol-Span">td tag</button></li>
                <li><span class="command">/:th</span>  <button class="Symbol-Span">th tag</button></li>
                <li><span class="command">/:input</span>  <button class="Symbol-Span">input tag</button></li>
                <li><span class="command">/:form</span>  <button class="Symbol-Span">form tag</button></li>
                <li><span class="command">/:label</span>  <button class="Symbol-Span">label tag</button></li>
                <li><span class="command">/:iframe</span>  <button class="Symbol-Span">iframe tag</button></li>
                <li><span class="command">/:nav</span>  <button class="Symbol-Span">nav tag</button></li>
                <li><span class="command">/:header</span>  <button class="Symbol-Span">header tag</button></li>
                <li><span class="command">/:footer</span>  <button class="Symbol-Span">footer tag</button></li>
                <li><span class="command">/:sec</span>  <button class="Symbol-Span">sec tag</button></li>
                <li><span class="command">/:article</span>  <button class="Symbol-Span">article tag</button></li>
                <li><span class="command">/:aside</span>  <button class="Symbol-Span">aside tag</button></li>
                <li><span class="command">/:main</span>  <button class="Symbol-Span">main tag</button></li>
            </ul>
        </div>
    </div>
    <div class="singsoverlay-container" onclick="hideelement('class', 'singsoverlay-container', event)">
        <div class="topandbottomsignsdisplay-container">
            <button class="closecommandoverlaybtn" onclick="hidesignexplenationoverlay()">×</button>
            <br>
            <h2>top - (selected)</h2>
            <br>
            <ul class="command-list">
                <li><button class="Symbol-Span">⌧</button><span class="symbolsignspan">Delete</span></li>
                <li><button class="Symbol-Span">⚠</button><span class="symbolsignspan">Pin</span></li>
                <li><button class="Symbol-Span">↑</button><span class="symbolsignspan">Move up</span></li>
                <li><button class="Symbol-Span">↓</button><span class="symbolsignspan">Move down</span></li>
                <li><button class="Symbol-Span">☾</button><span class="symbolsignspan">Disable</span></li>
                <li><button class="Symbol-Span">□</button><span class="symbolsignspan">Copy</span></li>
                <li><button class="Symbol-Span">●</button><span class="symbolsignspan">trim</span></li>
                <li><button class="Symbol-Span">⌕</button><span class="symbolsignspan">Code Search</span></li>
            </ul>
            <br>
            <h2>bottom - (all)</h2>
            <br>
            <ul class="command-list"><li><button class="Symbol-Span">⌧</button><span class="symbolsignspan">Delete</span></li>
                <li><button class="Symbol-Span">⚠</button><span class="symbolsignspan">Unpin</span></li>
                <li><button class="Symbol-Span">←</button><span class="symbolsignspan">Unselect</span></li>
                <li><button class="Symbol-Span">→</button><span class="symbolsignspan">Unfold</span></li>
                <li><button class="Symbol-Span">○</button><span class="symbolsignspan">Enable</span></li>
                <li><button class="Symbol-Span">□</button><span class="symbolsignspan">Copy</span></li>
                <li><button class="Symbol-Span">⌘</button><span class="symbolsignspan">Commands</span></li>
                <li><button class="Symbol-Span">⌕</button><span class="symbolsignspan">Teleport</span></li>
            </ul>
        </div>
    </div>
    <div class="closeviewthisfilebtn" onclick="closeviewthisfile()">×</div>
        <div class="overlay-container" onclick="hideelement('class', 'overlay-container', event)">
        <!-- Content Container (mit Top Bar drin) -->
        <div class="content-container">
            <!-- Top Bar -->
            <div class="top-bar">
                <button class="overlay-back-btn" onclick="hideelement('class', 'overlay-container', event)">×</button>
                <button class="overlay-close-btn" onclick="hideelement('class', 'overlay-container', event)">close</button>
                <input type="file" id="fileInput" style="display: none;" accept=".txt, .css, .js, .html, image/*" multiple>
                <button onclick="clickthiselement('#fileInput')" class="upload-btn">upload</button>
                <button class="viewthisfile" onclick="viewthisfile()">view</button>
                <button class="create-file-btn" onclick="requestcreatenewfile()">+</button>
            </div>

            <!-- Rechtecke (Inhalt) -->

            <div class="rectangle" id="rectangle0" onclick="editthisfile('0', event)">
                <span class="notclickable">index.html</span>
                <div class="rectangle-buttons">
                    <button class="edit-btn">…</button>
                </div>
                <button class="close">×</button>
            </div>
            <div class="rectangle" id="rectangle1" onclick="editthisfile('1', event)">
                <span class="notclickable">styles.css</span>
                <div class="rectangle-buttons">
                    <button class="edit-btn">…</button>
                </div>
                <button class="close">×</button>
            </div>
            <div class="rectangle" id="rectangle2" onclick="editthisfile('2', event)">
                <span class="notclickable">script.js</span>
                <div class="rectangle-buttons">
                    <button class="edit-btn">…</button>
                </div>
                <button class="close">×</button>
            </div>
            <div class="rectangle" id="image-rectangle" data-name="Image" data-type="png" style="background-image: url(Plants_fm.jpg); background-size: cover; background-position: center;">
                <span class="image-name">Image.png</span>
                <div class="rectangle-buttons">
                    <button class="download-btn">Download</button>
                    <button class="delete-btn" onclick="deleteImage(this)">Delete</button>
                </div>
                <button class="close">×</button>
            </div>
        </div>
    </div>
    <div id="theme-overlay" class="theme-overlay" onclick="hideelement('class', 'theme-overlay', event)">
        <div class="theme-option-container">
            <button class="closecommandoverlaybtn" onclick="hidethemeoverlay()">×</button>
            <h3>theme</h3>
            <br>
            <div class="themeoption" onclick="removeallthemes()">
                <span class="switchtothememaincolorspan" style="background: linear-gradient(to right, var(--rectanglecolorcolor-color), var(--background-color));"></span>
                <span class="switchtothemetitlespan">none</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('helloween-theme')"><span class="switchtothememaincolorspan" style="background: #FF6D00"></span><span class="switchtothemetitlespan">helloween</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('winter-theme')">
                <span class="switchtothememaincolorspan" style="background: #00bcd4"></span>
                <span class="switchtothemetitlespan">winter</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('spring-theme')">
                <span class="switchtothememaincolorspan" style="background: #4caf50"></span>
                <span class="switchtothemetitlespan">spring</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('ocean-theme')">
                <span class="switchtothememaincolorspan" style="background: #00acc1"></span>
                <span class="switchtothemetitlespan">ocean</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('autumn-theme')">
                <span class="switchtothememaincolorspan" style="background: #ff9800"></span>
                <span class="switchtothemetitlespan">autumn</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('nightsky-theme')">
                <span class="switchtothememaincolorspan" style="background: #3f51b5"></span>
                <span class="switchtothemetitlespan">nightsky</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('desert-theme')">
                <span class="switchtothememaincolorspan" style="background: #ffcc80"></span>
                <span class="switchtothemetitlespan">desert</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('forest-theme')">
                <span class="switchtothememaincolorspan" style="background: #4caf50"></span>
                <span class="switchtothemetitlespan">forest</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('galaxy-theme')">
                <span class="switchtothememaincolorspan" style="background: #673ab7"></span>
                <span class="switchtothemetitlespan">galaxy</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('sunset-theme')">
                <span class="switchtothememaincolorspan" style="background: #f44336"></span>
                <span class="switchtothemetitlespan">sunset</span>
            </div>
            <div class="themeoption" onclick="switchtotheme('neon-theme')">
                <span class="switchtothememaincolorspan" style="background: #76ff03"></span>
                <span class="switchtothemetitlespan">neon</span>
            </div>
            <div class="themeoption2" id="customthemeoption" onclick="switchtotheme('custom-theme')">
                <div class="themeoption">
                    <span class="switchtothememaincolorspan" style="background: var(--switchcheckedbackground-color)"></span>
                    <span class="switchtothemetitlespan">custom</span></div>
                <div class="colorselectorcontainer">
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="backgroundColor" value="#0d1117" onchange="updateBackgroundColor()">
                        <span class="switchtothemetitlespan">background</span>
                    <input type="range" id="backgroundAlpha" min="0" max="100" value="100" onchange="updateBackgroundColor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="accentColor" value="#161b22" onchange="updateaccentColor()">
                    <span class="switchtothemetitlespan">accent color</span>
                    <input type="range" id="accentAlpha" min="0" max="100" value="100" onchange="updateaccentColor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="selectedColor" value="#28A745" onchange="updateSelectedColor()">
                    <span class="switchtothemetitlespan">special color</span>
                    <input type="range" id="selectedAlpha" min="0" max="100" value="50" onchange="updateSelectedColor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="colorColor" value="#ffffff" onchange="updateColorColor()">
                    <span class="switchtothemetitlespan">text color</span>
                    <input type="range" id="colorAlpha" min="0" max="100" value="100" onchange="updateColorColor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="rectangleBorderColor" value="#161b22" onchange="updateRectangleBorderColor()">
                    <span class="switchtothemetitlespan">borders</span>
                    <input type="range" id="rectangleBorderAlpha" min="0" max="100" value="100" onchange="updateRectangleBorderColor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="switchCheckedBackgroundColor" value="#0156CD" onchange="updateSwitchCheckedBackgroundColor()">
                    <span class="switchtothemetitlespan">secondary color</span>
                    <input type="range" id="switchCheckedAlpha" min="0" max="100" value="100" onchange="updateSwitchCheckedBackgroundColor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="codeeditoreditbtncolor" value="#ffffff" onchange="updatecodeeditoreditbtncolor()">
                    <span class="switchtothemetitlespan">functions</span>
                    <input type="range" id="codeeditoreditbtncolorAlpha" min="0" max="100" value="100" onchange="updatecodeeditoreditbtncolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="loadingBarLoadedBackgroundColor" value="#0156CD" onchange="updateLoadingBarLoadedBackgroundColor()">
                    <span class="switchtothemetitlespan">loading bar</span>
                    <input type="range" id="loadingBarLoadedAlpha" min="0" max="100" value="100" onchange="updateLoadingBarLoadedBackgroundColor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="rectangleColorColor" value="#363736" onchange="updateRectangleColorColor()">
                    <span class="switchtothemetitlespan">file container path</span>
                    <input type="range" id="rectangleColorAlpha" min="0" max="100" value="100" onchange="updateRectangleColorColor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="gridColor" value="#ffffff" onchange="updategridColorColor()">
                    <span class="switchtothemetitlespan">grid</span>
                    <input type="range" id="gridColorAlpha" min="0" max="100" value="10" onchange="updategridColorColor()">
                </div>
                <br>
                <h3>syntax</h3>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxblockcolor" value="#C678DD" onchange="updatesyntaxblockcolor()">
                    <span class="switchtothemetitlespan">block</span>
                    <input type="range" id="syntaxblockcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxblockcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxoperatorcolor" value="#E06C75" onchange="updatesyntaxoperatorcolor()">
                    <span class="switchtothemetitlespan">operator</span>
                    <input type="range" id="syntaxoperatorcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxoperatorcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxbracketcolor" value="#ABB2BF" onchange="updatesyntaxbracketcolor()">
                    <span class="switchtothemetitlespan">bracket</span>
                    <input type="range" id="syntaxbracketcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxbracketcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxsigncolor" value="#ABB2BF" onchange="updatesyntaxsigncolor()">
                    <span class="switchtothemetitlespan">sign</span>
                    <input type="range" id="syntaxsigncolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxsigncolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxstringcolor" value="#98C379" onchange="updatesyntaxstringcolor()">
                    <span class="switchtothemetitlespan">string</span>
                    <input type="range" id="syntaxstringcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxstringcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxnumbercolor" value="#D19A66" onchange="updatesyntaxnumbercolor()">
                    <span class="switchtothemetitlespan">number</span>
                    <input type="range" id="syntaxnumbercolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxnumbercolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxcommentcolor" value="#5C6370" onchange="updatesyntaxcommentcolor()">
                    <span class="switchtothemetitlespan">comment</span>
                    <input type="range" id="syntaxcommentcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxcommentcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxvariablecolor" value="#61AFEF" onchange="updatesyntaxvariablecolor()">
                    <span class="switchtothemetitlespan">variable</span>
                    <input type="range" id="syntaxvariablecolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxvariablecolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxcommandcolor" value="#E5C07B" onchange="updatesyntaxcommandcolor()">
                    <span class="switchtothemetitlespan">command</span>
                    <input type="range" id="syntaxcommandcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxcommandcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxkeywordcolor" value="#C678DD" onchange="updatesyntaxkeywordcolor()">
                    <span class="switchtothemetitlespan">keyword</span>
                    <input type="range" id="syntaxkeywordcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxkeywordcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxhtmlcommentcolor" value="#5C6370" onchange="updatesyntaxhtmlcommentcolor()">
                    <span class="switchtothemetitlespan">html comment</span>
                    <input type="range" id="syntaxhtmlcommentcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxhtmlcommentcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxregexcolor" value="#E06C75" onchange="updatesyntaxregexcolor()">
                    <span class="switchtothemetitlespan">regex</span>
                    <input type="range" id="syntaxregexcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxregexcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="switchtothememaincolorspan2" type="color" id="syntaxhtmltagcontentcolor" value="#ffffff" onchange="updatesyntaxhtmltagcontentcolor()">
                    <span class="switchtothemetitlespan">tag name</span>
                    <input type="range" id="syntaxhtmltagcontentcolorAlpha" min="0" max="100" value="100" onchange="updatesyntaxhtmltagcontentcolor()">
                </div>
                <br>
                <div class="themeoption">
                    <input class="customthemecodeinput" type="text" id="customthemecodeinput" onchange="updatecustomtheme(this)" placeholder="enter your theme code...">
                </div>
                </div>
            </div>
        </div>
    </div>
    <div id="custom-overlay" style="display: none;">
        <div id="custom-dialog">
            <span id="close-dialog">&times;</span>
            <p id="custom-message"></p>
            <div id="prompt-input-container" style="display: none;">
                <input type="text" id="custom-input" maxlength="250" placeholder="Enter a value">
                <button id="submit-prompt">Submit</button>
            </div>
            <button id="close-alert">OK</button>
        </div>
    </div>
    <div id="overlay">
        <div class="progress-bar-container" id="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="checkmark" id="checkmark">✓</div>
        <div class="progress-text" id="progress-text">Analyzing</div>
    </div>
    </div>
    </div>


    <script>
        document.addEventListener('click', (event) => {
            if (event.target && !event.target.classList.contains('suggestioncontainer')){
                document.querySelectorAll('.suggestioncontainer').forEach(suggestioncontainerv => {
                    suggestioncontainerv.remove();
                });
            }
        });
        function gobackrotateanimation(deletebtnnnn) {
            const initialsign = deletebtnnnn.textContent;
            deletebtnnnn.style.animation = "none";
            void deletebtnnnn.offsetWidth; // Trigger reflow
            deletebtnnnn.style.animation = "rotatesignleft 0.5s ease-out";
            deletebtnnnn.disabled = true;
            setTimeout(() => {
                deletebtnnnn.disabled = false;
            }, 500);
        }
        let lasteventsparentsection = document.getElementById('section0');
        let pastevents = {};
        let futureevents = {};
        function disablepastbtn() {
            if (lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn') && !lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn').classList.contains('disabled')){
                lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn').classList.add('disabled');
            }
        }

        function enablepastbtn() {
            if (lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn') && lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn').classList.contains('disabled')) {
                lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn').classList.remove('disabled');
            }
        }
        function gobacktolastpastevent() {
            if (!lasteventsparentsection){
                return;
            }
            if (!pastevents[lasteventsparentsection.id]){
                disablepastbtn();
                return;
            }
            const lastevent = pastevents[lasteventsparentsection.id].pop();
            
            if (!lastevent){
                disablepastbtn();
                return;
            }
            if (pastevents[lasteventsparentsection.id].length <= 0){
                disablepastbtn();
            }
            lastevent.reverse();
            
            lastevent.forEach(element => {
                if (element.type == "delete") {
                    const allselectedlines = lasteventsparentsection.querySelectorAll(".hiddenlinesparent");
                    if (allselectedlines.length) { // Überprüfe, ob es ausgewählte Linien gibt
                        allselectedlines.forEach(selectedline => {
                            selectedline.classList.remove('hiddenlinesparent'); // Linie auswählen
                            showHiddenElements(selectedline);
                            updateSelectedClasses();
                        });
                    }
                    if (lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index - 1]) {
                        lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index - 1].insertAdjacentElement("afterend", element.element);
                        addJsSyntaxHighlighting(element.element);
                    } else if (lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index]) {
                        lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index].insertAdjacentElement("beforebegin", element.element);
                        addJsSyntaxHighlighting(element.element);
                    } else {
                        lasteventsparentsection.querySelector('.code-editor-container').appendChild(element.element);
                        addJsSyntaxHighlighting(element.element);
                    }
            
                    if (allselectedlines.length) { // Überprüfe, ob es ausgewählte Linien gibt
                        allselectedlines.forEach(selectedline => {
                            analyzeAndHideElements(selectedline);
                            updateSelectedClasses();
                        });
                    }
                    if (lasteventsparentsection.querySelector('.code-editor-line.selected')) {
                        lasteventsparentsection.querySelectorAll('.eslbtn').forEach(dline => {
                            if (dline.classList.contains('disabled')) {
                                dline.classList.remove('disabled');
                            }
                        });
                    }
                    if (element.element) scrolltolinenumber(getElementIndexInParent(element.element));
                }else if (element.type == "text"){
                    element.element.textContent = element.text;
                    addJsSyntaxHighlighting(element.element);
                    if (element.element) scrolltolinenumber(getElementIndexInParent(element.element));
                }else if (element.type == "create"){
                    if (element.element) scrolltolinenumber(getElementIndexInParent(element.element));
                    if (!lasteventsparentsection.querySelector('.code-editor-line.selected')) {
                        lasteventsparentsection.querySelectorAll('.eslbtn').forEach(dline => {
                            if (!dline.classList.contains('disabled')) {
                                dline.classList.add('disabled');
                            }
                        });
                    }
                    element.element.remove();
                }else if (element.type == "addclass"){
                    if (element.element) scrolltolinenumber(getElementIndexInParent(element.element));
                    element.element.classList.add(element.text);
                }else if (element.type == "removeclass") {
                    if (element.element) scrolltolinenumber(getElementIndexInParent(element.element));
                    element.element.classList.remove(element.text);
                }
            });
        }

        let createkonfetti = true;
        function createConfetti() {
            if (!createkonfetti){
                return;
            }
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement("div");
                confetti.classList.add("confetti");
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.top = `${-100}px`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = `${Math.random() * 2 + 3}s`;
                confetti.style.animationDelay = `${Math.random() * 2}s`;
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                document.body.appendChild(confetti);
            }
            createkonfetti = false;
        }

        function mergecode(htmlCodeComtainer, additionalCode, tofinde) {
            closesidebaronsmallscreensizes();
            closeeverything();
            if (htmlCodeComtainer.parentElement){
                lasteventsparentsection = htmlCodeComtainer.parentElement;
            }else {
                showAlert('Merge Failed');
                return;
            }
            let navBar = document.getElementById('nav-bar');
            let scrolltothissection = navBar.querySelector('.nav-dot[data-index="' + htmlCodeComtainer.parentElement.id.replace('section', '') + '"]');
            if (scrolltothissection) {
                scrolltothissection.scrollIntoView({ behavior: 'smooth' });
                document.querySelector('.overlay-back-btn').click();
            }
            const allselectedlines = htmlCodeComtainer.querySelectorAll(".hiddenlinesparent");
            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('hiddenlinesparent');
                    showHiddenElements(selectedline);
                    updateSelectedClasses();
                });
            }
            let celines = htmlCodeComtainer.querySelectorAll('.code-editor-line');
            relevantlines = [];
            celines.forEach((line, index) => {
                if (line.textContent.includes(tofinde)){
                    relevantlines.push(index);
                }
            });
            let celine = null;
            if (tofinde == "</head>"){
                if (relevantlines == [] || !celines[relevantlines[0] - 1]){
                    showAlert('Merge Failed');
                    return;
                }
    
                celine = celines[relevantlines[0] - 1];
            }else {
                if (relevantlines == [] || !celines[relevantlines[relevantlines.length - 1] - 1]) {
                    showAlert('Merge Failed');
                    return;
                }

                celine = celines[relevantlines[relevantlines.length - 1] - 1];
            }
            if (!celine) {
                showAlert('the merge failed');
                return;
            }
            startLoadingMerge();
            let newpast = [];

            let pastelement = {
                element: celine,
                type: "text",
                text: celine.textContent
            };
            newpast.push(pastelement);

            let spaces = "";
            let extraspacesadded = false;
            let continueSpaces = true;
            for (let i = 0; i < celine.textContent.length; i++) {
                let character = celine.textContent[i];
                if ((character === " " || character === "\u00A0") && continueSpaces) {
                    spaces += "\u00A0";
                } else {
                    continueSpaces = false;
                }
            }
            if (celine.textContent.trim().endsWith('<style>') || celine.textContent.trim().startsWith('<style>')) {
                extraspacesadded = true;
                spaces += "\u00A0\u00A0\u00A0\u00A0";
            }else if (celine.textContent.trim().endsWith('<body>') || celine.textContent.trim().startsWith('<body>')){
                spaces += "\u00A0\u00A0\u00A0\u00A0";
            }

            let pasteText = additionalCode;
    
            let lines = pasteText.split(/\r\n|\n|\r/);

            let firstreferencespacesforspacecoun = convertToNonBreakingSpaces(lines[0]);

            let space2 = "";
            let continueSpace2 = true;
            for (let i = 0; i < firstreferencespacesforspacecoun.length; i++) {
                let character = firstreferencespacesforspacecoun[i];
                if ((character === " " || character === "\u00A0") && continueSpace2) {
                    space2 += "\u00A0";
                } else {
                    continueSpace2 = false;
                }
            }
            const firstLineLeadingSpacesCount = space2.length;
            let lineSpacesCoun2 = 0;
            let continueLineSpac2 = true;

            for (let j = 0; j < lines[0].length; j++) {
                let character = lines[0][j];
                if ((character === " " || character === "\u00A0") && continueLineSpac2) {
                    lineSpacesCoun2++;
                } else {
                    continueLineSpac2 = false;
                }
            }

            let adjustedLin2 = lines[0];
            if (lineSpacesCoun2 >= firstLineLeadingSpacesCount) {
                adjustedLin2 = lines[0].slice(firstLineLeadingSpacesCount);
            }
            celine.textContent += convertToNonBreakingSpaces(adjustedLin2);
            addJsSyntaxHighlighting(celine);
            let longspaces = spaces + "\u00A0\u00A0\u00A0\u00A0";
    
            let startwithscriptorstyle = additionalCode.trim().startsWith('<style>') || additionalCode.trim().startsWith('<script>');
            for (let i = 1; i < lines.length; i++) {
                correntids += 1;
                const newline = document.createElement('div');
                newline.setAttribute('contenteditable', 'true');
                newline.id = correntids;
                newline.classList.add('code-editor-line');
                let lineSpacesCount = 0;
                let continueLineSpaces = true;

                for (let j = 0; j < lines[i].length; j++) {
                    let character = lines[i][j];
                    if ((character === " " || character === "\u00A0") && continueLineSpaces) {
                        lineSpacesCount++;
                    } else {
                        continueLineSpaces = false;
                    }
                }
                let adjustedLine = lines[i];
                if (lineSpacesCount >= firstLineLeadingSpacesCount) {
                    adjustedLine = lines[i].slice(firstLineLeadingSpacesCount);
                }
                if (i != lines.length - 1 && startwithscriptorstyle && i != 1 && !extraspacesadded) {
                    newline.textContent = longspaces + convertToNonBreakingSpaces(adjustedLine);
                } else {
                    newline.textContent = spaces + convertToNonBreakingSpaces(adjustedLine);
                }
                celine.insertAdjacentElement('afterend', newline);
                addJsSyntaxHighlighting(newline);
                let pastelement2 = {
                    element: newline,
                    type: "create",
                    index: getElementIndexInParent(newline)
                };
                newpast.push(pastelement2);
                celine = newline;
                if (i == lines.length - 1 && htmlCodeComtainer.parentElement && htmlCodeComtainer.parentElement.style.display != "none") {
                    celine.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center',
                        inline: 'center'
                    });
                }
                if (allselectedlines.length) {
                    allselectedlines.forEach(selectedline => {
                        analyzeAndHideElements(selectedline);
                        updateSelectedClasses();
                    });
                }
            }
            if (newpast.length > 0) {
                if (!pastevents[lasteventsparentsection.id]) {
                    pastevents[lasteventsparentsection.id] = [];
                }
                pastevents[lasteventsparentsection.id].push(newpast);
                enablepastbtn();
            }
        }

        function modifyHTML(htmlCode, additionalCode, type, htmlCodeComtainer) {
            const bodyRegex = /<body[^>]*>([\s\S]*?)<\/body>/i;
            const headRegex = /<head[^>]*>([\s\S]*?)<\/head>/i;
            const styleTagRegex = /<style[^>]*>([\s\S]*?)<\/style>/i;

            if (type == 'js') {
                if (bodyRegex.test(htmlCode)){
                    mergecode(htmlCodeComtainer, '\n<script>\n' + additionalCode + '\n<\/script>', '</body>');
                }else {
                    showAlert('make sure that you have a body tag in your html code');
                }
            } else if (type == 'css') {
                if (styleTagRegex.test(htmlCode)) {
                    mergecode(htmlCodeComtainer, '\n' + additionalCode, '</style>');
                }else if (headRegex.test(htmlCode)) {
                    mergecode(htmlCodeComtainer, '\n<style>\n' + additionalCode + '\n<\/style>', '</head>');
                }else {
                    showAlert('make sure that you have a head or a style tag in your html code');
                }
            }else {
                showAlert('you can only merge css, javascript and html, with eachother');
            }

            return htmlCode;
        }
        function adjustElementPosition(element) {
            const rect = element.getBoundingClientRect();
            const screenHeight = window.innerHeight;

            const distanceToBottom = rect.bottom - screenHeight;

            if (distanceToBottom > 0) {
                element.style.top = `${rect.top - distanceToBottom}px`;
            }
        }


        function adjustElementPositionleft(element) {
            const rect = element.getBoundingClientRect();
            const screenWidth = window.innerWidth;
    
            const distanceToRight = rect.right - screenWidth;

            if (distanceToRight > 0) {
                element.style.left = `${rect.left - distanceToRight}px`;
            }

            if (rect.left < 0) {
                element.style.left = "0px";
            }
        }


        function createOptionsContainer(targetElement, number) {
            const options = [
                { icon: "⚠", text: "Delete" },
                { icon: "□", text: "Copy Code" },
                { icon: "□", text: "Copy Path" },
                { icon: "-", text: "Merge" },
                { icon: "↓", text: "Download" },
            ];

            const overlay = document.createElement("div");
            overlay.className = "overlay";
            document.body.appendChild(overlay);

            const container = document.createElement("div");
            container.className = "options-container";
            overlay.appendChild(container);

            options.forEach((option) => {
                const optionItem = document.createElement("div");
                optionItem.className = "option-item";

                const icon = document.createElement("button");
                icon.className = "option-icon";
                icon.textContent = option.icon;

                const text = document.createElement("span");
                text.className = "option-text";
                text.textContent = option.text;

                const copyText = (text) => {
                    try {
                        const textarea = document.createElement("textarea");
                        textarea.value = text.trim();
                        document.body.appendChild(textarea);
                        textarea.select();
                        document.execCommand("copy");
                        document.body.removeChild(textarea);
                    } catch (error) {
                        const catchederror = error;
                    }
                };

                const copyCode = (element) => {
                    let text = "";
                    element.querySelectorAll(".code-editor-line").forEach((line) => {
                        text += line.textContent + "\n";
                    });
                    try {
                        const textarea = document.createElement("textarea");
                        textarea.value = text.trim();
                        document.body.appendChild(textarea);
                        textarea.select();
                        document.execCommand("copy");
                        document.body.removeChild(textarea);
                    } catch (error) {
                        const catchederror = error;
                    }
                };

                function getalllinestext(element) {
                    let text = "";
                    element.querySelectorAll(".code-editor-line").forEach((line) => {
                        text += line.textContent + "\n";
                    });
                    return text;
                }
                function MergeFiles() {
                    showPrompt('merge with file:', (filename) => {
                        let allfilenames = document.querySelectorAll('.filedot .filePathInput');
                        let allfilenamesarray = Array.from(allfilenames).map(input => input.value);
                        if (!allfilenamesarray.includes(filename)) {
                            showAlert('you have no html, css or javascript file with the name: ' + filename);
                            return;
                        }
                        allfilenames.forEach(file => {
                            if (file.value == filename) {
                                let mergedcode = "";
                                let htmlfile = "";
                                if (targetElement.classList.contains('edit-btn') && targetElement.parentElement.parentElement.querySelector('.notclickable')) {
                                    if (targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.html') && file.value.trim().endsWith('.css') && !file.value.trim().endsWith('.js')) {
                                        mergedcode = modifyHTML(
                                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                                            'css',
                                            document.querySelector(`#section${number} .code-editor-container`)
                                        );
                                        htmlfile = document.querySelector(`#section${number} .code-editor-container`);
                                    } else if (targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.html') && !file.value.trim().endsWith('.css') && file.value.trim().endsWith('.js')) {
                                        mergedcode = modifyHTML(
                                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                                            'js',
                                            document.querySelector(`#section${number} .code-editor-container`)
                                        );
                                        htmlfile = document.querySelector(`#section${number} .code-editor-container`);
                                    } else if (targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.css') && file.value.trim().endsWith('.html') && !file.value.trim().endsWith('.js')) {
                                        mergedcode = modifyHTML(
                                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                                            'css',
                                            document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)
                                        );
                        
                                        htmlfile = document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`);
                                    } else if (targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.js') && file.value.trim().endsWith('.html') && !file.value.trim().endsWith('.css')) {
                                        mergedcode = modifyHTML(
                                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                                            'js',
                                            document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)
                                        );
                                        htmlfile = document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`);
                                    }else {
                                        showAlert('you can only merge javascript and css with html code');
                                    }
                                } else {
                                    if (targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.html') && file.value.trim().endsWith('.css') && !file.value.trim().includes('.js')) {
                                        mergedcode = modifyHTML(
                                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                                            'css',
                                            document.querySelector(`#section${number} .code-editor-container`)
                                        );
                                        htmlfile = document.querySelector(`#section${number} .code-editor-container`);
                                    } else if (targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.html') && !file.value.trim().endsWith('.css') && file.value.trim().endsWith('.js')) {
                                        mergedcode = modifyHTML(
                                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                                            'js',
                                            document.querySelector(`#section${number} .code-editor-container`)
                                        );
                                        htmlfile = document.querySelector(`#section${number} .code-editor-container`);
                                    } else if (targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.css') && file.value.trim().endsWith('.html') && !file.value.trim().endsWith('.js')) {
                                        mergedcode = modifyHTML(
                                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                                            'css',
                                            document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)
                                        );
                                        htmlfile = document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`);
                                    } else if (targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.js') && file.value.trim().endsWith('.html') && !file.value.trim().endsWith('.css')) {
                                        mergedcode = modifyHTML(
                                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                                            'js',
                                            document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)
                                        );
                                        htmlfile = document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`);
                                    }else {
                                    showAlert('you can only merge javascript and css with html code');
                                    }
                                }
                            }
                        });
                    });
                }

                if (option.text == "Delete") {
                    optionItem.onclick = () => {
                        overlay.remove();
                        deletethisfile(number);
                    };
                } else if (option.text == "Download" && targetElement.parentElement) {
                    optionItem.onclick = () => {
                        overlay.remove();
                        if (targetElement.classList.contains('edit-btn') && targetElement.parentElement.parentElement.querySelector('.notclickable')) {
                            downloadFile(targetElement.parentElement.parentElement.querySelector('.notclickable').textContent);
                        } else {
                            downloadFile(targetElement.parentElement.textContent.replace("⋮", ""));
                        }
                    };
                } else if (option.text == "Copy Path" && targetElement.parentElement) {
                    optionItem.onclick = () => {
                        overlay.remove();
                        if (targetElement.classList.contains('edit-btn') && targetElement.parentElement.parentElement.querySelector('.notclickable')){
                            copyText(targetElement.parentElement.parentElement.querySelector('.notclickable').textContent);
                        }else {
                            copyText(targetElement.parentElement.textContent.replace("⋮", ""));
                        }
                    };
                } else if (
                    option.text == "Copy Code" &&
                    document.querySelector(`#section${number} .code-editor-container`)
                ) {
                    const textToCopy = document.querySelector(`#section${number} .code-editor-container`);
                    optionItem.onclick = () => {
                        overlay.remove();
                        copyCode(textToCopy);
                    };
                }else if (option.text == 'Merge' && targetElement.parentElement && document.querySelector(`#section${number} .code-editor-container`)){
                    optionItem.onclick = () => {
                        overlay.remove();
                        MergeFiles();
                    };
                }

                if (number == "0" && option.text == "Delete") {
                    return;
                }
    
                if (targetElement.classList.contains('edit-btn') && targetElement.parentElement.parentElement.querySelector('.notclickable')) {
                    if (option.text == "Merge" && !targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.html') && !targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.css') && !targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.js')){
                        return;
                    }
                } else {
                    if (option.text == "Merge" && !targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.html') && !targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.js') && !targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.css')){
                        return;
                    }
                }

                optionItem.appendChild(icon);
                optionItem.appendChild(text);
                container.appendChild(optionItem);
            });

            const targetRect = targetElement.getBoundingClientRect();
            setTimeout(() => {
                container.style.position = "absolute";
                container.style.top = `${targetRect.bottom + 5}px`;
                adjustElementPosition(container);
                container.style.left = `${
                    targetRect.left + targetRect.width / 2 - container.offsetWidth / 2
                }px`;
                adjustElementPositionleft(container);
            }, 0);

            overlay.addEventListener("click", (event) => {
                if (event.target === overlay) {
                    overlay.remove();
                }
            });
        }



        function typeEffect(element, newText, callback) {
            const originalText = element.textContent || "";

            let index = originalText.length;

            function removeText() {
                if (index > 0) {
                    element.textContent = originalText.slice(0, --index);
                    setTimeout(removeText, 100);
                } else {
                    buildText();
                }
            }

            let buildIndex = 0;
    
            function buildText() {
                if (buildIndex < newText.length) {
                    element.textContent += newText.charAt(buildIndex++);
                    setTimeout(buildText, 100);
                } else if (callback) {
                    callback();
                }
            }
            removeText();
        }
    
        let themetoedit = document.querySelector(`.custom-theme`);
        function removeThemeProperties() {
            if (!themetoedit) {
                return;
            }

            themetoedit.style.removeProperty('--selected-color');
            themetoedit.style.removeProperty('--rectangleborder');
            themetoedit.style.removeProperty('--checkmark-color');
            themetoedit.style.removeProperty('--switchcheckedbackground-color');
            themetoedit.style.removeProperty('--loadingbarloadedbackground-color');
            themetoedit.style.removeProperty('--rectanglecolorcolor-color');
            themetoedit.style.removeProperty('--codeeditoreditbtn-color');
            themetoedit.style.removeProperty('--lightdarkgrey-color');
            themetoedit.style.removeProperty('--lightgrey-color');
            themetoedit.style.removeProperty('--background-color');
            themetoedit.style.removeProperty('--white-color');
            themetoedit.style.removeProperty('--commandlistbackground-color');
            themetoedit.style.removeProperty('--codeeditoreditbtnbackground-color');
            themetoedit.style.removeProperty('--contentcontainer-color');
            themetoedit.style.removeProperty('--deviceborder-color');
            themetoedit.style.removeProperty('--browserheaderborderbottom-color');
            themetoedit.style.removeProperty('--urlbarbackground-color');
            themetoedit.style.removeProperty('--urlbarcolor-color');
            themetoedit.style.removeProperty('--black-color');
            themetoedit.style.removeProperty('--spencialbtnbackground-color');
            themetoedit.style.removeProperty('--browsercontainerbackground-color');
            themetoedit.style.removeProperty('--browseriframebackgroundcolor-color');
            themetoedit.style.removeProperty('--browsercontainerbackground-color');
            themetoedit.style.removeProperty('--seccontainerbackground-color');
            themetoedit.style.removeProperty('--syntaxblock-color');
            themetoedit.style.removeProperty('--syntaxoperator-color');
            themetoedit.style.removeProperty('--syntaxbracket-color');
            themetoedit.style.removeProperty('--syntaxsign-color');
            themetoedit.style.removeProperty('--syntaxstring-color');
            themetoedit.style.removeProperty('--syntaxnumber-color');
            themetoedit.style.removeProperty('--syntaxcomment-color');
            themetoedit.style.removeProperty('--syntaxvariable-color');
            themetoedit.style.removeProperty('--syntaxcommand-color');
            themetoedit.style.removeProperty('--syntaxkeyword-color');
            themetoedit.style.removeProperty('--syntaxhtmlcomment-color');
            themetoedit.style.removeProperty('--syntaxregex-color');
            themetoedit.style.removeProperty('--filepathinput-color');
            themetoedit.style.removeProperty('--syntaxhtmltagcontent-color');
            themetoedit.style.removeProperty('--griddot-color');
            themetoedit.style.removeProperty('--drakgrey-color');
        }

        function updateaccentColor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit){
                return;
            }
            const selectedColor = document.getElementById('accentColor').value;
            const alpha = document.getElementById('accentAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--drakgrey-color', rgba);
            themetoedit.style.setProperty('--lightgrey-color', rgba);
            themetoedit.style.setProperty('--urlbarbackground-color', rgba);
            themetoedit.style.setProperty('--spencialbtnbackground-color', rgba);
            themetoedit.style.setProperty('--seccontainerbackground-color', rgba);
            generateCustomThemeCode();
        }

        function isColorLightOrDark(rgba) {
            const match = rgba.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);
            if (!match) {
                throw new Error("Ungültiger RGBA-Wert");
            }

            const r = parseInt(match[1], 10);
            const g = parseInt(match[2], 10);
            const b = parseInt(match[3], 10);

            const brightness = 0.2126 * r + 0.7152 * g + 0.0722 * b;
    
            return brightness > 128 ? "light" : "dark";
        }
        function updateColorColor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('colorColor').value;
            const alpha = document.getElementById('colorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--urlbarcolor-color', rgba);
            themetoedit.style.setProperty('--black-color', rgba);
            generateCustomThemeCode();
        }
        function updateSelectedColor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('selectedColor').value;
            const alpha = document.getElementById('selectedAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--selected-color', rgba);
            themetoedit.style.setProperty('--checkmark-color', rgba);
            generateCustomThemeCode();
        }
        function updategridColorColor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('gridColor').value;
            const alpha = document.getElementById('gridColorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--griddot-color', rgba);
            generateCustomThemeCode();
        }
        function updatesyntaxhtmltagcontentcolor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxhtmltagcontentcolor').value;
            const alpha = document.getElementById('syntaxhtmltagcontentcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxhtmltagcontent-color', rgba);
            generateCustomThemeCode();
        }
        function updateBackgroundColor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('backgroundColor').value;
            const alpha = document.getElementById('backgroundAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--background-color', rgba);
            themetoedit.style.setProperty('--white-color', rgba);
            themetoedit.style.setProperty('--commandlistbackground-color', rgba);
            themetoedit.style.setProperty('--codeeditoreditbtnbackground-color', rgba);
            themetoedit.style.setProperty('--contentcontainer-color', rgba);
            if (isColorLightOrDark(rgba) == "light"){
                themetoedit.style.setProperty('--browsercontainerbackground-color', '#fff');
                themetoedit.style.setProperty('--browseriframebackgroundcolor-color', '#fff');
                themetoedit.style.setProperty('--browsercontainerbackground-color', '#f7f7f7');
            }else {
                themetoedit.style.setProperty('--browsercontainerbackground-color', '#000');
                themetoedit.style.setProperty('--browseriframebackgroundcolor-color', '#000');
                themetoedit.style.setProperty('--browsercontainerbackground-color', '#0E0F0E');
            }
            generateCustomThemeCode();
        }

        function updateRectangleBorderColor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const rectangleBorderColor = document.getElementById('rectangleBorderColor').value;
            const alpha = document.getElementById('rectangleBorderAlpha').value / 100;
            const rgba = hexToRgba(rectangleBorderColor, alpha);
            themetoedit.style.setProperty('--rectangleborder', rgba);
            themetoedit.style.setProperty('--deviceborder-color', rgba);
            themetoedit.style.setProperty('--browserheaderborderbottom-color', rgba);
            generateCustomThemeCode();
        }

        function updateSwitchCheckedBackgroundColor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const switchCheckedBackgroundColor = document.getElementById('switchCheckedBackgroundColor').value;
            const alpha = document.getElementById('switchCheckedAlpha').value / 100;
            const rgba = hexToRgba(switchCheckedBackgroundColor, alpha);
            themetoedit.style.setProperty('--switchcheckedbackground-color', rgba);
            generateCustomThemeCode();
        }

        function updateLoadingBarLoadedBackgroundColor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const loadingBarLoadedBackgroundColor = document.getElementById('loadingBarLoadedBackgroundColor').value;
            const alpha = document.getElementById('loadingBarLoadedAlpha').value / 100;
            const rgba = hexToRgba(loadingBarLoadedBackgroundColor, alpha);
            themetoedit.style.setProperty('--loadingbarloadedbackground-color', rgba);
            generateCustomThemeCode();
        }

        function updateRectangleColorColor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const rectangleColorColor = document.getElementById('rectangleColorColor').value;
            const alpha = document.getElementById('rectangleColorAlpha').value / 100;
            const rgba = hexToRgba(rectangleColorColor, alpha);
            themetoedit.style.setProperty('--rectanglecolorcolor-color', rgba);
            themetoedit.style.setProperty('--filepathinput-color', rgba);
            generateCustomThemeCode();
        }

        function updatecodeeditoreditbtncolor() {
            themetoedit = document.querySelector(`.custom-theme`);
            if (!themetoedit) {
                return;
            }
            const codeeditoreditbtncolor = document.getElementById('codeeditoreditbtncolor').value;
            const alpha = document.getElementById('codeeditoreditbtncolorAlpha').value / 100;
            const rgba = hexToRgba(codeeditoreditbtncolor, alpha);
            themetoedit.style.setProperty('--codeeditoreditbtn-color', rgba);
            generateCustomThemeCode();
        }

        function updatecustomtheme(codeInputField) {
            const themeCode = codeInputField.value.trim();
            const everyValue = themeCode.split('.');
            const everyColorInput = document.querySelectorAll('.switchtothememaincolorspan2');
            const everyRangeInput = document.querySelectorAll('.themeoption input[type="range"]');

            everyValue.forEach((value, index) => {
                const [valueHex, valueRange] = value.split(',');

                if (isValidHex(valueHex) && isValidNumber(valueRange)) {
                    if (everyColorInput[index]) {
                        everyColorInput[index].value = valueHex.trim();
                    }
                    if (everyRangeInput[index]) {
                        everyRangeInput[index].value = parseFloat(valueRange.trim());
                    }
                    updateSelectedColor();
                    updateColorColor();
                    updateBackgroundColor();
                    updateRectangleBorderColor();
                    updateSwitchCheckedBackgroundColor();
                    updateLoadingBarLoadedBackgroundColor();
                    updateRectangleColorColor();
                    updatecodeeditoreditbtncolor();
                    updatesyntaxblockcolor();
                    updatesyntaxoperatorcolor();
                    updatesyntaxbracketcolor();
                    updatesyntaxsigncolor();
                    updatesyntaxstringcolor();
                    updatesyntaxnumbercolor();
                    updatesyntaxcommentcolor();
                    updatesyntaxvariablecolor();
                    updatesyntaxcommandcolor();
                    updatesyntaxkeywordcolor();
                    updatesyntaxhtmlcommentcolor();
                    updatesyntaxregexcolor();
                    updatesyntaxhtmltagcontentcolor();
                    updategridColorColor();
                    updateaccentColor();
                }
            });
        }
        function updatesyntaxblockcolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxblockcolor').value;
            const alpha = document.getElementById('syntaxblockcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxblock-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxoperatorcolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxoperatorcolor').value;
            const alpha = document.getElementById('syntaxoperatorcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxoperator-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxbracketcolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxbracketcolor').value;
            const alpha = document.getElementById('syntaxbracketcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxbracket-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxsigncolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxsigncolor').value;
            const alpha = document.getElementById('syntaxsigncolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxsign-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxstringcolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxstringcolor').value;
            const alpha = document.getElementById('syntaxstringcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxstring-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxnumbercolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxnumbercolor').value;
            const alpha = document.getElementById('syntaxnumbercolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxnumber-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxcommentcolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxcommentcolor').value;
            const alpha = document.getElementById('syntaxcommentcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxcomment-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxvariablecolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxvariablecolor').value;
            const alpha = document.getElementById('syntaxvariablecolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxvariable-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxcommandcolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxcommandcolor').value;
            const alpha = document.getElementById('syntaxcommandcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxcommand-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxkeywordcolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxkeywordcolor').value;
            const alpha = document.getElementById('syntaxkeywordcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxkeyword-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxhtmlcommentcolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxhtmlcommentcolor').value;
            const alpha = document.getElementById('syntaxhtmlcommentcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxhtmlcomment-color', rgba);
            generateCustomThemeCode();
        }

        function updatesyntaxregexcolor() {
            themetoedit = document.querySelector('.custom-theme');
            if (!themetoedit) {
                return;
            }
            const selectedColor = document.getElementById('syntaxregexcolor').value;
            const alpha = document.getElementById('syntaxregexcolorAlpha').value / 100;
            const rgba = hexToRgba(selectedColor, alpha);
            themetoedit.style.setProperty('--syntaxregex-color', rgba);
            generateCustomThemeCode();
        }


        function generateCustomThemeCode() {
            const everyColorInput = document.querySelectorAll('.switchtothememaincolorspan2');
            const everyRangeInput = document.querySelectorAll('.themeoption input[type="range"]');
    
            let themeCode = [];

            everyColorInput.forEach((colorInput, index) => {
                const colorValue = colorInput.value.trim();
                const rangeValue = everyRangeInput[index]?.value.trim();

                if (isValidHex(colorValue) && isValidNumber(rangeValue)) {
                    themeCode.push(`${colorValue},${rangeValue}`);
                }
            });

            const codeInput = document.querySelector('.customthemecodeinput');
            if (codeInput) {
                codeInput.value = themeCode.join('.');
            }
        }

        function isValidNumber(value) {
            const number = parseFloat(value.trim());
            return !isNaN(number) && number >= 0 && number <= 100;
        }

        function isValidHex(hex) {
            const hexPattern = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/;
            return hexPattern.test(hex.trim());
        }

        function hexToRgba(hex, alpha) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);

            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }




        function switchtotheme(theme) {
            if (theme != "custom-theme"){
                removeThemeProperties();
            }
            if (theme == "custom-theme"){
                updateSelectedColor();
                updateColorColor();
                updateBackgroundColor();
                updateRectangleBorderColor();
                updateSwitchCheckedBackgroundColor();
                updateLoadingBarLoadedBackgroundColor();
                updateRectangleColorColor();
                updatecodeeditoreditbtncolor();
                updatesyntaxblockcolor();
                updatesyntaxoperatorcolor();
                updatesyntaxbracketcolor();
                updatesyntaxsigncolor();
                updatesyntaxstringcolor();
                updatesyntaxnumbercolor();
                updatesyntaxcommentcolor();
                updatesyntaxvariablecolor();
                updatesyntaxcommandcolor();
                updatesyntaxkeywordcolor();
                updatesyntaxhtmlcommentcolor();
                updatesyntaxregexcolor();
                updatesyntaxhtmltagcontentcolor();
                updategridColorColor();
                updateaccentColor();
            }
            document.body.classList.remove('helloween-theme', "winter-theme", "spring-theme", "summer-theme", "autumn-theme", "vintage-theme", "futuristic-theme", "nature-theme", "mystic-theme", "candy-theme", "space-theme", "custom-theme");
            document.body.className = "";
            document.body.classList.add(theme);
            themetoedit = document.querySelector(`.${theme}`);
        }
        function removeallthemes() {
            removeThemeProperties();
            document.body.classList.remove('helloween-theme', "winter-theme", "spring-theme", "summer-theme", "autumn-theme", "vintage-theme", "futuristic-theme", "nature-theme", "mystic-theme", "candy-theme", "space-theme", "custom-theme");
            document.body.className = "";
        }
        function showallfilescontainer() {
            if (document.querySelector('.overlay-container').style.display != "flex") {
                document.querySelector('.overlay-container').style.display = "flex";
                document.querySelector('.overlay-container').style.animation = "none";
                void document.querySelector('.overlay-container').offsetWidth;
                document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
            }
            closesidebaronsmallscreensizes();
        }
    
        function closesidebaronsmallscreensizes() {
            if (document.querySelector('.divcodeeditor-container').classList.contains('smallsidebarenabled')){
                document.querySelector('.divcodeeditor-container').classList.remove('smallsidebarenabled');
            }
        }
        function closeeverything() {
            hidecommandoverlay();
            hidesignexplenationoverlay();
            closeviewthisfile();
            hidethemeoverlay();
            document.querySelector('.overlay-close-btn').click();
            closesidebaronsmallscreensizes();
        }
        function scrollviewintoview() {
            const view = document.getElementById('view-nav-dot');
            view.scrollIntoView({ behavior: 'smooth' });
            document.querySelector('.nav-bar').style.overflow = "scroll";
            document.querySelector('.nav-bar').style.overflowY = "hidden";
            closeeverything();
        }
        function viewbottominputoninput(viewelementinputelement){
            document.getElementById('scrollviewintoviewbtn').textContent = viewelementinputelement.value;
        }
        function togglesidebarbuttonfunction() {
            const mediaQuery = window.matchMedia('(max-width: 700px)');
            if (mediaQuery.matches) {
                if (document.querySelector('.divcodeeditor-container').classList.contains('sidebarenabled')){
                    document.querySelector('.divcodeeditor-container').classList.remove('sidebarenabled');
                }
                document.querySelector('.divcodeeditor-container').classList.toggle('smallsidebarenabled');
            } else {
                if (document.querySelector('.divcodeeditor-container').classList.contains('smallsidebarenabled')){
                    document.querySelector('.divcodeeditor-container').classList.remove('smallsidebarenabled');
                }
                document.querySelector('.divcodeeditor-container').classList.toggle('sidebarenabled');
            }
        }
        const mediaQuery = window.matchMedia('(max-width: 700px)');

        if (mediaQuery.matches){
            if (document.querySelector('.divcodeeditor-container').classList.contains('sidebarenabled')){
                document.querySelector('.divcodeeditor-container').classList.remove('sidebarenabled');
            }
        }
        window.addEventListener('resize', function() {
            if (window.innerWidth <= 700) {
                if (document.querySelector('.divcodeeditor-container').classList.contains('sidebarenabled')){
                    document.querySelector('.divcodeeditor-container').classList.remove('sidebarenabled');
                }
            }else if (window.innerWidth > 700) {
                if (document.querySelector('.divcodeeditor-container').classList.contains('smallsidebarenabled')){
                    document.querySelector('.divcodeeditor-container').classList.remove('smallsidebarenabled');
                }
            }
        });


        function showcommandoverlay() {
            document.querySelector('.commandsoverlay-container').style.display = "flex";
            document.querySelector('.commandsoverlay-container').style.animation = "none";
            void document.querySelector('.commandsoverlay-container').offsetWidth;
            document.querySelector('.commandsoverlay-container').style.animation = "swipein 0.5s ease-out";
        }
        function hidecommandoverlay() {
            document.querySelector('.commandsoverlay-container').style.animation = "none";
            void document.querySelector('.commandsoverlay-container').offsetWidth;
            document.querySelector('.commandsoverlay-container').style.animation = "swipeout 0.5s ease-out";
            setTimeout(() => {
                document.querySelector('.commandsoverlay-container').style.display = "none";
            }, 500);
        }
        function showsignexplenationoverlay() {
            document.querySelector('.singsoverlay-container').style.display = "flex";
            document.querySelector('.singsoverlay-container').style.animation = "none";
            void document.querySelector('.singsoverlay-container').offsetWidth;
            document.querySelector('.singsoverlay-container').style.animation = "swipein 0.5s ease-out";
        }
        function hidesignexplenationoverlay() {
            document.querySelector('.singsoverlay-container').style.animation = "none";
            void document.querySelector('.singsoverlay-container').offsetWidth;
            document.querySelector('.singsoverlay-container').style.animation = "swipeout 0.5s ease-out";
            setTimeout(() => {
                document.querySelector('.singsoverlay-container').style.display = "none";
            }, 500);
        }
        function showthemeoverlay() {
            if (document.querySelector('.theme-overlay').style.display == "flex"){
                return;
            }
            document.querySelector('.theme-overlay').style.display = "flex";
            document.querySelector('.theme-overlay').style.animation = "none";
            void document.querySelector('.theme-overlay').offsetWidth;
            document.querySelector('.theme-overlay').style.animation = "swipein 0.5s ease-out";
        }
        function hidethemeoverlay() {
            document.querySelector('.theme-overlay').style.animation = "none";
            void document.querySelector('.theme-overlay').offsetWidth;
            document.querySelector('.theme-overlay').style.animation = "swipeout 0.5s ease-out";
            setTimeout(() => {
                document.querySelector('.theme-overlay').style.display = "none";
            }, 500);
        }
        const overlay = document.getElementById('custom-overlay');
        const messageBox = document.getElementById('custom-message');
        const closeAlertButton = document.getElementById('close-alert');
        const promptInputContainer = document.getElementById('prompt-input-container');
        const promptInput = document.getElementById('custom-input');
        const submitPromptButton = document.getElementById('submit-prompt');
        const closeDialog = document.getElementById('close-dialog');

        function showAlert(message) {
            setTimeout(() => {
                messageBox.textContent = message;
                promptInputContainer.style.display = 'none';
                closeAlertButton.style.display = 'block';
                overlay.style.display = 'flex';
            }, 100);
        }

        function showPrompt(message, callback) {
            messageBox.textContent = message;
            promptInputContainer.style.display = 'block';
            closeAlertButton.style.display = 'none';
            overlay.style.display = 'flex';

            submitPromptButton.onclick = () => {
                const inputValue = promptInput.value;
                callback(inputValue);
                closeCustomDialog();
            };
        }

        function closeCustomDialog() {
            overlay.style.display = 'none';
            promptInput.value = '';
        }

        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) {
                closeCustomDialog();
            }
        });

        closeAlertButton.addEventListener('click', closeCustomDialog);
        closeDialog.addEventListener('click', closeCustomDialog);



        let isloadingfiles = false;
        let isloadingimages = false;
        function startLoading() {
            const overlay = document.getElementById('overlay');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const checkmark = document.getElementById('checkmark');
            const progressContainer = document.getElementById('progress-container');
            overlay.classList.add('active');
            progressBar.style.width = '0%';
            progressContainer.style.display = 'block';
            checkmark.classList.remove('visible');
            progressText.textContent = 'Analyzing';

            const steps = [
              { percent: 0, text: 'Reserving' },
              { percent: 25, text: 'Creating environment' },
              { percent: 50, text: 'Linking' },
              { percent: 75, text: 'Formatting' },
              { percent: 100, text: 'Loading complete' },
            ];

            let stepIndex = 0;

            function updateStep() {
                if (stepIndex < steps.length) {
                    const step = steps[stepIndex];
                    progressBar.style.width = `${step.percent}%`;
                    progressText.textContent = step.text;

                    if (step.percent === 100) {
                        progressContainer.style.display = 'none';
                        checkmark.classList.add('visible');
                    }

                    stepIndex++;
                    setTimeout(updateStep, 1000);
                } else {
                    setTimeout(() => {
                        overlay.classList.remove('active');
                    }, 500);
                }
            }

            updateStep();
        }
        function startLoadingMerge() {
            const overlay = document.getElementById('overlay');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const checkmark = document.getElementById('checkmark');
            const progressContainer = document.getElementById('progress-container');

            overlay.classList.add('active');
            progressBar.style.width = '0%';
            progressContainer.style.display = 'block';
            checkmark.classList.remove('visible');
            progressText.textContent = 'Reserving';

            const steps = [
                { percent: 0, text: 'Processing' },
                { percent: 50, text: 'Adding' },
                { percent: 100, text: 'Merge complete' },
            ];

            let stepIndex = 0;

            function updateStep() {
                if (stepIndex < steps.length) {
                    const step = steps[stepIndex];
                    progressBar.style.width = `${step.percent}%`;
                    progressText.textContent = step.text;

                    if (step.percent === 100) {
                        progressContainer.style.display = 'none';
                        checkmark.classList.add('visible');
                    }

                    stepIndex++;
                    setTimeout(updateStep, 1000);
                } else {
                    setTimeout(() => {
                        overlay.classList.remove('active');
                    }, 500);
                }
            }
            updateStep();
        }
        function startLoadingImages() {
            const overlay = document.getElementById('overlay');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const checkmark = document.getElementById('checkmark');
            const progressContainer = document.getElementById('progress-container');
            overlay.classList.add('active');
            progressBar.style.width = '0%';
            progressContainer.style.display = 'block';
            checkmark.classList.remove('visible');
            progressText.textContent = 'Reserving';

            const steps = [
                { percent: 0, text: 'Processing' },
                { percent: 50, text: 'Adding' },
                { percent: 100, text: 'Loading complete' },
            ];

            let stepIndex = 0;

            function updateStep() {
                if (stepIndex < steps.length) {
                    const step = steps[stepIndex];
                    progressBar.style.width = `${step.percent}%`;
                    progressText.textContent = step.text;

                    if (step.percent === 100) {
                        progressContainer.style.display = 'none';
                        checkmark.classList.add('visible');
                    }

                    stepIndex++;
                    setTimeout(updateStep, 1000);
                } else {
                    setTimeout(() => {
                        overlay.classList.remove('active');
                    }, 500);
                }
            }
            updateStep();
        }
        function startLoadingImagesAndFiles() {
            const overlay = document.getElementById('overlay');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const checkmark = document.getElementById('checkmark');
            const progressContainer = document.getElementById('progress-container');

            overlay.classList.add('active');
            progressBar.style.width = '0%';
            progressContainer.style.display = 'block';
            checkmark.classList.remove('visible');
            progressText.textContent = 'Analyzing files';

            const steps = [
                { percent: 0, text: 'Reserving' },
                { percent: 25, text: 'Creating environment' },
                { percent: 50, text: 'Linking' },
                { percent: 75, text: 'Formatting' },
                { percent: 100, text: 'Loading complete' },
            ];

            let stepIndex = 0;

            function updateStep() {
                if (stepIndex < steps.length) {
                    const step = steps[stepIndex];
                    progressBar.style.width = `${step.percent}%`;
                    progressText.textContent = step.text;

                    if (step.percent === 100) {
                        progressContainer.style.display = 'none';
                        checkmark.classList.add('visible');
                    }

                    stepIndex++;
                    setTimeout(updateStep, 1000);
                } else {
                    setTimeout(() => {
                        overlay.classList.remove('active');
                    }, 500);
                }
            }
            updateStep();
        }
        function hidecodesearchresults() {
            setTimeout(() => {
                const codesearchresults = document.querySelector('.codesearchresults');
                codesearchresults.style.display = "none";
            }, 500);
        }
        document.getElementById('fileInput').addEventListener('change', function(event) {
            const files = event.target.files;
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const filePath = file.name;
                if (file.type.startsWith('image/')) {
                    isloadingimages = true;
                    addNewImage(filePath, URL.createObjectURL(file), file);
                } else if (file.type === 'text/plain' || file.type === 'text/css' || file.type === 'application/javascript' || file.type === 'text/html') {
                    let allfilenames = Array.from(document.querySelectorAll('.filedot .filePathInput')).map(input => input.value);
                    if (!allfilenames.includes(filePath)) {
                        isloadingfiles = true;
                        addNewFile(filePath, file);
                    }
                }
            }
            if (isloadingfiles == true && isloadingimages == false) {
                isloadingfiles = false;
                isloadingimages = false;
                startLoading();
            }else if (isloadingfiles == false && isloadingimages == true) {
                isloadingfiles = false;
                isloadingimages = false;
                startLoadingImages();
            }else if (isloadingfiles == true && isloadingimages == true) {
                isloadingfiles = false;
                isloadingimages = false;
                startLoadingImagesAndFiles();
            }
        });

        function clickthiselement(elementidorclass){
            document.querySelector(elementidorclass).click();
        }

        const imagerectangle = document.getElementById('image-rectangle');
        imagerectangle.querySelector('.download-btn').addEventListener('click', () => {
        const a = document.createElement('a');
            a.href = imagerectangle.textContent;
            a.download = imagerectangle.textContent;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });

        function addNewImage(imagePath, imageUrl, file) {
            const fileName = imagePath.split('/').pop();

            const contentContainer = document.querySelector('.content-container');

            function getImageInfo(filePath) {

                const fileName = filePath.split('/').pop();

                const [name, format] = fileName.split(/\.(?=[^\.]+$)/);

                return {
                    name: name,
                    format: format
                };
            }
            const newRectangle = document.createElement('div');
            newRectangle.classList.add('rectangle');
            let newfilenameinfo = getImageInfo(fileName);
            newRectangle.setAttribute('data-name', newfilenameinfo.name);
            newRectangle.setAttribute('data-type', newfilenameinfo.format);
            newRectangle.style.backgroundImage = `url('${imageUrl}')`;
            newRectangle.style.backgroundSize = 'cover';
            newRectangle.style.backgroundPosition = 'center';

            newRectangle.innerHTML = `<span class="image-name">${fileName}</span>
<div class="rectangle-buttons"><button class="download-btn">Download</button><button class="delete-btn" onclick="deleteImage(this)">Delete</button></div>
<button class="close">×</button>`;

            contentContainer.appendChild(newRectangle);

            newRectangle.querySelector('.download-btn').addEventListener('click', () => {
                downloadImage(file);
            });

            let timer;

            newRectangle.querySelector('.close').addEventListener('click', () => {
                newRectangle.classList.remove('enlarged');
            });
            newRectangle.addEventListener('mousedown', startEnlarge);
            newRectangle.addEventListener('touchstart', startEnlarge);

            newRectangle.addEventListener('mouseup', stopEnlarge);
            newRectangle.addEventListener('mouseleave', stopEnlarge);
            newRectangle.addEventListener('touchend', stopEnlarge);

            function startEnlarge(event) {
                timer = setTimeout(() => {
                    newRectangle.classList.add('enlarged');
                }, 700);
            }

            function stopEnlarge() {
                clearTimeout(timer);
            }
        }

        function deleteImage(element) {
            const rectangle = element.closest('.rectangle');
            rectangle.remove();
        }

        function downloadImage(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                const fileUrl = e.target.result;
                const a = document.createElement('a');
                a.href = fileUrl;
                a.download = file.name;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };
            reader.readAsDataURL(file);
        }

        function requestcreatenewfile() {
            showPrompt('file path:', (filename) => {
                let allfilenames = Array.from(document.querySelectorAll('.filedot .filePathInput')).map(input => input.value);
                if (!allfilenames.includes(filename) && filename != '' && filename.length < 251){
                    createNewFile(filename);
                }
            });
        }
        function requestcreatenewfilefortemplatecode(codetext) {
            showPrompt('file path:', (filename) => {
                let allfilenames = Array.from(document.querySelectorAll('.filedot .filePathInput')).map(input => input.value);
                if (!allfilenames.includes(filename) && filename.length < 251) {
                    createNewFilefortemplatecode(filename, codetext);
                }
            });
        }
        async function addNewFile(filename, file) {
            let allfilenames = Array.from(document.querySelectorAll('.filedot .filePathInput')).map(input => input.value);
            if (allfilenames.includes(filename)){
                return;
            }
            const container = document.getElementById('container');
            const navBar = document.getElementById('nav-bar');

            const newSection = document.createElement('div');
            newSection.classList.add('section');
            newSection.id = `section${container.children.length}`;
            newSection.innerHTML = `<div class="editor-selected-line-btns"><button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onfocus="searchcode(this)" placeholder="⌕ search"></div></div>
        <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
            <div id="1" class="code-editor-line" contenteditable="true"></div>
        </div>
        <div class="code-editor-btns"><button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number"></div>`;
            container.appendChild(newSection);

            lineoptioncontainerupdate(newSection.querySelector('.code-editor-container'));

            const reader = new FileReader();
            let body = document.querySelector('body');
            reader.onload = (e) => {
                const lines = e.target.result.split('\n');
                const editorContainer = newSection.querySelector('.code-editor-container');
                lines.forEach((lineText) => {
                    const line = document.createElement('div');
                    line.classList.add('code-editor-line');
                    line.setAttribute('contenteditable', 'true');
                    line.textContent = lineText;
                    addJsSyntaxHighlighting(line);
                    editorContainer.appendChild(line);
                });
            };
            reader.readAsText(file);

            const newNavDot = document.createElement('div');
            newNavDot.classList.add('nav-dot', 'filedot');

            newNavDot.setAttribute('data-index', container.children.length - 1);
            newNavDot.innerHTML = `
      <input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="${filename}">
    `;
            newNavDot.setAttribute('onclick', 'dotonclick()');
            navBar.appendChild(newNavDot);

            let filePathInputblablabla = newNavDot.querySelector('.filePathInput');
            let timeout;

            filePathInputblablabla.addEventListener('input', (event) => {
                handleFileNameInputChange(event.target.parentElement);
            });



            filePathInputblablabla.addEventListener('mousedown', startOverlayEnlarge);
            filePathInputblablabla.addEventListener('touchstart', startOverlayEnlarge);

            filePathInputblablabla.addEventListener('mouseup', stopOverlayEnlarge);
            filePathInputblablabla.addEventListener('mouseleave', stopOverlayEnlarge);
            filePathInputblablabla.addEventListener('touchend', stopOverlayEnlarge);

            function startOverlayEnlarge(event) {
                timeout = setTimeout(() => {
                    document.querySelector('.overlay-container').style.display = "flex";
                    document.querySelector('.overlay-container').style.animation = "none";
                    void document.querySelector('.overlay-container').offsetWidth; // Trigger reflow
                    document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
                }, 700);
            }

            function stopOverlayEnlarge() {
                clearTimeout(timeout);
            }

            const dataList = document.getElementById('filenameoptions');
            const option = document.createElement('option');
            option.value = filename;
            option.id = `option${newNavDot.getAttribute('data-index')}`;
            dataList.appendChild(option);

            const overlayContainer = document.querySelector('.overlay-container .content-container');
            const newRectangle = document.createElement('div');
            newRectangle.classList.add('rectangle');
            newRectangle.innerHTML = `<span class="notclickable">${filename}</span>
<div class="rectangle-buttons">
    <button class="edit-btn">…</button>
</div>
<button class="close">×</button>`;
            newRectangle.setAttribute('onclick', `editthisfile(${container.children.length - 1}, event)`);
            overlayContainer.appendChild(newRectangle);

            if (newRectangle.querySelector('.download-btn')){
                newRectangle.querySelector('.download-btn').onclick = () => {
                    downloadFile(filename);
                }
            }

            newRectangle.querySelector('.close').addEventListener('click', () => {
                newRectangle.classList.remove('enlarged');
            });

            let timer;
            newRectangle.addEventListener('mousedown', startEnlarge);
            newRectangle.addEventListener('touchstart', startEnlarge);
            newRectangle.addEventListener('mouseup', stopEnlarge);
            newRectangle.addEventListener('mouseleave', stopEnlarge);
            newRectangle.addEventListener('touchend', stopEnlarge);

            function startEnlarge() {
                timer = setTimeout(() => {
                    newRectangle.classList.add('enlarged');
                }, 700);
            }

            function stopEnlarge() {
                clearTimeout(timer);
            }

            let sidebarfilelink = document.createElement('button');
            sidebarfilelink.textContent = filename;
            sidebarfilelink.innerHTML += `<div class="threedots">⋮</div>`;
            sidebarfilelink.id = 'sidebarfilelinklink' + newNavDot.getAttribute('data-index');
            sidebarfilelink.setAttribute('onclick', `editthisfile(${newNavDot.getAttribute('data-index')}, event)`);

            document.querySelector('.sidebarbardivbuttondiv1').appendChild(sidebarfilelink);
            await updateDataIndex('nav-bar');
            newNavDot.classList.add('nav-dot', 'navdot' + newNavDot.getAttribute('data-index'));
            newRectangle.id = "rectangle" + newNavDot.getAttribute('data-index');
            navBarremoveeventlistenerscrollandadditagain();
        }
        async function createNewFile(filename) {
            const container = document.getElementById('container');
            const navBar = document.getElementById('nav-bar');

            const newSection = document.createElement('div');
            newSection.classList.add('section');
            newSection.id = `section${container.children.length}`;
            newSection.innerHTML = `<div class="editor-selected-line-btns"><button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onfocus="searchcode(this)" placeholder="⌕"></div></div>
        <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
            <div id="1" class="code-editor-line" contenteditable="true"></div>
        </div>
        <div class="code-editor-btns"><button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number"></div>`;
            container.appendChild(newSection);

            lineoptioncontainerupdate(newSection.querySelector('.code-editor-container'));

            const newNavDot = document.createElement('div');
            newNavDot.classList.add('nav-dot', 'filedot');
            newNavDot.setAttribute('data-index', container.children.length - 1);
            newNavDot.innerHTML = `<input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="${filename}">`;
            newNavDot.setAttribute('onclick', 'dotonclick()');
            navBar.appendChild(newNavDot);

            let filePathInputblablabla = newNavDot.querySelector('.filePathInput');
            let timeout;

            filePathInputblablabla.addEventListener('input', (event) => {
                handleFileNameInputChange(event.target.parentElement);
            });

            filePathInputblablabla.addEventListener('mousedown', startOverlayEnlarge);
            filePathInputblablabla.addEventListener('touchstart', startOverlayEnlarge);

            filePathInputblablabla.addEventListener('mouseup', stopOverlayEnlarge);
            filePathInputblablabla.addEventListener('mouseleave', stopOverlayEnlarge);
            filePathInputblablabla.addEventListener('touchend', stopOverlayEnlarge);

            function startOverlayEnlarge(event) {
                timeout = setTimeout(() => {
                    document.querySelector('.overlay-container').style.display = "flex";
                    document.querySelector('.overlay-container').style.animation = "none";
                    void document.querySelector('.overlay-container').offsetWidth; // Trigger reflow
                    document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
                }, 700);
            }

            function stopOverlayEnlarge() {
                clearTimeout(timeout);
            }

            const dataList = document.getElementById('filenameoptions');
            const option = document.createElement('option');
            option.value = filename;
            option.id = `option${newNavDot.getAttribute('data-index')}`;
            dataList.appendChild(option);

            const overlayContainer = document.querySelector('.overlay-container .content-container');
            const newRectangle = document.createElement('div');
            newRectangle.classList.add('rectangle');
            newRectangle.innerHTML = `<span class="notclickable">${filename}</span>
<div class="rectangle-buttons">
    <button class="edit-btn">…</button>
</div>
<button class="close">×</button>`;
            newRectangle.setAttribute('onclick', `editthisfile(${container.children.length - 1}, event)`);
            overlayContainer.appendChild(newRectangle);

            if (newRectangle.querySelector('.download-btn')){
                newRectangle.querySelector('.download-btn').onclick = () => {
                    downloadFile(filename);
                };
            }
            newRectangle.querySelector('.close').addEventListener('click', () => {
                newRectangle.classList.remove('enlarged');
            });

            let timer;
            newRectangle.addEventListener('mousedown', startEnlarge);
            newRectangle.addEventListener('touchstart', startEnlarge);
            newRectangle.addEventListener('mouseup', stopEnlarge);
            newRectangle.addEventListener('mouseleave', stopEnlarge);
            newRectangle.addEventListener('touchend', stopEnlarge);

            function startEnlarge() {
                timer = setTimeout(() => {
                    newRectangle.classList.add('enlarged');
                }, 700);
            }

            function stopEnlarge() {
                clearTimeout(timer);
            }

            let sidebarfilelink = document.createElement('button');
            sidebarfilelink.textContent = filename;
            sidebarfilelink.innerHTML += `<div class="threedots">⋮</div>`;
            sidebarfilelink.id = 'sidebarfilelinklink' + newNavDot.getAttribute('data-index');
            sidebarfilelink.setAttribute('onclick', `editthisfile(${newNavDot.getAttribute('data-index')}, event)`);

            document.querySelector('.sidebarbardivbuttondiv1').appendChild(sidebarfilelink);

            await updateDataIndex('nav-bar');
            newNavDot.classList.add('nav-dot', 'navdot' + newNavDot.getAttribute('data-index'));
            newRectangle.id = "rectangle" + newNavDot.getAttribute('data-index');
            navBarremoveeventlistenerscrollandadditagain();
        }
        async function createNewFilefortemplatecode(filename, optionalText = '') {
            const container = document.getElementById('container');
            const navBar = document.getElementById('nav-bar');

            const newSection = document.createElement('div');
            newSection.classList.add('section');
            newSection.id = `section${container.children.length}`;
            newSection.innerHTML = `
        <div class="editor-selected-line-btns"><button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button>
            <button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button>
            <button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button>
            <button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button>
            <button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button>
            <button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button>
            <button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button>
            <button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button>
            <input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onfocus="searchcode(this)" placeholder="⌕">
        </div>
        <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
        </div>
        <div class="code-editor-btns">
            <button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button>
            <button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button>
            <button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button>
            <button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button>
            <button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button>
            <button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button>
            <button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button>
            <button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button>
            <input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number">
        </div>`;
            container.appendChild(newSection);

            lineoptioncontainerupdate(newSection.querySelector('.code-editor-container'));
            const newNavDot = document.createElement('div');
            newNavDot.classList.add('nav-dot', 'filedot');
            newNavDot.setAttribute('data-index', container.children.length - 1);
            newNavDot.innerHTML = `<input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="${filename}">`;
            newNavDot.setAttribute('onclick', 'dotonclick()');
            navBar.appendChild(newNavDot);

            let filePathInput = newNavDot.querySelector('.filePathInput');
            let timeout;

            filePathInput.addEventListener('input', (event) => {
                handleFileNameInputChange(event.target.parentElement);
            });

            filePathInput.addEventListener('mousedown', startOverlayEnlarge);
            filePathInput.addEventListener('touchstart', startOverlayEnlarge);
            filePathInput.addEventListener('mouseup', stopOverlayEnlarge);
            filePathInput.addEventListener('mouseleave', stopOverlayEnlarge);
            filePathInput.addEventListener('touchend', stopOverlayEnlarge);

            function startOverlayEnlarge() {
                timeout = setTimeout(() => {
                    document.querySelector('.overlay-container').style.display = "flex";
                    document.querySelector('.overlay-container').style.animation = "none";
                    void document.querySelector('.overlay-container').offsetWidth;
                    document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
                }, 700);
            }

            function stopOverlayEnlarge() {
                clearTimeout(timeout);
            }

            const dataList = document.getElementById('filenameoptions');
            const option = document.createElement('option');
            option.value = filename;
            option.id = `option${newNavDot.getAttribute('data-index')}`;
            dataList.appendChild(option);

            const overlayContainer = document.querySelector('.overlay-container .content-container');
            const newRectangle = document.createElement('div');
            newRectangle.classList.add('rectangle');
            newRectangle.innerHTML = `<span class="notclickable">${filename}</span>
<div class="rectangle-buttons">
    <button class="edit-btn">…</button>
</div>
<button class="close">×</button>`;
            newRectangle.setAttribute('onclick', `editthisfile(${container.children.length - 1}, event)`);
            overlayContainer.appendChild(newRectangle);

            if (newRectangle.querySelector('.download-btn')){
                newRectangle.querySelector('.download-btn').onclick = () => {
                    downloadFile(filename);
                };
            }

            newRectangle.querySelector('.close').addEventListener('click', () => {
                newRectangle.classList.remove('enlarged');
            });

            let timer;
            newRectangle.addEventListener('mousedown', startEnlarge);
            newRectangle.addEventListener('touchstart', startEnlarge);
            newRectangle.addEventListener('mouseup', stopEnlarge);
            newRectangle.addEventListener('mouseleave', stopEnlarge);
            newRectangle.addEventListener('touchend', stopEnlarge);

            function startEnlarge() {
                timer = setTimeout(() => {
                    newRectangle.classList.add('enlarged');
                }, 700);
            }

            function stopEnlarge() {
                clearTimeout(timer);
            }

            let sidebarfilelink = document.createElement('button');
            sidebarfilelink.textContent = filename;
            sidebarfilelink.innerHTML += `<div class="threedots">⋮</div>`;
            sidebarfilelink.id = 'sidebarfilelinklink' + newNavDot.getAttribute('data-index');
            sidebarfilelink.setAttribute('onclick', `editthisfile(${newNavDot.getAttribute('data-index')}, event)`);

            document.querySelector('.sidebarbardivbuttondiv1').appendChild(sidebarfilelink);

            const lines = optionalText.split('\n');
            const editorContainer = newSection.querySelector('.code-editor-container');
            lines.forEach((lineText) => {
                const line = document.createElement('div');
                line.classList.add('code-editor-line');
                line.setAttribute('contenteditable', 'true');
                line.textContent = lineText;
                addJsSyntaxHighlighting(line);
                editorContainer.appendChild(line);
            });

            await updateDataIndex('nav-bar');
            newNavDot.classList.add('nav-dot', 'navdot' + newNavDot.getAttribute('data-index'));
            newRectangle.id = "rectangle" + newNavDot.getAttribute('data-index');
            navBarremoveeventlistenerscrollandadditagain();
        }

        function downloadFile(name) {
            let type = name.split('.').pop();
            let filename = name.split('.').slice(0, -1).join('.');

            let content = checkiffile(name);
            if (!content) {
                return;
            }

            const mimeTypes = {
                html: 'text/html',
                css: 'text/css',
                js: 'application/javascript',
                txt: 'text/plain'
            };

            const mimeType = mimeTypes[type];
            if (!mimeType) {
                return;
            }

            const blob = new Blob([content], { type: mimeType });

            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `${filename}.${type}`;

            document.body.appendChild(link);
            link.click();

            document.body.removeChild(link);
            URL.revokeObjectURL(link.href);
        }
        function onfilepathinputblur(inputField) {
            const allFileNames = Array.from(document.querySelectorAll('.filedot .filePathInput'))
                .filter(input => input !== inputField)
                .map(input => input.value);

            if (allFileNames.includes(inputField.value)) {
                let baseName = inputField.value;
                let counter = 1;

                if (baseName.length > 240 - String(counter).length - 1) {
                    baseName = baseName.slice(0, 240 - String(counter).length - 1);
                }

                while (allFileNames.includes(`${counter}_${baseName}`)) {
                    counter++;
                }

                let newvalue = `${counter}_${baseName}`;
                if (newvalue.length >= 250) {
                    newvalue = truncateText(newvalue, 250);
                }

                inputField.value = newvalue;

                if (inputField.parentElement) {
                    handleFileNameInputChange(inputField.parentElement);
                }
            }
        }

        function truncateText(text, maxLength) {
            if (typeof text !== "string" || typeof maxLength !== "number") {
                throw new Error("Ungültige Argumente: text muss ein String und maxLength eine Zahl sein.");
            }

            return text.slice(0, maxLength);
        }



        function handleFileNameInputChange(navDot) {
            const dataIndex = navDot.getAttribute('data-index');
            const option = document.getElementById("option" + dataIndex);
            const rectangle = document.getElementById("rectangle" + dataIndex);
            const sidebarfilelinklink = document.getElementById("sidebarfilelinklink" + dataIndex);

            if (!option || !rectangle) {
                return;
            }

            const filePathInput = navDot.querySelector('.filePathInput');
            const rectanglespan = rectangle.querySelector('span');
            const downloadBtn = rectangle.querySelector('.download-btn');

            if (!filePathInput || !rectanglespan) {
                return;
            }

            const newValue = filePathInput.value.trim();
            if (!newValue) {
                return;
            }
            const safeValue = newValue.replace(/['"<>&]/g, '');
            option.value = safeValue;
            option.textContent = safeValue;
            rectanglespan.textContent = safeValue;

            sidebarfilelinklink.textContent = safeValue;
            sidebarfilelinklink.innerHTML += `<div class="threedots">⋮</div>`;
            if (downloadBtn){
                downloadBtn.onclick = () => downloadFile(safeValue);
            }
        }



        document.querySelectorAll('.filedot .filePathInput').forEach(rect => {
            rect.addEventListener('input', () => {
                handleFileNameInputChange(rect.parentElement);
            });
        });




        document.querySelectorAll('.rectangle').forEach(rect => {
            let timer;

            rect.querySelector('.close').addEventListener('click', () => {
                rect.classList.remove('enlarged');
            });
            rect.addEventListener('mousedown', startEnlarge);
            rect.addEventListener('touchstart', startEnlarge);

            rect.addEventListener('mouseup', stopEnlarge);
            rect.addEventListener('mouseleave', stopEnlarge);
            rect.addEventListener('touchend', stopEnlarge);

            function startEnlarge(event) {
                timer = setTimeout(() => {
                    rect.classList.add('enlarged');
                }, 700);
            }

            function stopEnlarge() {
                clearTimeout(timer);
            }
        });

        document.querySelectorAll('.filePathInput').forEach(rect => {
            let timer;

            rect.addEventListener('mousedown', startEnlarge);
            rect.addEventListener('touchstart', startEnlarge);

            rect.addEventListener('mouseup', stopEnlarge);
            rect.addEventListener('mouseleave', stopEnlarge);
            rect.addEventListener('touchend', stopEnlarge);

            function startEnlarge(event) {
                timer = setTimeout(() => {
                    updateviewthisfilebtn();
                    document.querySelector('.overlay-container').style.display = "flex";
                    document.querySelector('.overlay-container').style.animation = "none";
                    void document.querySelector('.overlay-container').offsetWidth;
                    document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
                }, 700);
            }

            function stopEnlarge() {
                clearTimeout(timer);
            }
        });
        function hideelement(type, name, event){
            if (event.target !== event.currentTarget) {
                return;
            }
            if (type == 'class'){
                document.querySelector('.' + name).style.animation = "none";
                void document.querySelector('.' + name).offsetWidth;
                document.querySelector('.' + name).style.animation = "swipeout 0.5s ease-out";
                setTimeout(() => {
                    document.querySelector('.' + name).style.display = 'none';
                }, 500);
            }else if (type == 'id'){
                document.querySelector('#' + name).style.animation = "none";
                void document.querySelector('.' + name).offsetWidth;
                document.querySelector('#' + name).style.animation = "swipeout 0.5s ease-out";
                setTimeout(() => {
                    document.querySelector('#' + name).style.display = 'none';
                }, 500);
            }
        }
        const navBar = document.getElementById('nav-bar');
        let isDragging = false;
        let startY = 0;
        let currentHeight = 50;
        let section = document.getElementById('section0');
        let sectionindex = 0;
        let inputDiv = section.querySelector('.code-editor-container');
        function gotonextorpreviousfile(vbackorforwardv){
            if (!section){
                return;
            }
            let navbarindexnumbernumber = 0;
            if (vbackorforwardv == "back"){
                navbarindexnumbernumber = parseInt(section.id.replace('section', '')) - 1;
            }else if (vbackorforwardv == "forward"){
                navbarindexnumbernumber = parseInt(section.id.replace('section', '')) + 1;
            }
            let navBar = document.getElementById('nav-bar');
            let scrolltothissection = navBar.querySelector('.nav-dot[data-index="' + navbarindexnumbernumber + '"]');
            if (scrolltothissection){
                scrolltothissection.scrollIntoView({ behavior: 'smooth' });
                document.querySelector('.overlay-back-btn').click();
            }
        }
        function checkiflinenumberinputkeydownisenter(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                document.querySelectorAll('.suggestioncontainer').forEach(suggestioncontainerv => {
                    suggestioncontainerv.remove();
                });
                let input = event.target;
                let value = input.value.trim();

                if (value !== '') {
                    if (isNaN(value)) {
                        return;
                    }

                    let lines = section.querySelectorAll('.code-editor-line');
                    let lineIndex = parseInt(value, 10) - 1;

                    if (lineIndex >= 0 && lineIndex < lines.length) {
                        let line = lines[lineIndex];

                        line.scrollIntoView({
                            behavior: 'smooth',
                            block: 'center',
                        });
                    }
                }
            }
        }
        function scrolltolinenumber(linenum){
            let lines = section.querySelectorAll('.code-editor-line');
            let lineIndex = parseInt(linenum);

            if (lineIndex >= 0 && lineIndex < lines.length) {
                let line = lines[lineIndex];

                line.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center',
                });
            }
        }

        function deletethisfile(number) {
            let rectangleToDelete = document.getElementById('rectangle' + number);
            if (rectangleToDelete) {
                rectangleToDelete.remove();
                document.querySelectorAll('.rectangle').forEach((rect, index) => {
                    const sectionKey = rect.id.replace('rectangle', 'section');
                    if (pastevents[sectionKey]) {
                        pastevents["section" + index] = pastevents[sectionKey];
                    }

                    if (futureevents[sectionKey]) {
                        futureevents["section" + index] = futureevents[sectionKey];
                    }
                    if (rect.id !== 'image-rectangle') {
                        rect.id = "rectangle" + index;
                        if (rect.querySelector('.rectangle-buttons .delete-btn') && rect.querySelector('.rectangle-buttons .edit-btn')){
                        rect.querySelector('.rectangle-buttons .delete-btn').setAttribute('onclick', `deletethisfile(${index})`);
                        rect.querySelector('.rectangle-buttons .edit-btn').setAttribute('onclick', `editthisfile(${index})`);
                        }
                        rect.setAttribute('onclick', `editthisfile(${index}, event)`);
                    }
                });
            }
            let sidebarfilelinklink = document.getElementById("sidebarfilelinklink" + number);
            if (sidebarfilelinklink){
                sidebarfilelinklink.remove();
                document.querySelectorAll(".sidebarfilelinklink").forEach((sidebarfilelink, index) => {
                    sidebarfilelink.id = 'sidebarfilelinklink' + index;
                    sidebarfilelink.setAttribute('onclick', `editthisfile(${index}, event)`);
                });
            }

            let navBar = document.getElementById('nav-bar');
            if (navBar) {
                let deletethisnavdot = navBar.querySelector('.nav-dot[data-index="' + number + '"]');
                if (deletethisnavdot) {
                    let filePathInput = deletethisnavdot.querySelector('.filePathInput');
                    let deletethisnavdotvalue = filePathInput ? filePathInput.value : null;
                    deletethisnavdot.remove();

                    document.querySelectorAll('.nav-dot').forEach((navdot, index) => {
                        navdot.classList.remove('navdot' + navdot.getAttribute('data-index'));
                        navdot.classList.add('navdot' + index);
                        navdot.setAttribute('data-index', index);
                    });

                    if (deletethisnavdotvalue) {
                        let filenameOptions = document.getElementById('filenameoptions');
                        if (filenameOptions) {
                            let optionToDelete = filenameOptions.querySelector(`option[value="${deletethisnavdotvalue}"]`);
                            if (optionToDelete) {
                                optionToDelete.remove();
                                document.querySelectorAll('#filenameoptions option').forEach((option, index) => {
                                    option.id = "option" + index;
                                });
                            }
                        }
                    }
                }
            }

            let container = document.getElementById('container');
            if (container) {
                let deletethissection = container.querySelector('.section[id="section' + number + '"]');
                if (deletethissection) {
                    deletethissection.remove();
                    document.querySelectorAll('.section').forEach((sectionv, index) => {
                        sectionv.id = "section" + index;
                    });
                }
            }
        }


        function editthisfile(number, event = null){
            if (event && event.target !== event.currentTarget && !event.target.classList.contains('notclickable') && !event.target.classList.contains('close')) {
                createOptionsContainer(event.target, number);
                return;
            }else if (event && event.target.classList.contains('close') || event.target.classList.contains('enlarged')){
                return;
            }
            closesidebaronsmallscreensizes();
            closeeverything();
            let navBar = document.getElementById('nav-bar');
            let scrolltothissection = navBar.querySelector('.nav-dot[data-index="' + number + '"]');
            if (scrolltothissection){
                scrolltothissection.scrollIntoView({ behavior: 'smooth' });
                document.querySelector('.overlay-back-btn').click();
            }
            lasteventsparentsection = document.getElementById('section' + number);
        }
        function updateviewthisfilebtn() {
            if (!section || !section.id){
                return;
            }
            if (section.id == document.querySelector('.viewcontainer').id){
                document.querySelector('.viewthisfile').style.display = 'none';
            }else {
                document.querySelector('.viewthisfile').style.display = 'inline-block';
            }
        }
        function deleteAllEmptyLines() {
            const sectionlinecontainer = section.querySelector(".code-editor-container");
            const allsectionlines = sectionlinecontainer.querySelectorAll(".code-editor-line");
            let newpast = [];
            lasteventsparentsection = section;
            allsectionlines.forEach((line, index) => {
                let pastelement = {
                    element: line,
                    type: "delete",
                    index: index
                };
                newpast.push(pastelement);
                if (line.textContent.trim() === "") {
                    if (section.querySelectorAll(".code-editor-line").length > 1 && !line.classList.contains('hiddenlinesparent')){
                        line.remove();
                    }
                }
            });
            if (newpast.length > 0) {
                if (!pastevents[lasteventsparentsection.id]) {
                    pastevents[lasteventsparentsection.id] = [];
                }
                futureevents[lasteventsparentsection.id] = [];
                pastevents[lasteventsparentsection.id].push(newpast);
                enablepastbtn();
            }
        }
        function deleteAllCommentsInLines() {
            const sectionlinecontainer = section.querySelector(".code-editor-container");
            if (!sectionlinecontainer) return;

            const allsectionlines = sectionlinecontainer.querySelectorAll(".code-editor-line");
            let newpast = [];
            lasteventsparentsection = section;

            allsectionlines.forEach(line => {
                let pastelement = {
                    element: line,
                    type: "text",
                    text: line.textContent
                };
                newpast.push(pastelement);

                let text = line.textContent;
                text = text.replace(/\/\/.*/g, '').replace(/\/\*[\s\S]*?\*\//g, '');
                line.textContent = text;
                addJsSyntaxHighlighting(line);
            });

            if (newpast.length > 0) {
                if (!pastevents[lasteventsparentsection.id]) {
                    pastevents[lasteventsparentsection.id] = [];
                }
                futureevents[lasteventsparentsection.id] = [];
                pastevents[lasteventsparentsection.id].push(newpast);
                enablepastbtn();
            }
        }

        function positionElementAbove(elementToPosition, referenceElement) {
            const referenceRect = referenceElement.getBoundingClientRect();
            elementToPosition.style.position = 'absolute';
            elementToPosition.style.top = `${referenceRect.top - window.innerHeight * 0.06}px`;

            if (document.querySelector('.sidebarenabled')){
                elementToPosition.style.right = `calc(${referenceRect.left + (referenceRect.width - elementToPosition.offsetWidth) / 2}px - 30vw)`;
            }else {
                elementToPosition.style.right = `${referenceRect.left + (referenceRect.width - elementToPosition.offsetWidth) / 2}px`;
            }
        }

        function positionoptionsElementBelow(elementToPosition, referenceElement) {
            const referenceRect = referenceElement.getBoundingClientRect();
            elementToPosition.style.position = 'absolute';
            elementToPosition.style.top = `${referenceRect.height}px`;

            if (document.querySelector('.sidebarenabled')) {
                elementToPosition.style.right = `calc(${referenceRect.left + (elementToPosition.offsetWidth) / 2}px - 30vw)`;
                elementToPosition.style.width = '70vw';
            } else {
                elementToPosition.style.right = `${referenceRect.left + (elementToPosition.offsetWidth) / 2}px`;
                elementToPosition.style.width = '100vw';
            }
            adjustElementPosition(elementToPosition);
            adjustElementPositionleft(elementToPosition);
        }
        let targetElementv = null;
        document.querySelectorAll('.code-editor-container').forEach(linecontainer => {
            lineoptioncontainerupdate(linecontainer);
        });
        function lineoptioncontainerupdate(linecontainer){

            linecontainer.addEventListener('mousedown', function(event) {
                const targetElement = event.target;
                targetElementv = targetElement;
                targetElement.holdTimer = setTimeout(() => {
                document.querySelector('.lineoptions').style.display = 'block';
                    performLongPressAction(targetElement);
                }, 700);
            });

            linecontainer.addEventListener('mouseup', function(event) {
                const targetElement = event.target;
                clearTimeout(targetElement.holdTimer);
            });

            linecontainer.addEventListener('mouseleave', function(event) {
                const targetElement = event.target;
                clearTimeout(targetElement.holdTimer);
            });

            linecontainer.addEventListener('click', function(event) {
                const targetElement = event.target;
                performLongPressAction(targetElement);
                targetElementv = targetElement;
            });

            linecontainer.addEventListener('keydown', function() {
                const focusedline = document.querySelector('.code-editor-line:focus');
                if (!focusedline) {
                    return;
                }
                const targetElement = focusedline;
                performLongPressAction(targetElement);
                targetElementv = targetElement;
            });


            linecontainer.addEventListener('scroll', function() {
                if (targetElementv) {
                    performLongPressAction(targetElementv);
                }
            });


            linecontainer.addEventListener('touchstart', function(event) {
                const targetElement = event.target;
                targetElementv = targetElement;
                targetElement.holdTimer = setTimeout(() => {
                document.querySelector('.lineoptions').style.display = 'block';
                    performLongPressAction(targetElement);
                }, 700);
            });
            linecontainer.addEventListener('touchend', function(event) {
                const targetElement = event.target;

                targetElementv = targetElement;
                clearTimeout(targetElement.holdTimer);
            });
            linecontainer.addEventListener('click', function(event) {
                const targetElement = event.target;
                performLongPressAction(targetElement);
                targetElementv = targetElement;
            });
            linecontainer.addEventListener('keydown', function() {
                const focusedline = document.querySelector('.code-editor-line:focus');
                if (!focusedline){
                    return;
                }
                const targetElement = focusedline;
                performLongPressAction(targetElement);
                targetElementv = targetElement;
            });


            linecontainer.addEventListener('scroll', function() {
                if (targetElementv){
                    performLongPressAction(targetElementv);
                }
            });
        }

        function performLongPressAction(element) {
            if (element.classList.contains('code-editor-line')) {
                positionElementAbove(document.querySelector('.lineoptions'), element);
            } else {
                document.querySelector('.lineoptions').style.display = 'none';
            }
        }
        function closelineoptionscontainer() {
            document.querySelector('.lineoptions').style.display = 'none';
        }
        function swipethislineleft() {
            if (!section){
                return;
            }
            if (section.classList.contains('viewcontainer')){
                return;
            }
            if (!targetElementv){
                return;
            }
            if (targetElementv.classList.contains('selected')) {
                targetElementv.classList.remove('selected');
                if (!section.querySelector('.code-editor-line.selected')){
                    section.querySelectorAll('.eslbtn').forEach(dline => {
                        dline.classList.add('disabled');
                    });
                }
                updateSelectedClasses();
            } else if (!targetElementv.classList.contains('selected') && !targetElementv.classList.contains('hiddenlinesparent') && !targetElementv.classList.contains('superselected')) {
                analyzeAndHideElements(targetElementv);
                updateSelectedClasses();
            } else if (targetElementv.classList.contains('superselected')) {
                targetElementv.classList.remove('superselected');
                targetElementv.classList.add('selected');
                targetElementv.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                    dline.classList.remove('disabled');
                });
                updateSelectedClasses();
            }
        }
        function swipethislineright() {
            if (!section){
                return;
            }
            if (section.classList.contains('viewcontainer')){
            return;
            }
            if (!targetElementv){
                return;
            }
            if (!targetElementv.classList.contains('selected') && !targetElementv.classList.contains('hiddenlinesparent') && !targetElementv.classList.contains('superselected')) {
                targetElementv.classList.add('selected');  // Linie auswählen
                section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                    dline.classList.remove('disabled');
                });
                updateSelectedClasses();
            } else if (targetElementv.classList.contains('hiddenlinesparent')) {
                targetElementv.classList.remove('hiddenlinesparent');
                showHiddenElements(targetElementv);
                updateSelectedClasses();
            }else if (targetElementv.classList.contains('selected')) {
                let anothersuperselectedline = false;
                let superselectedline = section.querySelector('.code-editor-line.superselected');
                if (superselectedline){
                    anothersuperselectedline = true;
                }
                targetElementv.classList.remove('selected');
                targetElementv.classList.add('superselected');
                if (!section.querySelector('.code-editor-line.selected')){
                    section.querySelectorAll('.eslbtn').forEach(dline => {
                        dline.classList.add('disabled');
                    });
                }
                if (anothersuperselectedline == true){
                    superselect(superselectedline, targetElementv);
                    superselectedline.classList.remove('superselected');
                    targetElementv.classList.remove('superselected');
                    superselectedline.classList.add('selected');
                    targetElementv.classList.add('selected');
                    section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                        dline.classList.remove('disabled');
                    });

                }
                updateSelectedClasses();
            }
        }

        const initialviewcontainerzindex = document.querySelector('.viewcontainer').style.zIndex;
        const initialviewcontainertop = document.querySelector('.viewcontainer').style.top;
        const initialviewcontainerleft = document.querySelector('.viewcontainer').style.left;
        let initialviewcontainerdisplay = document.querySelector('.viewcontainer').style.display;
        function viewthisfile() {

            initialviewcontainerdisplay = document.querySelector('.viewcontainer').style.display;
            document.querySelector('.viewcontainer').style.animation = "none";
            document.querySelector('.viewcontainer').style.position = "fixed";
            document.querySelector('.viewcontainer').style.top = "0";
            document.querySelector('.viewcontainer').style.left = "0";
            document.querySelector('.viewcontainer').style.zIndex = "1111";
            document.querySelector('.viewcontainer').style.display = "flex";

            let sidebarenabledviewcontainer = document.querySelector('.sidebarenabled .viewcontainer');
            if (sidebarenabledviewcontainer){
                sidebarenabledviewcontainer.style.left = "30vw";
            }

            let filepathtext = document.querySelector('.navdot' + sectionindex + ' input[type="text"]').value;

            document.getElementById('computer-url-input').value = filepathtext;
            document.getElementById('mobile-url-input').value = filepathtext;

            document.querySelector('.closeviewthisfilebtn').style.display = "flex";
        }

        function closeviewthisfile() {
            document.querySelector('.viewcontainer').style.position = "relative";
            document.querySelector('.viewcontainer').style.top = initialviewcontainertop;
            document.querySelector('.viewcontainer').style.left = initialviewcontainerleft;
            document.querySelector('.viewcontainer').style.zIndex = initialviewcontainerzindex;
            document.querySelector('.viewcontainer').style.display = initialviewcontainerdisplay;

            document.querySelector('.closeviewthisfilebtn').style.display = "none";
        }







        function checkiffile(filename) {
            let fileContent = "";
            document.querySelectorAll('.filedot').forEach(fd => {
                let filePathInputva = fd.querySelector('.filePathInput');
                if (filePathInputva && filePathInputva.value == filename) {
                    let sectionv = document.getElementById(`section${fd.getAttribute('data-index')}`);
                    if (sectionv) {
                        let container = sectionv.querySelector('.code-editor-container');
                        if (container) {
                            container.querySelectorAll('.code-editor-line').forEach(line => {
                                fileContent += line.textContent + "\n";
                            });
                            return;
                        }
                    }
                }
            });
            return fileContent;
        }



        function replaceLinksAndScripts(values) {
            let htmlString = checkiffile(values);
            const fileCache = new Map();

            const getFileContent = (filename) => {
                if (!fileCache.has(filename)) {
                    fileCache.set(filename, checkiffile(filename));
                }
                return fileCache.get(filename);
            };

            htmlString = htmlString.replace(/<link\s+[^>]*rel=["']stylesheet["'][^>]*href=["']([^"']+)["'][^>]*>/g, (match, href) => {
                const fileContent = checkiffile(href);
                return fileContent ? `<style>\n${fileContent}\n</style>` : match;
            });

            htmlString = htmlString.replace(/<script\s+[^>]*src=["']([^"']+)["'][^>]*><\/script>/g, (match, src) => {
                const fileContent = checkiffile(src);
                return fileContent ? `<script>\n${fileContent}\n<\/script>` : match;
            });

            return htmlString;
        }


        function textCode(textcontainerid, iframeid) {
            const code = replaceLinksAndScripts(document.getElementById(textcontainerid).value);
            document.getElementById(iframeid).srcdoc = code;
        }


        const swipeContainer = document.querySelector('.swipe-container');
        let startXvvv;

        function updateIframe(type) {
            const iframe = document.getElementById(`${type}-frame`);
            const url = document.getElementById(`${type}-url-input`).value;
            iframe.src = url;
        }

        swipeContainer.addEventListener('touchstart', (e) => {
            startXvvv = e.touches[0].clientX;
        });

        swipeContainer.addEventListener('touchend', (e) => {
            const endX = e.changedTouches[0].clientX;
            handleSwipe(startXvvv, endX);
        });

        swipeContainer.addEventListener('mousedown', (e) => {
            startXvvv = e.clientX;
        });

        swipeContainer.addEventListener('mouseup', (e) => {
            const endX = e.clientX;
            handleSwipe(startXvvv, endX);
        });

        function handleSwipe(start, end) {
            const distance = start - end;
            const threshold = 100;

            if (distance > threshold) {
                swipeContainer.scrollBy({ left: window.innerWidth, behavior: 'smooth' });
            } else if (distance < -threshold) {
                swipeContainer.scrollBy({ left: -window.innerWidth, behavior: 'smooth' });
            }
        }
        let originalDisplayStatus = [];




        function searchcode(thiselementhasthevalue) {
            if (!section) {
                return;
            }
            if (section.classList.contains('viewcontainer')) {
                return;
            }
            closelineoptionscontainer();

            const codesearchresults = document.querySelector('.codesearchresults');
            positionElementBelow(codesearchresults, thiselementhasthevalue);
            adjustElementPosition(codesearchresults);
            adjustElementPositionleft(codesearchresults);
            codesearchresults.onscroll = () => {
                adjustElementPositionleft(codesearchresults);
            };
    

            const inputvalue = thiselementhasthevalue.value.trim().toLowerCase();
            codesearchresults.style.display = inputvalue ? "flex" : "none";
            codesearchresults.innerHTML = "";
    
            if (codesearchresults.style.display == "flex"){
                document.onclick = (event) => {
                    if (!event.target.classList.contains('comtiniueresultsbtn') && !event.target.classList.contains('codesearchresults') && !event.target.classList.contains('result') && !event.target.classList.contains('code-search-input')) {
                        hidecodesearchresults();
                    }
                };
            }

            if (inputvalue) {
                const parentSection = thiselementhasthevalue.closest(".section");
                const sectionlinecontainer = parentSection.querySelector('.code-editor-container');

                const importantElements = sectionlinecontainer.querySelectorAll('.code-editor-line.importantpin');
                const nonImportantElements = sectionlinecontainer.querySelectorAll('.code-editor-line:not(.importantpin)');
                const combinedList = [...importantElements, ...nonImportantElements];

                let resultsnumber = 0;

                function continiueresults(startIndex) {
                    let resultsnumber2 = 0;

                    for (let i = startIndex; i < combinedList.length; i++) {
                        const lineelement = combinedList[i];

                        if (lineelement.textContent.toLowerCase().includes(inputvalue)) {
                            if (resultsnumber2 >= 50) {
                                const newcomtiniuebtn = document.createElement('button');
                                newcomtiniuebtn.className = "comtiniueresultsbtn";
                                newcomtiniuebtn.textContent = "more...";
                                codesearchresults.appendChild(newcomtiniuebtn);
                                newcomtiniuebtn.onclick = () => {
                                    continiueresults(i);
                                    newcomtiniuebtn.remove();
                                };
                                return;
                            }

                            const newspan = document.createElement('span');
                            newspan.classList.add('result');
                            if (lineelement.classList.contains('importantpin')) {
                                newspan.classList.add('importantsearchresult');
                            }
                            newspan.textContent = lineelement.textContent;
                            codesearchresults.appendChild(newspan);

                            resultsnumber++;
                            resultsnumber2++;

                            newspan.addEventListener('click', () => {
                                lineelement.scrollIntoView({
                                    behavior: 'smooth',
                                    block: 'center',
                                });
                                setTimeout(() => {
                                    performLongPressAction(lineelement);
                                    hidecodesearchresults();
                                }, 500);
                            });
                        }
                    }
                }
                continiueresults(0);
            }
        }








        function positionElementBelow(elementToPosition, referenceElement) {
            const referenceRect = referenceElement.getBoundingClientRect();
            elementToPosition.style.position = 'absolute';
            elementToPosition.style.top = `${referenceRect.bottom + window.innerHeight * 0.03}px`;
            elementToPosition.style.left = `${referenceRect.left}px`;
            elementToPosition.style.display = "block";
        }

        function updatelinenumbercheckbox(checkbox){
            if (!section){
                return;
            }
            if (section.classList.contains('viewcontainer')){
                return;
            }
            const dataValue = checkbox.getAttribute('data-update-id');
            if (dataValue){
                if (checkbox.checked == false){
                    section.querySelector(`.code-editor-container`).id = dataValue + "off";
                }else if (checkbox.checked == true){
                    section.querySelector(`.code-editor-container`).id = dataValue + "on";
                }
            }
        }
    
        function updategridenabledordisabledcheckbox(checkbox) {
            if (!section) {
                return;
            }
            if (section.classList.contains('viewcontainer')) {
                return;
            }
            const dataValue = checkbox.getAttribute('data-update-class');
            if (dataValue) {
                document.querySelectorAll('.section').forEach(section => {
                    if (checkbox.checked == false) {
                        if(section.classList.contains('gridenabled')){
                            section.classList.remove('gridenabled');
                        }
                    } else if (checkbox.checked == true) {
                        if(!section.classList.contains('gridenabled')){
                            section.classList.add('gridenabled');
                        }
                    }
                });
            }
        }

        function updateautocompleteenabledordisabledcheckbox(checkbox) {
            if (!section) {
                return;
            }
            if (section.classList.contains('viewcontainer')) {
                return;
            }
            const dataValue = checkbox.getAttribute('data-update-aceclass');
            if (dataValue) {
                document.querySelectorAll('.section').forEach(section => {
                    if (checkbox.checked == false) {
                        if (section.classList.contains('autocompleteenabled')) {
                            section.classList.remove('autocompleteenabled');
                        }
                    } else if (checkbox.checked == true) {
                        if (!section.classList.contains('autocompleteenabled')) {
                            section.classList.add('autocompleteenabled');
                        }
                    }
                });
            }
        }

        function updatecheckboxed(checkbox){
            if (!section){
                return;
            }
            if (section.classList.contains('viewcontainer')){
                return;
            }
            const dataValue = checkbox.getAttribute('data-checked');
            if (dataValue){
                if (checkbox.checked == false){
                    section.querySelectorAll(`#${dataValue}`).forEach(btn => {
                        btn.style.display = "none";
                    });
                }else if (checkbox.checked == true){
                    section.querySelectorAll(`#${dataValue}`).forEach(btn => {
                        btn.style.display = "inline-block";
                    });
                }
            }
        }

        function checkboxupdatefunction() {
            if (!section){
                return;
            }
            if (section.classList.contains('viewcontainer')){
                return;
            }
            document.querySelectorAll('.switchbox').forEach(checkbox0 => {
                const dataValue = checkbox0.getAttribute('data-checked');

                section.querySelectorAll(`#${dataValue}`).forEach(btn0 => {
                    const displayStyle = btn0.style.display;

                    if (displayStyle == "none") {
                        checkbox0.checked = false;
                    } else {
                        checkbox0.checked = true;
                    }
                });
                const dataValue2 = checkbox0.getAttribute('data-update-id');
                const dataValue3 = checkbox0.getAttribute('data-update-class');
                const dataValue4 = checkbox0.getAttribute('data-update-aceclass');
                if (section.querySelector('.code-editor-container')){
                    if (!dataValue && dataValue2 && section.querySelector('.code-editor-container').id == "linenumberingoff"){
                        checkbox0.checked = false;
                    }else if (!dataValue && dataValue2 && section.querySelector('.code-editor-container').id == "linenumberingon"){
                        checkbox0.checked = true;
                    }
                }
                if (!dataValue && dataValue3 && !dataValue4 && !section.classList.contains('gridenabled') && !document.querySelector('.section.gridenabled')) {
                    document.querySelectorAll('.section').forEach(section => {
                        if (section.classList.contains('gridenabled')) {
                            section.classList.remove('gridenabled');
                        }
                    });
                    checkbox0.checked = false;
                } else if (!dataValue && dataValue3 && !dataValue4 && !section.classList.contains('gridenabled') && document.querySelector('.section.gridenabled')) {
                    document.querySelectorAll('.section').forEach(section => {
                        if (!section.classList.contains('gridenabled')) {
                            section.classList.add('gridenabled');
                        }
                    });
                    checkbox0.checked = true;
                } else if (!dataValue && dataValue3 && !dataValue4 && section.classList.contains('gridenabled')) {
                    document.querySelectorAll('.section').forEach(section => {
                        if (!section.classList.contains('gridenabled')) {
                            section.classList.add('gridenabled');
                        }
                    });
                    checkbox0.checked = true;
                }
                if (!dataValue && dataValue4 && !dataValue3 && !section.classList.contains('autocompleteenabled') && !document.querySelector('.section.autocompleteenabled')) {
                    document.querySelectorAll('.section').forEach(section => {
                        if (section.classList.contains('autocompleteenabled')) {
                            section.classList.remove('autocompleteenabled');
                        }
                    });
                    checkbox0.checked = false;
                } else if (!dataValue && dataValue4 && !dataValue3 && !section.classList.contains('autocompleteenabled') && document.querySelector('.section.autocompleteenabled')) {
                    document.querySelectorAll('.section').forEach(section => {
                        if (!section.classList.contains('autocompleteenabled')) {
                            section.classList.add('autocompleteenabled');
                        }
                    });
                    checkbox0.checked = true;
                } else if (!dataValue && dataValue4 && !dataValue3 && section.classList.contains('autocompleteenabled')) {
                    document.querySelectorAll('.section').forEach(section => {
                        if (!section.classList.contains('autocompleteenabled')) {
                            section.classList.add('autocompleteenabled');
                        }
                    });
                    checkbox0.checked = true;
                }
            });
        }
    
        checkboxupdatefunction();



        navBar.addEventListener('mousedown', (e) => {
            isDragging = true;
            startY = e.clientY;
        });

        navBar.addEventListener('touchstart', (e) => {
            isDragging = true;
            startY = e.touches[0].clientY;
        });

        window.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaY = startY - e.clientY;
                let newHeight = currentHeight + deltaY;

                if (section.classList.contains('viewcontainer')){
                    return;
                }
                if (newHeight > 100) {
                    newHeight = 100;
                    navBar.style.overflow = "hidden";
                }
                if (newHeight < 50) {
                    newHeight = 50;
                    navBar.style.overflow = "scroll";
                    navBar.style.overflowY = "hidden";
                }

                navBar.style.height = `${newHeight}vh`;
            }
        });

        window.addEventListener('touchmove', (e) => {
            if (isDragging) {
                const deltaY = startY - e.touches[0].clientY;
                let newHeight = currentHeight + deltaY;

                if (section.classList.contains('viewcontainer')){
                    return;
                }
                if (newHeight > 100) {
                    newHeight = 100;
                    navBar.style.overflow = "hidden";
                }
                if (newHeight < 50) {
                    newHeight = 50;
                    navBar.style.overflow = "scroll";
                    navBar.style.overflowY = "hidden";
                }

                navBar.style.height = `${newHeight}vh`;
            }
        });

        const seccontainer = document.querySelector('.seccontainer');
        window.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                if (parseInt(navBar.style.height) > 75 && !section.classList.contains('viewcontainer')) {
                    navBar.style.height = '100vh';
                    navBar.classList.add('expanded');
                    seccontainer.style.display = 'flex';
                } else {
                    navBar.style.height = '50px';
                    navBar.classList.remove('expanded');
                    seccontainer.style.display = 'none';
                }
            }
        });

        window.addEventListener('touchend', () => {
            if (isDragging) {
                isDragging = false;
                if (section && parseInt(navBar.style.height) > 75 && !section.classList.contains('viewcontainer')) {
                    navBar.style.height = '100vh';
                    navBar.classList.add('expanded');
                    seccontainer.style.display = 'flex';
                } else {
                    navBar.style.height = '50px';
                    navBar.classList.remove('expanded');
                    seccontainer.style.display = 'none';
                }
            }
        });

        const container = document.getElementById('container');
        let navDots = document.querySelectorAll('.nav-dot');
        let currentIndex = 0;

        let previoussectionfsts = section;
        function scrollToSection(index) {
            document.querySelectorAll('.suggestioncontainer').forEach(suggestioncontainerv => {
                suggestioncontainerv.remove();
            });
            lasteventsparentsection = document.getElementById('section' + index);
            if (section){
                if (section.classList.contains('viewcontainer')){
                    if (navBar.classList.contains('expanded')) {
                        navBar.style.height = '50px';
                        navBar.classList.remove('expanded');
                        seccontainer.style.display = 'none';
                    }
                }
            }

            const codesearchresults = document.querySelector('.codesearchresults');
            codesearchresults.style.display = "none";
            closelineoptionscontainer();
            const sectionWidth = parseFloat(getComputedStyle(document.querySelector('.nav-bar div')).width);
            document.querySelectorAll('.section').forEach(sec => {
                if (sec.id != `section${index}`){
                    sec.style.animation = "none";
                    void sec.offsetWidth;
                    sec.style.animation = "swipeout 0.5s ease-out";
                    setTimeout(() => {
                        sec.style.display = 'none';
                    }, 400);
                }
            });
            setTimeout(() => {
                document.querySelector(`#section${index}`).style.display = 'flex';
                document.querySelector(`#section${index}`).style.animation = "none";
                void document.querySelector(`#section${index}`).offsetWidth;
                document.querySelector(`#section${index}`).style.animation = "swipein 0.5s ease-out";
            }, 400);
        }
        function highlightDot(index) {
            navDots.forEach(dot => {
                dot.classList.remove('active');
            });
            navDots[index].classList.add('active');
        }

        function scrolleivs() {
            if (!section){
                return;
            }
            navDots = document.querySelectorAll('.nav-dot');
            const sectionWidth = parseFloat(getComputedStyle(document.querySelector('.nav-bar div')).width);
            const scrollPos = navBar.scrollLeft;
            const index = Math.round(scrollPos / sectionWidth);
            if (index !== currentIndex) {
                previoussectionfsts = section;
                sectionindex = index;

                section = document.getElementById(`section${index}`);
                if (!section.classList.contains('viewcontainer')){
                    inputDiv = section.querySelector('.code-editor-container');
                    checkboxupdatefunction();
                }
                scrollToSection(index);
                highlightDot(index);
                currentIndex = index;
                updateviewthisfilebtn();
            }
        }
        navBar.addEventListener('scroll', () => {
            scrolleivs();
        });

        function navBarremoveeventlistenerscrollandadditagain() {
            navBar.removeEventListener('scroll', () => {
                scrolleivs();
            });
            navBar.addEventListener('scroll', () => {
                scrolleivs();
            });
        }

        function updateDataIndex(divId) {
            const container = document.getElementById(divId);
            const elements = container.children;
            for (let i = 0; i < elements.length; i++) {
                elements[i].setAttribute('data-index', i);
            }
        }
        function updateClass(divclass) {
            const container = document.querySelector("." + divId);
            const elements = container.children;
            for (let i = 0; i < elements.length; i++) {
                elements[i].id = `section${i}`;
            }
        }
        function dotonclick() {
            if (!section){
                return;
            }
            const sectionWidth = parseFloat(getComputedStyle(document.querySelector('.nav-bar div')).width);
            const scrollPos = navBar.scrollLeft;
            const index = Math.round(scrollPos / sectionWidth);
            if (section.id == document.getElementById(`section${index}`).id){
                return;
            }
            scrollToSection(index);
            highlightDot(index);
            navBar.scrollLeft = index * window.innerWidth;
            section = document.getElementById(`section${index}`);
            lasteventsparentsection = section;
            if (!section.classList.contains('viewcontainer')){
                inputDiv = section.querySelector('.code-editor-container');
            }
            checkboxupdatefunction();
            currentIndex = index;
        }

        highlightDot(0);
        let correntids = 2;


        function checkifselectedlines() {
            if (!section){
                return;
            }
            const check = section.querySelector(".code-editor-line.selected");
            if (!check) {
                section.querySelectorAll('.eslbtn').forEach(dline => {
                    dline.classList.add('disabled');
                });
            }
        }
        function getElementIndexInParent(element) {
            if (!element || !element.parentElement) {
                return -1;
            }
            const parent = element.parentElement;
            return Array.from(parent.children).indexOf(element);
        }

        function deleteSelectedLines() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            let newpast = [];
            lasteventsparentsection = section;

            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    let pastelement = {
                        element: selectedline,
                        type: "delete",
                        index: getElementIndexInParent(selectedline)
                    };
                    newpast.push(pastelement);
                    let pastelement2 = {
                        element: selectedline,
                        type: "text",
                        text: selectedline.textContent
                    };
                    newpast.push(pastelement2);
                    if (selectedline.previousElementSibling || selectedline.nextElementSibling){
                        selectedline.innerHTML = "";
                        addJsSyntaxHighlighting(selectedline);
                        selectedline.remove();
                    }else {
                        selectedline.innerHTML = "";
                    }
                    selectedline.classList.remove('selected');
                    checkifselectedlines();
                });
            }
            if (newpast.length > 0) {
                if (!pastevents[lasteventsparentsection.id]) {
                    pastevents[lasteventsparentsection.id] = [];
                }
                futureevents[lasteventsparentsection.id] = [];
                pastevents[lasteventsparentsection.id].push(newpast);
                enablepastbtn();
            }
        }

        function deleteAllLines() {
            const allselectedlines = section.querySelectorAll(".code-editor-line");
            let newpast = [];
            lasteventsparentsection = section;
            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    
                if (selectedline.previousElementSibling || selectedline.nextElementSibling){
                    let pastelement = {
                        element: selectedline,
                        type: "delete",
                        index: getElementIndexInParent(selectedline)
                    };
                    newpast.push(pastelement);
                    selectedline.remove();
                }else {
                    let pastelement = {
                        element: selectedline,
                        type: "text",
                        text: selectedline.textContent
                    };
                    newpast.push(pastelement);
                    selectedline.innerHTML = "";
                }
                checkifselectedlines();
                });
            }
            if (newpast.length > 0) {
                if (!pastevents[lasteventsparentsection.id]) {
                    pastevents[lasteventsparentsection.id] = [];
                }
                futureevents[lasteventsparentsection.id] = [];
                pastevents[lasteventsparentsection.id].push(newpast);
                enablepastbtn();
            }
        }

        function importantselectedlines() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.toggle("importantpin");
                    selectedline.classList.remove('selected');
                    updateimportantpinClasses();
                    checkifselectedlines();
                });
            }
        }

        function unselectalllines() {
          const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('selected');
                    if (!section.querySelector('.code-editor-line.selected')){
                        section.querySelectorAll('.eslbtn').forEach(dline => {
                            dline.classList.add('disabled');
                        });
                    }
                    updateSelectedClasses();
                });
            }
        }

        function unfoldalllines() {
          const allselectedlines = section.querySelectorAll(".hiddenlinesparent");
            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('hiddenlinesparent');
                    showHiddenElements(selectedline);
                    updateSelectedClasses();
                });
            }
        }

        function importantalllines() {
            const allselectedlines = section.querySelectorAll(".importantpin");
            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove("importantpin");
                    updateimportantpinClasses();
                    checkifselectedlines();
                });
            }
        }

        function moveselectedlineup() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {
                let newpast = [];
                allselectedlines.forEach(selectedline => {
                    const previousLine = selectedline.previousElementSibling;
                    if (previousLine) {
                        let pastelement = {
                            element: selectedline,
                            type: "delete",
                            index: getElementIndexInParent(selectedline)
                        };
                        newpast.push(pastelement);
                        selectedline.parentNode.insertBefore(selectedline, previousLine);
                        if (previousLine.classList.contains('syntaxcomment') && !selectedline.classList.contains('syntaxcomment')) {
                            let pastelement3 = {
                                element: previousLine,
                                type: "addclass",
                                text: "syntaxcomment"
                            };
                            newpast.push(pastelement3);
                            previousLine.classList.remove('syntaxcomment');
                            addJsSyntaxHighlighting(previousLine);
                        }
                        if (previousLine.classList.contains('syntaxhtmlcomment') && !selectedline.classList.contains('syntaxhtmlcomment')) {
                            let pastelement3 = {
                                element: previousLine,
                                type: "addclass",
                                text: "syntaxcomment"
                            };
                            newpast.push(pastelement3);
                            previousLine.classList.remove('syntaxhtmlcomment');
                            addJsSyntaxHighlighting(previousLine);
                        }
                        if (selectedline.nextElementSibling) {
                            if (!selectedline.nextElementSibling.classList.contains('syntaxcomment') && !previousLine.classList.contains('syntaxcomment') && selectedline.classList.contains('syntaxcomment')) {
                                let pastelement3 = {
                                    element: selectedline,
                                    type: "addclass",
                                    text: "syntaxcomment"
                                };
                                newpast.push(pastelement3);
                                selectedline.classList.remove('syntaxcomment');
                                addJsSyntaxHighlighting(previousLine);
                            }
                            if (!selectedline.nextElementSibling.classList.contains('syntaxcomment') && !previousLine.classList.contains('syntaxhtmlcomment') && selectedline.classList.contains('syntaxhtmlcomment')) {
                                let pastelement3 = {
                                    element: selectedline,
                                    type: "addclass",
                                    text: "syntaxcomment"
                                };
                                newpast.push(pastelement3);
                                selectedline.classList.remove('syntaxhtmlcomment');
                                addJsSyntaxHighlighting(nextLine);
                            }
                        }
                        addJsSyntaxHighlighting(selectedline);
                        let pastelement2 = {
                            element: selectedline,
                            type: "create",
                            index: getElementIndexInParent(selectedline)
                        };
                        newpast.push(pastelement2);
                    }
                });
                if (newpast.length > 0) {
                    if (!pastevents[lasteventsparentsection.id]) {
                        pastevents[lasteventsparentsection.id] = [];
                    }
                    futureevents[lasteventsparentsection.id] = [];
                    pastevents[lasteventsparentsection.id].push(newpast);
                    enablepastbtn();
                }
            }
        }

        function moveselectedlinedown() {
            let allselectedlines = [...section.querySelectorAll('.code-editor-line.selected')];
            allselectedlines.reverse();
            if (allselectedlines.length) {
                let newpast = [];
                allselectedlines.forEach(selectedline => {
                    const nextLine = selectedline.nextElementSibling;
                    if (nextLine) {
                        let pastelement = {
                            element: selectedline,
                            type: "delete",
                            index: getElementIndexInParent(selectedline)
                        };
                        newpast.push(pastelement);
                        selectedline.parentNode.insertBefore(nextLine, selectedline);
                        if (nextLine.classList.contains('syntaxcomment') && !selectedline.classList.contains('syntaxcomment')){
                            let pastelement3 = {
                                element: nextLine,
                                type: "addclass",
                                text: "syntaxcomment"
                            };
                            newpast.push(pastelement3);
                            nextLine.classList.remove('syntaxcomment');
                            addJsSyntaxHighlighting(nextLine);
                        }
                        if (nextLine.classList.contains('syntaxhtmlcomment') && !selectedline.classList.contains('syntaxhtmlcomment')) {
                            let pastelement3 = {
                                element: nextLine,
                                type: "addclass",
                                text: "syntaxcomment"
                            };
                            newpast.push(pastelement3);
                            nextLine.classList.remove('syntaxhtmlcomment');
                            addJsSyntaxHighlighting(nextLine);
                        }
                        
                        if (selectedline.previousElementSibling){
                            if (!selectedline.previousElementSibling.classList.contains('syntaxcomment') && !nextLine.classList.contains('syntaxcomment') && selectedline.classList.contains('syntaxcomment')) {
                                let pastelement3 = {
                                    element: selectedline,
                                    type: "addclass",
                                    text: "syntaxcomment"
                                };
                                newpast.push(pastelement3);
                                selectedline.classList.remove('syntaxcomment');
                                addJsSyntaxHighlighting(nextLine);
                            }
                            if (!selectedline.previousElementSibling.classList.contains('syntaxcomment') && !nextLine.classList.contains('syntaxhtmlcomment') && selectedline.classList.contains('syntaxhtmlcomment')) {
                                let pastelement3 = {
                                    element: selectedline,
                                    type: "addclass",
                                    text: "syntaxcomment"
                                };
                                newpast.push(pastelement3);
                                selectedline.classList.remove('syntaxhtmlcomment');
                                addJsSyntaxHighlighting(nextLine);
                            }
                        }
                        addJsSyntaxHighlighting(selectedline);
                        let pastelement2 = {
                            element: selectedline,
                            type: "create",
                            index: getElementIndexInParent(selectedline)
                        };
                        newpast.push(pastelement2);
                    }
                });
                if (newpast.length > 0) {
                    if (!pastevents[lasteventsparentsection.id]) {
                        pastevents[lasteventsparentsection.id] = [];
                    }
                    futureevents[lasteventsparentsection.id] = [];
                    pastevents[lasteventsparentsection.id].push(newpast);
                    enablepastbtn();
                }
            }
        }

        function restselectedline() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.toggle("disableline");
                    selectedline.classList.remove('selected');
                    checkifselectedlines();
                });
            }
        }

        function unsleepalllines() {
            const allselectedlines = section.querySelectorAll(".disableline");
            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('disableline');
                });
            }
        }

        function changedeletebtn(deletebtnnnn) {
            const initialsign = deletebtnnnn.textContent;
            deletebtnnnn.style.animation = "none";
            void deletebtnnnn.offsetWidth;
            deletebtnnnn.style.animation = "rotatesign 0.5s ease-out";
            deletebtnnnn.disabled = true;
            setTimeout(() => {
                deletebtnnnn.textContent = '☑';
            }, 250);
            setTimeout(() => {
                deletebtnnnn.style.animation = "none";
                void deletebtnnnn.offsetWidth;
                deletebtnnnn.style.animation = "rotatesign 0.5s ease-out";
                setTimeout(() => {
                    deletebtnnnn.textContent = initialsign;
                    deletebtnnnn.disabled = false;
                }, 250);
            }, 1000);
        }
        function changebtnnotinsquare(deletebtnnnn){
            const initialsign = deletebtnnnn.textContent;
            deletebtnnnn.style.animation = "none";
            void deletebtnnnn.offsetWidth;
            deletebtnnnn.style.animation = "rotatesign 0.5s ease-out";
            deletebtnnnn.disabled = true;
            setTimeout(() => {
                deletebtnnnn.textContent = '✓';
            }, 250);
            setTimeout(() => {
                deletebtnnnn.style.animation = "none";
                void deletebtnnnn.offsetWidth;
                deletebtnnnn.style.animation = "rotatesign 0.5s ease-out";
                setTimeout(() => {
                    deletebtnnnn.textContent = initialsign;
                    deletebtnnnn.disabled = false;
                }, 250);
            }, 1000);
        }
        function trimAllselectedlinetexts(){
            let newpast = [];
            lasteventsparentsection = section;
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {
                allselectedlines.forEach(selectedline => {
                    let pastelement = {
                        element: selectedline,
                        type: "text",
                        text: selectedline.textContent
                    };
                    newpast.push(pastelement);
                    selectedline.textContent = selectedline.textContent.trim();
                    if (!selectedline.classList.contains('syntaxhtmlcomment') && !selectedline.classList.contains('syntaxcomment') && !selectedline.classList.contains('syntaxstring')) {
                        addJsSyntaxHighlighting(selectedline);
                    }
                    checkifselectedlines();
                });
            }
            
            if (newpast.length > 0) {
                if (!pastevents[lasteventsparentsection.id]) {
                    pastevents[lasteventsparentsection.id] = [];
                }
                pastevents[lasteventsparentsection.id].push(newpast);
                enablepastbtn();
            }
        }

        function copyselectedlinetexts() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {
                let linetexts = "";
                allselectedlines.forEach(selectedline => {
                    linetexts += selectedline.textContent + "\n";
                });

                try {
                    const newtextarea = document.createElement('textarea');
                    newtextarea.value = linetexts;
                    document.body.appendChild(newtextarea);
                    newtextarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(newtextarea);
                } catch (error) {
                    const thiserrorwascatched = error;
                }

                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('selected');
                });

                checkifselectedlines();
            }
        }
        function copyalllinetexts() {
            const allselectedlines = section.querySelectorAll(".code-editor-line");
            if (allselectedlines.length) {
                let linetexts = "";
                allselectedlines.forEach(selectedline => {
                    linetexts += selectedline.textContent + "\n";
                });

                try {
                    const newtextarea = document.createElement('textarea');
                    newtextarea.value = linetexts;
                    document.body.appendChild(newtextarea);
                    newtextarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(newtextarea);
                } catch (error) {
                    const thiserrorwascatched = error;
                }

                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('selected');
                });
                checkifselectedlines();
            }
        }


        let startX, startLine;

        document.addEventListener('touchstart', function(event) {
            let target = event.target.closest('.code-editor-line');
            if (target) {
                startX = event.touches[0].clientX;
                startLine = target;
            }
        });

        let result = {};
        
        document.addEventListener('touchend', function(event) {
            if (!startLine) return;

            let endX = event.changedTouches[0].clientX;
            let diffX = endX - startX;
            
            if (diffX > 50 && !startLine.classList.contains('selected') && !startLine.classList.contains('hiddenlinesparent') && !startLine.classList.contains('superselected')) {
                
                startLine.classList.add('selected');
                section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                    dline.classList.remove('disabled');
                });
                updateSelectedClasses();
                
            } else if (diffX > 50 && startLine.classList.contains('hiddenlinesparent')) {
                startLine.classList.remove('hiddenlinesparent');
                showHiddenElements(startLine);
                updateSelectedClasses();
            } else if (diffX > 50 && startLine.classList.contains('selected')) {
                let anothersuperselectedline = false;
                let superselectedline = section.querySelector('.code-editor-line.superselected');
                if (superselectedline){
                    anothersuperselectedline = true;
                }
                startLine.classList.remove('selected');
                startLine.classList.add('superselected');
                if (!section.querySelector('.code-editor-line.selected')){
                    section.querySelectorAll('.eslbtn').forEach(dline => {
                        dline.classList.add('disabled');
                    });
                }
                if (anothersuperselectedline == true){
                    superselect(superselectedline, startLine);
                    superselectedline.classList.remove('superselected');
                    startLine.classList.remove('superselected');
                    superselectedline.classList.add('selected');
                    startLine.classList.add('selected');
                    section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                        dline.classList.remove('disabled');
                    });

                }
                updateSelectedClasses();
            } else if (diffX < -50 && startLine.classList.contains('selected')) {
                startLine.classList.remove('selected');
                if (!section.querySelector('.code-editor-line.selected')){
                    section.querySelectorAll('.eslbtn').forEach(dline => {
                        dline.classList.add('disabled');
                    });
                }
                updateSelectedClasses();
            } else if (diffX < -50 && startLine.classList.contains('superselected')) {
                startLine.classList.remove('superselected');
                startLine.classList.add('selected');
                section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                    dline.classList.remove('disabled');
                });
                updateSelectedClasses();
            } else if (diffX < -50 && !startLine.classList.contains('selected') && !startLine.classList.contains('hiddenlinesparent')) {
                analyzeAndHideElements(startLine);
                updateSelectedClasses();
            } 

            startLine = null;
        });

        function superselect(superselectedline, superselectedline2) {
            let allselectedlines = Array.from(section.querySelectorAll('.code-editor-line'));
            let startindex = allselectedlines.indexOf(superselectedline);
            let endindex = allselectedlines.indexOf(superselectedline2);

            if (superselectedline.classList.contains('hidden') || superselectedline2.classList.contains('hidden')){
                return;
            }

            if (startindex < endindex) {
                for (let i = startindex + 1; i < endindex; i++) {
                    if (allselectedlines[i].classList.contains('hiddenlinesparent')) {
                        allselectedlines[i].classList.remove('hiddenlinesparent');
                        showHiddenElements(allselectedlines[i]);
                        updateSelectedClasses();
                    }
                    if (!allselectedlines[i].classList.contains('selected')){
                        allselectedlines[i].classList.add('selected');
                    }
                }
            } else if (startindex > endindex) {
                for (let i = startindex - 1; i > endindex; i--) {
                    if (allselectedlines[i].classList.contains('hiddenlinesparent')) {
                        allselectedlines[i].classList.remove('hiddenlinesparent');
                        showHiddenElements(allselectedlines[i]);
                        updateSelectedClasses();
                    }
                    if (!allselectedlines[i].classList.contains('selected')){
                        allselectedlines[i].classList.add('selected');
                    }
                }
            }
            updateSelectedClasses();
        }

        function preserveCursorAndHighlight(celine) {
            if (!celine || !(celine instanceof HTMLElement)) {
                return;
            }
  
            function getCursorPosition(element) {
                const selection = window.getSelection();
                if (!selection.rangeCount) return null;
                const range = selection.getRangeAt(0);
                const preCaretRange = range.cloneRange();
                preCaretRange.selectNodeContents(element);
                preCaretRange.setEnd(range.startContainer, range.startOffset);
                const startOffset = preCaretRange.toString().length;

                return startOffset;
            }

            function setCursorPosition(element, position) {
                const selection = window.getSelection();
                selection.removeAllRanges();

                const range = document.createRange();
                let currentOffset = 0;

                function traverseNodes(node) {
                    if (node.nodeType === Node.TEXT_NODE) {
                        const nextOffset = currentOffset + node.textContent.length;
                        if (currentOffset <= position && position <= nextOffset) {
                            range.setStart(node, position - currentOffset);
                            range.collapse(true);
                            return true;
                        }
                        currentOffset = nextOffset;
                    } else if (node.nodeType === Node.ELEMENT_NODE) {
                        for (let i = 0; i < node.childNodes.length; i++) {
                            if (traverseNodes(node.childNodes[i])) return true;
                        }
                    }
                    return false;
                }

                traverseNodes(element);
                selection.addRange(range);
            }
  
            const cursorPosition = getCursorPosition(celine);

            const dubbleminusregex = /—/g;
            const matches = celine.textContent.match(dubbleminusregex);
            const count = matches ? matches.length : 0;
            if (count > 0){
                celine.textContent = celine.textContent.replaceAll('—', '--');
            }
            addJsSyntaxHighlighting(celine);

            if (cursorPosition !== null) {
                setCursorPosition(celine, cursorPosition + count);
            }
        }






        function handlePaste(event) {
            event.preventDefault();
            
            let celine = section.querySelector('.code-editor-line:focus');
            if (!celine) return;
            let newpast2 = [];
            lasteventsparentsection = section;
            let pastelement2 = {
                element: celine,
                type: "text",
                text: celine.textContent
            };
            newpast2.push(pastelement2);
            let spaces = "";
            let continueSpaces = true;
            for (let i = 0; i < celine.textContent.length; i++) {
                let character = celine.textContent[i];
                if ((character === " " || character === "\u00A0") && continueSpaces) {
                    spaces += "\u00A0";
                } else {
                    continueSpaces = false;
                }
            }
            let pasteText = (event.clipboardData || window.clipboardData).getData('text');
            let lines = pasteText.split(/\r\n|\n|\r/);
            
            let selection = window.getSelection();
            if (selection.rangeCount === 0) return;
            
            let range = selection.getRangeAt(0);
            let cursorOffset = range.startOffset;
            let currentText = celine.textContent;
            let textAfterCursor = currentText.substring(cursorOffset);
            celine.textContent = currentText.substring(0, cursorOffset);
            let firstreferencespacesforspacecoun = convertToNonBreakingSpaces(lines[0]);

            let space2 = "";
            let continueSpace2 = true;
            for (let i = 0; i < firstreferencespacesforspacecoun.length; i++) {
                let character = firstreferencespacesforspacecoun[i];
                if ((character === " " || character === "\u00A0") && continueSpace2) {
                    space2 += "\u00A0";
                } else {
                    continueSpace2 = false;
                }
            }
            const firstLineLeadingSpacesCount = space2.length;
            let lineSpacesCoun2 = 0;
            let continueLineSpac2 = true;
            
            for (let j = 0; j < lines[0].length; j++) {
                let character = lines[0][j];
                if ((character === " " || character === "\u00A0") && continueLineSpac2) {
                    lineSpacesCoun2++;
                } else {
                    continueLineSpac2 = false;
                }
            }
            let adjustedLin2 = lines[0];
            if (lineSpacesCoun2 >= firstLineLeadingSpacesCount) {
                adjustedLin2 = lines[0].slice(firstLineLeadingSpacesCount);
            }
            celine.textContent += convertToNonBreakingSpaces(adjustedLin2);
            addJsSyntaxHighlighting(celine);
            for (let i = 1; i < lines.length; i++) {
                correntids += 1;
                const newline = document.createElement('div');
                newline.setAttribute('contenteditable', 'true');
                newline.id = correntids;
                newline.classList.add('code-editor-line');
                
                let lineSpacesCount = 0;
                let continueLineSpaces = true;
                
                for (let j = 0; j < lines[i].length; j++) {
                let character = lines[i][j];
                    if ((character === " " || character === "\u00A0") && continueLineSpaces) {
                        lineSpacesCount++;
                    } else {
                        continueLineSpaces = false;
                    }
                }
                
                let adjustedLine = lines[i];
                if (lineSpacesCount >= firstLineLeadingSpacesCount) {
                    adjustedLine = lines[i].slice(firstLineLeadingSpacesCount);
                }
                
                newline.textContent = spaces + convertToNonBreakingSpaces(adjustedLine);
                celine.insertAdjacentElement('afterend', newline);
                celine = newline;
                addJsSyntaxHighlighting(celine);
                let pastelement = {
                    element: celine,
                    type: "create",
                    index: getElementIndexInParent(celine)
                };
                newpast2.push(pastelement);
                if (i == lines.length - 1){
                    celine.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center',
                        inline: 'center'
                    });
                }
            }
            
            function filterCodeLines() {
                const lines = section.querySelectorAll('.code-editor-line');

                const filteredLines = Array.from(lines).filter(line => {
                    const text = line.textContent;

                    const hasCommentSyntax = text.includes('<!--') || text.includes('/*');
                    const hasCommentClass = line.classList.contains('syntaxcomment') || line.classList.contains('syntaxstring') || line.classList.contains('syntaxhtmlcomment');
                    const withinQuotes = /["'`].*?(<!--|\/\*).*?["'`]/.test(text);

                    return hasCommentSyntax && !hasCommentClass && !withinQuotes;
                });

                filteredLines.forEach(line => {
                    addJsSyntaxHighlighting(line);
                });
            }
            
            celine.textContent += convertToNonBreakingSpaces(textAfterCursor);
            
            const newRange = document.createRange();
            
            let lastChild = celine.lastChild;
            if (lastChild) {
                newRange.setStart(lastChild, lastChild.length - textAfterCursor.length);
            } else {
                newRange.setStart(celine, celine.textContent.length - textAfterCursor.length);
            }
            
            if (newpast2.length > 0) {
                if (!pastevents[lasteventsparentsection.id]) {
                    pastevents[lasteventsparentsection.id] = [];
                }
                pastevents[lasteventsparentsection.id].push(newpast2);
                enablepastbtn();
            }
            filterCodeLines();
        
            newRange.collapse(true);
            selection.removeAllRanges();
            selection.addRange(newRange);
        }


        function analyzeAndHideElements(element) {
            function countLeadingSpaces(text) {
                let spaces = 0;
                let continueSpaces = true;
                for (let i = 0; i < text.length; i++) {
                    let character = text[i];
                    if ((character === " " || character === "\u00A0") && continueSpaces) {
                        spaces += 1;
                    } else {
                        continueSpaces = false;
                    }
                }
                return spaces;
            }

            const referenceSpaces = countLeadingSpaces(element.textContent);
            const hiddenElements = [];

            let nextElement = element.nextElementSibling;
            let nextElementValid = false;
            if (nextElement){
                element.classList.add('hiddenlinesparent');
            }else {
                return;
            }
            while (nextElement) {
                const nextText = nextElement.textContent;
                const nextSpaces = countLeadingSpaces(nextText);

                if (nextSpaces > referenceSpaces || nextText.trim() == "") {
                    hiddenElements.push(nextElement);
                    nextElement.classList.add('hidden');
                    nextElementValid = true;
                } else {
                    break;
                }

                nextElement = nextElement.nextElementSibling;
            }
            if (!nextElementValid) {
                element.classList.remove('hiddenlinesparent');
            }
            result[element.id] = hiddenElements;
        }

        function showHiddenElements(element) {
            if (result[element.id]) {
                const hiddenElements = result[element.id].reverse();
                hiddenElements.forEach(hiddenElement => {
                    if (hiddenElement){
                        hiddenElement.classList.remove('hidden');
                        if (hiddenElement.classList.contains('hiddenlinesparent')){
                            hiddenElement.classList.remove('hiddenlinesparent');
                            showHiddenElements(hiddenElement);
                            analyzeAndHideElements(hiddenElement);
                        }
                    }
                });
                delete result[element.id];
            }
        }

        function convertToNonBreakingSpaces(text) {
            return text.replace(/ /g, ' ').replace(/\t/g, '    ');
        }
        
        function replaceCommandsWithSymbols(textelement) {
            let celine = textelement;
            let selection = window.getSelection();
            if (!selection.rangeCount) return;

            let range = selection.getRangeAt(0);
            let cursorOffset = range.startOffset;
            function insertClosingCharacter(replacetext, openingChar, closingChar) {
                let text = celine.textContent;
                if (!text.includes(replacetext)) return;
                let newpast2 = [];
                lasteventsparentsection = section;
                let pastelement2 = {
                    element: celine,
                    type: "text",
                    text: celine.textContent
                };
                newpast2.push(pastelement2);
                if (newpast2.length > 0) {
                    if (!pastevents[lasteventsparentsection.id]) {
                        pastevents[lasteventsparentsection.id] = [];
                    }
                    pastevents[lasteventsparentsection.id].push(newpast2);
                    enablepastbtn();
                }

                let textAfterCursor = text.substring(cursorOffset);
                celine.textContent = text.substring(0, cursorOffset).replace(replacetext, '') + openingChar + closingChar + textAfterCursor;

                const newCursorOffset = cursorOffset + (openingChar.length - replacetext.length);
                range.setStart(celine.firstChild, newCursorOffset);
                range.collapse(true);
                selection.removeAllRanges();
                selection.addRange(range);
            }
            const commandToSymbol = {
                "/alert": "⚠",
                "/arrowbottomleft": "↙",
                "/arrowbottomright": "↘",
                "/arrowdown": "↓",
                "/arrowgoleft": "↤",
                "/arrowgoright": "↦",
                "/arrowleft": "←",
                "/arrowright": "→",
                "/arrowtopleft": "↖",
                "/arrowtopright": "↗",
                "/arrowup": "↑",
                "/bigspark": "✶",
                "/bottomleftedge": "◣",
                "/bottomrightedge": "◢",
                "/smallcheckmark": "✓",
                "/emptycircle": "◯",
                "/copyright": "©",
                "/bigcross": "✘",
                "/crossincirkle": "⊗",
                "/crossinsquare": "⌧",
                "/crossnotinsquare": "×",
                "/cutoutcircle": "◌",
                "/diamond": "◆",
                "/emptyspark": "✧",
                "/emptysquare": "□",
                "/emptystar": "☆",
                "/emptytriangleleft": "◁",
                "/emptytriangledown": "▽",
                "/emptytriangleright": "▷",
                "/emptytriangletop": "△",
                "/filledcircle": "●",
                "/heart": "♥",
                "/infinite": "∞",
                "/magnifyingglass": "⌕",
                "/minus": "−",
                "/moonleft": "☽",
                "/moonright": "☾",
                "/movable": "✣",
                "/eighthnote": "♪",
                "/beamednote": "♫",
                "/chordsymbol": "♬",
                "/quarternote": "♩",
                "/paperplane": "➤",
                "/pencil": "✎",
                "/plus": "+",
                "/refreshright": "↻",
                "/refreshleft": "↺",
                "/registered": "®",
                "/sidebar": "≡",
                "/smallcross": "×",
                "/filledspark": "✦",
                "/filledsquare": "■",
                "/filledstar": "★",
                "/sun": "☼",
                "/toprightedge": "◥",
                "/topleftedge": "◤",
                "/trademark": "™",
                "/triangleleft": "◀",
                "/triangleright": "▶",
                "/triangledown": "▼",
                "/triangletop": "▲",
                "/updownleftarrow": "↵",
            };

            const shortCutCommands = {
                "/:func": {
                    firstpart: "function definition() {",
                    seccondpart: "}"
                },
                "/:if": {
                    firstpart: "if (condition) {",
                    seccondpart: "}"
                },
                "/:for": {
                    firstpart: "for (let i = 0; i < array.length; i++) {",
                    seccondpart: "}"
                },
                "/:try": {
                    firstpart: 'try {',
                    seccondpart: "} catch (error) { console.error(error); }"
                },
                "/:div": {
                    firstpart: '<div class="className">',
                    seccondpart: "</div>"
                },
                "/:btn": {
                    firstpart: '<button id="buttonId">',
                    seccondpart: "</button>"
                },
                "/:span": {
                    firstpart: '<span id="spanId">',
                    seccondpart: "</span>"
                },
                "/:img": {
                    firstpart: '<image src="',
                    seccondpart: '">'
                },
                "/:p": {
                    "firstpart": "<p id=\"pId\">",
                    "seccondpart": "</p>"
                },
                "/:h1": {
                    firstpart: "<h1 id=\"h1Id\">",
                    seccondpart: "</h1>"
                },
                "/:h2": {
                    firstpart: "<h2 id=\"h2Id\">",
                    seccondpart: "</h2>"
                },
                "/:h3": {
                    firstpart: "<h3 id=\"h3Id\">",
                    seccondpart: "</h3>"
                },
                "/:h4": {
                    firstpart: "<h4 id=\"h4Id\">",
                    seccondpart: "</h4>"
                },
                "/:h5": {
                    firstpart: "<h5 id=\"h5Id\">",
                    seccondpart: "</h5>"
                },
                "/:h6": {
                    firstpart: "<h6 id=\"h6Id\">",
                    seccondpart: "</h6>"
                },
                "/:at": {
                    firstpart: "<a href=\"\" id=\"aId\">",
                    seccondpart: "</a>"
                },
                "/:ul": {
                    firstpart: "<ul id=\"ulId\">",
                    seccondpart: "</ul>"
                },
                "/:ol": {
                    firstpart: "<ol id=\"olId\">",
                    seccondpart: "</ol>"
                },
                "/:li": {
                    firstpart: "<li id=\"liId\">",
                    seccondpart: "</li>"
                },
                "/:table": {
                    firstpart: "<table id=\"tableId\">",
                    seccondpart: "</table>"
                },
                "/:tr": {
                    firstpart: "<tr id=\"trId\">",
                    seccondpart: "</tr>"
                },
                "/:td": {
                    firstpart: "<td id=\"tdId\">",
                    seccondpart: "</td>"
                },
                "/:th": {
                    firstpart: "<th id=\"thId\">",
                    seccondpart: "</th>"
                },
                "/:input": {
                    firstpart: "<input type=\"",
                    seccondpart: "\" id=\"inputId\">"
                },
                "/:form": {
                    firstpart: "<form id=\"formId\">",
                    seccondpart: "</form>"
                },
                "/:label": {
                    firstpart: "<label id=\"labelId\">",
                    seccondpart: "</label>"
                },
                "/:iframe": {
                    firstpart: "<iframe src=\"\" id=\"iframeId\">",
                    seccondpart: "</iframe>"
                },
                "/:nav": {
                    firstpart: "<nav id=\"navId\">",
                    seccondpart: "</nav>"
                },
                "/:header": {
                    firstpart: "<header id=\"headerId\">",
                    seccondpart: "</header>"
                },
                "/:footer": {
                    firstpart: "<footer id=\"footerId\">",
                    seccondpart: "</footer>"
                },
                "/:sec": {
                    firstpart: "<section id=\"sectionId\">",
                    seccondpart: "</section>"
                },
                "/:article": {
                    firstpart: "<article id=\"articleId\">",
                    seccondpart: "</article>"
                },
                "/:aside": {
                    firstpart: "<aside id=\"asideId\">",
                    seccondpart: "</aside>"
                },
                "/:main": {
                    firstpart: "<main id=\"mainId\">",
                    seccondpart: "</main>"
                }
            }
            for (const command in commandToSymbol) {
                const symbol = commandToSymbol[command];
                insertClosingCharacter(command.toUpperCase(), symbol, '');
            }
            for (const command in shortCutCommands) {
                const firstpart = shortCutCommands[command].firstpart;
                const seccondpart = shortCutCommands[command].seccondpart;
                insertClosingCharacter(command.toUpperCase(), firstpart, seccondpart);
            }
            for (const command in shortCutCommands) {
                const firstpart = shortCutCommands[command].firstpart;
                const seccondpart = shortCutCommands[command].seccondpart;
                insertClosingCharacter(command, firstpart, seccondpart);
            }
        }

        function handleKeyUpEvent(event) {
            let celine = document.activeElement?.closest('.code-editor-line');
            if (!celine) return;
    
            setupAutocomplete(celine);

            if (celine.textContent.includes('/') && document.querySelector('.commandsswitch')?.checked) {
                replaceCommandsWithSymbols(celine);
            }
            if (celine.textContent.trim() != ""){
                preserveCursorAndHighlight(celine);
            }
        }


        function getLastNonSpaceCharInText(text) {
            for (let i = text.length - 1; i >= 0; i--) {
                if (text[i] !== ' ') {
                    return text[i];
                }
            }
            return null;
        }
        function getFirstNonSpaceCharInTextaftercursor(text) {
            for (let i = text.length - 1; i >= 0; i++) {
                if (text[i] !== ' ') {
                    return text[i];
                }
            }
            return null;
        }
        function addJsSyntaxHighlighting(div) {
            if (!div || div.tagName !== "DIV") {
                return;
            }

            const code = div.textContent;
            div.textContent = "";
      
            const jstextstring = [
                { regex: /(?<!\\)`(?![^"]*"(?:[^"\\]*\\.)*[^"]*$)(?![^']*'(?:[^'\\]*\\.)*[^']*$)(?![^/]*\/(?:[^/\\]*\\.)*[^/]*\/[gimsuy]*)(?![^/]*\/\/.*)[^`]*/, className: "syntaxstring" }
            ];

            const spatterns = [
                { regex: /(\/\/[^\n]*|\/\*[\s\S]*?(?:\*\/|$)|[^\/]*\*\/)/g, className: "syntaxcomment" },
                { regex: /(?:\<\!\-\-[^\-]*|(?<!\<\!\-\-[^\-]*)[\s\S]*?\-\-\>)/g, className: "syntaxhtmlcomment" },
                { regex: /(["'`])(?:(?!\1)[^\\]|\\.)*\1/g, className: "syntaxstring" },
                { regex: /\/(?!\/)(?=\S)(.*?)(\/[gimsuy]*)/g, className: "syntaxregex" },

                { regex: /\b(let|const|var|return|delete|break|continue|in|this)\b/g, className: "syntaxkeyword" },
                { regex: /\b(if|else|try|catch|function|for|while|setTimeout)\b/g, className: "syntaxblock" },
                { regex: /@(namespace|container|page|supports|keyframes|import|font-face|media)\b/g, className: "syntaxkeyword" },
                { regex: /(?<=<\/?)([^\s>/]+)(?=[\s>])/g, className: "syntaxhtmltagcontent" },
                { regex: /(\+|-|\*|\/|%|=|>|<|!|\^|:)/g, className: "syntaxoperator" },
                { regex: /#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{6})\b/g, className: "syntaxhex" },
                { regex: /([\[\]{}()])/g, className: "syntaxbracket" },
                { regex: /([.,&|;])/g, className: "syntaxsign" },
                { regex: /\b\d+(\.\d+)?\b/g, className: "syntaxnumber" },
                { regex: /\b[a-zA-Z_]\w*\b(?=\s*=)/g, className: "syntaxvariable" },
                { regex: /\b(console\.log|Math\.\w+|Date|window|document)\b/g, className: "syntaxcommand" },
                { regex: /(?<=\.)\b\w+\b/g, className: "syntaxvariable" },
                { regex: /\b(?:align-content|align-items|align-self|all|animation(?:-delay|-direction|-duration|-fill-mode|-iteration-count|-name|-play-state|-timing-function)?|appearance|backdrop-filter|backface-visibility|background(?:-attachment|-blend-mode|-clip|-color|-image|-origin|-position|-repeat|-size)?|border(?:-block(?:-color|-end(?:-color|-style|-width)?|-start(?:-color|-style|-width)?|-style|-width)?|-bottom(?:-color|-left-radius|-right-radius|-style|-width)?|-collapse|-color|-end-end-radius|-end-start-radius|-image(?:-outset|-repeat|-slice|-source|-width)?|-inline(?:-color|-end(?:-color|-style|-width)?|-start(?:-color|-style|-width)?|-style|-width)?|-left(?:-color|-style|-width)?|-radius|-right(?:-color|-style|-width)?|-spacing|-start-end-radius|-start-start-radius|-style|-top(?:-color|-left-radius|-right-radius|-style|-width)?|-width)?|box-decoration-break|box-shadow|box-sizing|break-(?:after|before|inside)|caption-side|caret-color|clear|clip(?:-path)?|color|column(?:-count|-fill|-gap|-rule(?:-color|-style|-width)?|-span|-width)?|columns|content|counter-(?:increment|reset)|cursor|direction|display|empty-cells|filter|flex(?:-basis|-direction|-flow|-grow|-shrink|-wrap)?|float|font(?:-family|-feature-settings|-kerning|-language-override|-optical-sizing|-size(?:-adjust)?|-stretch|-style|-synthesis|-variant(?:-alternates|-caps|-east-asian|-ligatures|-numeric|-position)?|-variation-settings|-weight)?|gap|grid(?:-area|-auto-(?:columns|flow|rows)|-column(?:-end|-gap|-start)?|-gap|-row(?:-end|-gap|-start)?|-template(?:-areas|-columns|-rows)?)?|height|hyphens|image-rendering|inherit|initial|inline-size|inset(?:-block(?:-end|-start)?|-inline(?:-end|-start)?)?|isolation|justify-(?:content|items|self)|left|letter-spacing|line-(?:break|height)|list-style(?:-image|-position|-type)?|margin(?:-block(?:-end|-start)?|-bottom|-inline(?:-end|-start)?|-left|-right|-top)?|mask(?:-border(?:-mode|-outset|-repeat|-slice|-source|-width)?|-clip|-composite|-image|-mode|-origin|-position|-repeat|-size|-type)?|max-(?:block-size|height|inline-size|width)|min-(?:block-size|height|inline-size|width)|mix-blend-mode|object-(?:fit|position)|offset(?:-(?:anchor|distance|path|position|rotate))?|opacity|order|orphans|outline(?:-color|-offset|-style|-width)?|overflow(?:-(?:anchor|block|inline|wrap|x|y))?|overscroll-behavior(?:-(?:block|inline|x|y))?|padding(?:-block(?:-end|-start)?|-bottom|-inline(?:-end|-start)?|-left|-right|-top)?|page-break-(?:after|before|inside)|paint-order|perspective(?:-origin)?|place-(?:content|items|self)|pointer-events|position|quotes|resize|right|rotate|row-gap|ruby-(?:align|position)|scale|scroll-(?:behavior|margin(?:-block(?:-end|-start)?|-bottom|-inline(?:-end|-start)?|-left|-right|-top)?|padding(?:-block(?:-end|-start)?|-bottom|-inline(?:-end|-start)?|-left|-right|-top)?|snap-(?:align|stop|type))|shape-(?:image-threshold|margin|outside)|tab-size|table-layout|text-(?:align(?:-last)?|combine-upright|decoration(?:-color|-line|-skip(?:-ink)?|-style|-thickness)?|emphasis(?:-color|-position|-style)?|indent|justify|orientation|overflow|rendering|shadow|transform(?:-offset|position)?|underline(?:-offset|-position)?)|top|transform(?:-(?:box|origin|style))?|transition(?:-(?:delay|duration|property|timing-function))?|unicode-bidi|user-select|vertical-align|visibility|white-space|widows|width|will-change|word-(?:break|spacing|wrap)|writing-mode|z-index|zoom)\b(?=\s*:)/g
, className: "syntaxcommand" },
                { regex: /\b\w+(?=:)/g, className: "syntaxcommand" }
            ];

            function processText(text, container, patterns) {
                let matchFound = false;
                let lastIndex = 0;

                while (lastIndex < text.length) {
                    let matched = false;
          
                    for (const { regex, className } of patterns) {
                        regex.lastIndex = lastIndex;
                        const match = regex.exec(text);

                        if (match && match.index === lastIndex) {
                            matched = true;

                            if (text.slice(lastIndex, match.index)) {
                                const before = document.createElement("span");
                                before.textContent = text.slice(lastIndex, match.index);
                                container.appendChild(before);
                            }

                            const span = document.createElement("span");
                            span.textContent = match[0];
                            span.className = className;
                            if (className == "syntaxhex"){
                                const colorInput = document.createElement('input');
                                colorInput.type = 'color';
                                colorInput.value = span.textContent;
                                colorInput.className = "syntaxcolorinput";
                                function colorinputoninput(colorInput) {
                                    if (span.parentElement && span.parentElement.classList.contains('code-editor-line')){
                                        let newpast = [];
                                        let pastelement = {
                                            element: span.parentElement,
                                            type: "text",
                                            text: span.parentElement.textContent
                                        };
                                        newpast.push(pastelement);
                                        if (newpast.length > 0) {
                                            if (!pastevents[lasteventsparentsection.id]) {
                                                pastevents[lasteventsparentsection.id] = [];
                                            }
                                            pastevents[lasteventsparentsection.id].push(newpast);
                                            enablepastbtn();
                                        }
                                    }
                                    span.textContent = colorInput.value;
                                    const colorInput2 = document.createElement('input');
                                    colorInput2.type = 'color';
                                    colorInput2.className = "syntaxcolorinput";
                                    colorInput2.value = span.textContent;
                                    colorInput2.addEventListener('input', (event) => {
                                        colorinputoninput(colorInput2);
                                    });
                                    span.appendChild(colorInput2);
                                }
                                colorInput.addEventListener('input', (event) => {
                                    colorinputoninput(colorInput);
                                });
                                span.appendChild(colorInput);
                            }
                            span.classList.add('syntax');
                            container.appendChild(span);

                            lastIndex = regex.lastIndex;
                            break;
                        }
                    }

                    if (!matched) {
                        const span = document.createElement("span");
                        span.textContent = text[lastIndex];
                        span.classList.add('syntax');
                        container.appendChild(span);
                        lastIndex++;
                    }
                }
            }
      
      
            function checkifcontinuedcomment() {
                const testthisregex = /\/\*[^*]*$/g;
                if (!testthisregex.test(code)) {
                    return;
                }

                let currentdiv = div;
                while (currentdiv.nextElementSibling) {
                    currentdiv = currentdiv.nextElementSibling;
    
                    if (!currentdiv.textContent.includes('*/')) {
                        let currentdivtextcontent = currentdiv.textContent;
                        currentdiv.innerHTML = "";

                        currentdiv.textContent = currentdivtextcontent;
                        currentdiv.classList.add('syntaxcomment');
                    } else {
                        let commentpart = currentdiv.textContent.split('*/')[0] + "*/";
                        let notcommentpart = currentdiv.textContent.split('*/')[1];
                        currentdiv.innerHTML = "";
                        let newspan = document.createElement('span');
                        newspan.className = "syntaxcomment";
                        newspan.textContent = commentpart;
                        const container = document.createDocumentFragment();

                        container.appendChild(newspan);
                        currentdiv.appendChild(container);
                        const container2 = document.createDocumentFragment();

                        processText(notcommentpart, container2, spatterns);
                        currentdiv.appendChild(container2);
                        break;
                    }
                }
            }
            function processDiv() {
                const content = code;
                const regexCommentEnd = /.*\*\/.*$/;
                const regexCommentStart = /.*\/\*/;

                if (regexCommentEnd.test(content) && !regexCommentStart.test(content.slice(content.indexOf('*/') + 2))) {
                    let nextSibling = div;
                    while (nextSibling && nextSibling.classList.contains('syntaxcomment')) {
                        nextSibling.classList.remove('syntaxcomment');
                        const container2 = document.createDocumentFragment();
                        let nextSiblingTextContent = nextSibling.textContent;
                        nextSibling.innerHTML = "";
                        processText(nextSiblingTextContent, container2, spatterns);
                        nextSibling.appendChild(container2);
                        nextSibling = nextSibling.nextElementSibling;
                    }
                }
            }

            function checkcomments(div, text) {
                let regextotest = /\/\*(?!.*\*\/)/g;
                let regextotest2 = /(?<!\/\*.*)\*\//g;
                if (div.nextElementSibling && div.nextElementSibling.classList.contains('syntaxcomment') && !div.classList.contains('syntaxcomment') && !regextotest.test(text)) {
                    let nextelement = div.nextElementSibling;
                    while (nextelement && nextelement.classList.contains('syntaxcomment')){
                        nextelement.classList.remove('syntaxcomment');
                        const container = document.createDocumentFragment();
                        processText(nextelement.textContent, container, spatterns);
                        nextelement.innerHTML = "";
                        nextelement.appendChild(container);
                        nextelement = nextelement.nextElementSibling;
                    }
                }else if (div.previousElementSibling && div.previousElementSibling.classList.contains('syntaxcomment') && !div.classList.contains('syntaxcomment') && !regextotest2.test(text)){
                    div.classList.add('syntaxcomment');
                    div.innerHTML = "";
                    div.textContent = text;
                    let currentdiv = div.nextElementSibling;
                    while (currentdiv && !currentdiv.textContent.includes('*/')) {
                        if (!currentdiv.classList.contains('syntaxcomment')){
                            let currentdivtextcontent = currentdiv.textContent;
                            currentdiv.innerHTML = "";
                            currentdiv.textContent = currentdivtextcontent;
                            currentdiv.classList.add('syntaxcomment');
                            currentdiv = currentdiv.nextElementSibling;
                        }else {
                            break;
                        }
                    }
                }
   
            }

            function checkifcontinuedcomment2() {
                const testthisregex = /<!--[^-]*$/g;
                if (!testthisregex.test(code)) {
                    return;
                }

                let currentdiv = div;
                while (currentdiv.nextElementSibling) {
                    currentdiv = currentdiv.nextElementSibling;

                    if (!currentdiv.textContent.includes('-->')) {
                        let currentdivtextcontent = currentdiv.textContent;
                        currentdiv.innerHTML = "";

                        currentdiv.textContent = currentdivtextcontent;
                        currentdiv.classList.add('syntaxhtmlcomment');
                    } else {
                        let commentpart = currentdiv.textContent.split('-->')[0] + "-->";
                        let notcommentpart = currentdiv.textContent.split('-->')[1];
                        currentdiv.innerHTML = "";
                        let newspan = document.createElement('span');
                        newspan.className = "syntaxhtmlcomment";
                        newspan.textContent = commentpart;
                        const container = document.createDocumentFragment();
                        container.appendChild(newspan);
                        currentdiv.appendChild(container);
                        const container2 = document.createDocumentFragment();

                        processText(notcommentpart, container2, spatterns);
                        currentdiv.appendChild(container2);
                        break;
                    }
                }
            }

            function processDiv2() {
                const content = code;
                const regexCommentEnd = /.*-->.*$/;
                const regexCommentStart = /.*<!--/;

                if (regexCommentEnd.test(content) && !regexCommentStart.test(content.slice(content.indexOf('-->') + 3))) {
                    let nextSibling = div;
                    while (nextSibling && nextSibling.classList.contains('syntaxhtmlcomment')) {
                        nextSibling.classList.remove('syntaxhtmlcomment');
                        const container2 = document.createDocumentFragment();
                        let nextSiblingTextContent = nextSibling.textContent;
                        nextSibling.innerHTML = "";
                        processText(nextSiblingTextContent, container2, spatterns);
                        nextSibling.appendChild(container2);
                        nextSibling = nextSibling.nextElementSibling;
                    }
                }
            }

            function checkcomments2(div, text) {
                let regextotest = /<!--(?!.*-->)/g;
                let regextotest2 = /(?<!<!--.*)-->$/g;
                if (div.nextElementSibling && div.nextElementSibling.classList.contains('syntaxhtmlcomment') && !div.classList.contains('syntaxhtmlcomment') && !regextotest.test(text)) {
                    let nextelement = div.nextElementSibling;
                    while (nextelement && nextelement.classList.contains('syntaxhtmlcomment')) {
                        nextelement.classList.remove('syntaxhtmlcomment');
                        const container = document.createDocumentFragment();
                        processText(nextelement.textContent, container, spatterns);
                        nextelement.innerHTML = "";
                        nextelement.appendChild(container);
                        nextelement = nextelement.nextElementSibling;
                    }
                } else if (div.previousElementSibling && div.previousElementSibling.classList.contains('syntaxhtmlcomment') && !div.classList.contains('syntaxhtmlcomment') && !regextotest2.test(text)) {
                    div.classList.add('syntaxhtmlcomment');
                    div.innerHTML = "";
                    div.textContent = text;
                    let currentdiv = div.nextElementSibling;
                    while (currentdiv && !currentdiv.textContent.includes('-->')) {
                        if (!currentdiv.classList.contains('syntaxhtmlcomment')) {
                            let currentdivtextcontent = currentdiv.textContent;
                            currentdiv.innerHTML = "";
                            currentdiv.textContent = currentdivtextcontent;
                            currentdiv.classList.add('syntaxhtmlcomment');
                            currentdiv = currentdiv.nextElementSibling;
                        } else {
                            break;
                        }
                    }
                }
            }

            if (!div.classList.contains('syntaxhtmlcomment')){
                checkifcontinuedcomment();
            }
            if (!div.classList.contains('syntaxcomment')){
                checkifcontinuedcomment2();
            }
            if (!div.classList.contains('syntaxhtmlcomment')){
                processDiv();
            }
            if (!div.classList.contains('syntaxcomment')){
                processDiv2();
            }
            if (!div.classList.contains('syntaxcomment') && !div.classList.contains('syntaxhtmlcomment') && !div.classList.contains('syntaxstring')){
                const container = document.createDocumentFragment();
                processText(code, container, spatterns);
                div.appendChild(container);
            }else {
                div.textContent = code;
            }
            if (!div.classList.contains('syntaxhtmlcomment')){
                checkcomments(div, code);
            }
            if (!div.classList.contains('syntaxcomment')){
                checkcomments2(div, code);
            }
        }

        function handleKeyDown(event) {
            let celine = section.querySelector('.code-editor-line:focus');
            function getCursorPosition(element) {
                const selection = window.getSelection();
                if (!selection.rangeCount) return null;
                    const range = selection.getRangeAt(0);
                    const preCaretRange = range.cloneRange();
                    preCaretRange.selectNodeContents(element);
                    preCaretRange.setEnd(range.startContainer, range.startOffset);
                    const startOffset = preCaretRange.toString().length;
                    return startOffset;
                }

                function setCursorPosition(element, position) {
                    const selection = window.getSelection();
                    selection.removeAllRanges();

                    const range = document.createRange();
                    let currentOffset = 0;

                    function traverseNodes(node) {
                        if (node.nodeType === Node.TEXT_NODE) {
                            const nextOffset = currentOffset + node.textContent.length;
                            if (currentOffset <= position && position <= nextOffset) {
                                range.setStart(node, position - currentOffset);
                                range.collapse(true);
                                return true;
                            }
                            currentOffset = nextOffset;
                        } else if (node.nodeType === Node.ELEMENT_NODE) {
                            for (let i = 0; i < node.childNodes.length; i++) {
                                if (traverseNodes(node.childNodes[i])) return true;
                            }
                        }
                        return false;
                    }
                    traverseNodes(element);
                    selection.addRange(range);
                }

                const cursorPosition = getCursorPosition(celine);
                const ctext = celine.textContent;
                if (ctext.trim() != ""){
                    celine.innerHTML = "";
                    celine.textContent = ctext;
                    if (cursorPosition !== null) {
                        setCursorPosition(celine, cursorPosition);
                    }
                }
                if (event.key === 'Enter') {
                    event.preventDefault();
                    
                    if (celine) {
                    if (celine.classList.contains('hiddenlinesparent')){
                        celine.classList.remove('hiddenlinesparent');
                        showHiddenElements(celine);
                    }
                    correntids += 1;
                    const newid = correntids;
                    let newpast = [];
                    lasteventsparentsection = section;
                    let pastelement = {
                        element: celine,
                        type: "text",
                        text: celine.textContent
                    };
                    newpast.push(pastelement);
                    const text = celine.textContent;
       
                    const selection = window.getSelection();
                    const range = selection.getRangeAt(0);
                    const cursorOffset = range.startOffset;

                    const textBehindCursor = text.substring(cursorOffset);
                    celine.textContent = text.substring(0, cursorOffset);

                    let lastsignincelineelement = getLastNonSpaceCharInText(celine.textContent);
                    let firstsignintextbehindcursor = getFirstNonSpaceCharInTextaftercursor(textBehindCursor);
                    let spaces = "";
                    for (let i = 0; i < celine.textContent.length; i++) {
                        const character = celine.textContent[i];
                        if (character === " " || character === "\u00A0") {
                            spaces += "\u00A0";
                        } else {
                            break;
                        }
                    }
                    let firstspaces = spaces;
                    const openingsignsincssandjavascript = ["{", "[", "(", ":"];
                    const clisingsignsincssandjavascript = ["}", "]", ")", "\""];
                    if (openingsignsincssandjavascript.includes(lastsignincelineelement)) {
                        spaces += "\u00A0\u00A0\u00A0\u00A0";
                    }
                    const newline = document.createElement('div');
                    newline.setAttribute('contenteditable', 'true');
                    newline.id = newid;
                    newline.classList.add('code-editor-line');
                    
                    if (clisingsignsincssandjavascript.includes(firstsignintextbehindcursor)){
                        newline.textContent = spaces;
                    }else {
                        newline.textContent = spaces + textBehindCursor;
                    }
                    
                    if (celine.classList.contains('syntaxhtmlcomment')){
                        newline.classList.add('syntaxhtmlcomment');
                    }
                    if (celine.classList.contains('syntaxcomment')) {
                        newline.classList.add('syntaxcomment');
                    }
                    if (celine.classList.contains('syntaxstring')) {
                        newline.classList.add('syntaxstring');
                    }
                    if (celine.nextElementSibling && celine.nextElementSibling.classList.contains('syntaxstring')) {
                        newline.classList.add('syntaxstring');
                    }
                    let regextotest = /\/\*(?!.*\*\/)/g;
                    if (regextotest.test(celine)){
                        newline.classList.add('syntaxcomment');
                    }
                    let regextotest2 = /(?<!<!--.*)-->$/g;
                    if (regextotest.test(celine)) {
                        newline.classList.add('syntaxhtmlcomment');
                    }
                    celine.insertAdjacentElement('afterend', newline);
                    let pastelemen4 = {
                        element: newline,
                        type: "create",
                        index: getElementIndexInParent(newline)
                    };
                    newpast.push(pastelemen4);
                    
                    if (clisingsignsincssandjavascript.includes(firstsignintextbehindcursor)){
                        const newline2 = document.createElement('div');
                        newline2.setAttribute('contenteditable', 'true');
                        newline2.id = parseInt(newid);
                        newline2.classList.add('code-editor-line');
                        newline2.textContent = firstspaces + textBehindCursor;
                        newline.insertAdjacentElement('afterend', newline2);
                        let pastelement = {
                            element: newline2,
                            type: "create",
                            index: getElementIndexInParent(newline2)
                        };
                        newpast.push(pastelement);
                    }
                    newline.focus();
                    const newRange = document.createRange();
                    newRange.setStart(newline.firstChild || newline, spaces.length);
                    newRange.collapse(true);
                    selection.removeAllRanges();
                    selection.addRange(newRange);
                    addJsSyntaxHighlighting(celine);
                    if (newpast.length > 0) {
                        if (!pastevents[lasteventsparentsection.id]) {
                            pastevents[lasteventsparentsection.id] = [];
                        }
                        pastevents[lasteventsparentsection.id].push(newpast);
                        enablepastbtn();
                    }
                    updateSelectedClasses();
                }
            }


            if (event.key === 'Backspace') {
                let newpast = [];
                lasteventsparentsection = section;
                function handleBackspaceWithMatchingCharacters(event) {
                if (event.key !== 'Backspace') return;
                const selection = window.getSelection();
                if (!selection.rangeCount) return;
                const range = selection.getRangeAt(0);
                const cursorOffset = range.startOffset;
                const celine = range.startContainer;

                if (!celine || celine.nodeType !== Node.TEXT_NODE) return;
    
                let pastelemen3 = {
                    element: celine,
                    type: "text",
                    text: celine.textContent
                };
                newpast.push(pastelemen3);

                const text = celine.textContent;

                const matchingPairs = {
                    '(': ')',
                    '{': '}',
                    '[': ']',
                    '"': '"',
                    "'": "'",
                    '`': '`'
                };

                const previousChar = text.charAt(cursorOffset - 1);
                const nextChar = text.charAt(cursorOffset);

                if (matchingPairs[previousChar] === nextChar) {
                    event.preventDefault();
                    document.querySelectorAll('.suggestioncontainer').forEach(suggestioncontainerv => {
                        suggestioncontainerv.remove();
                    });

                    const updatedText = text.slice(0, cursorOffset - 1) + text.slice(cursorOffset + 1);
                    celine.textContent = updatedText;

                    const newCursorPosition = cursorOffset - 1;
                    range.setStart(celine, newCursorPosition);
                    range.collapse(true);

                    selection.removeAllRanges();
                    selection.addRange(range);
                }
            }

            handleBackspaceWithMatchingCharacters(event);
            let selection = window.getSelection();
            let range = selection.getRangeAt(0);

            if (range.startOffset === 0 && celine) {
                event.preventDefault();
                document.querySelectorAll('.suggestioncontainer').forEach(suggestioncontainerv => {
                    suggestioncontainerv.remove();
                });

                    const previousLine = celine.previousElementSibling;
                    if (previousLine) {
                        newpast = [];
                        updateSelectedClasses();

                        const currentLineText = celine.textContent;
                        const previousLineText = previousLine.textContent;

                        let pastelement2 = {
                            element: celine,
                            type: "delete",
                            index: getElementIndexInParent(celine)
                        };
                        newpast.push(pastelement2);
                        if (celine.classList.contains('hiddenlinesparent')){
                            celine.classList.remove('hiddenlinesparent');
                            showHiddenElements(celine);
                        }
                        celine.remove();
                        if (!section.querySelector('.code-editor-line.selected')) {
                            section.querySelectorAll('.eslbtn').forEach(dline => {
                                if (!dline.classList.contains('disabled')){
                                    dline.classList.add('disabled');
                                }
                            });
                        }

                        previousLine.textContent = previousLineText + currentLineText;

                        const newRange = document.createRange();
                        const textLength = previousLine.textContent.length;

                        newRange.setStart(previousLine.firstChild || previousLine, textLength - currentLineText.length);
                        newRange.collapse(true);

                        selection.removeAllRanges();
                        selection.addRange(newRange);
                    }
                }
                if (newpast.length > 0) {
                    if (!pastevents[lasteventsparentsection.id]) {
                        pastevents[lasteventsparentsection.id] = [];
                    }
                    pastevents[lasteventsparentsection.id].push(newpast);
                    enablepastbtn();
                }
            }

            if (event.key === '>') {
                let newpast = [];
                lasteventsparentsection = section;
                let pastelement = {
                    element: celine,
                    type: "text",
                    text: celine.textContent
                };
                newpast.push(pastelement);
                if (newpast.length > 0) {
                    if (!pastevents[lasteventsparentsection.id]) {
                        pastevents[lasteventsparentsection.id] = [];
                    }
                    pastevents[lasteventsparentsection.id].push(newpast);
                    enablepastbtn();
                }
                const selfClosingTags = [
                    "br",
                    "img",
                    "input",
                    "hr",
                    "meta",
                    "link",
                    "area",
                    "base",
                    "source",
                    "track",
                    "col",
                    "wbr",
                    "command",
                    "basefont",
                    "frame"
                ];

                let selection = window.getSelection();
                let range = selection.getRangeAt(0);
                let cursorOffset = range.startOffset;

                let text = celine.textContent.substring(0, cursorOffset);
                let openTagMatch = text.match(/<(\w+)([^>]*)$/);

                if (openTagMatch) {
                    let tagName = openTagMatch[1];
                    if (selfClosingTags.includes(tagName)){
                        return;
                    }else {
                        event.preventDefault();
                    }
                    let tagEnd = `</${tagName}>`;
                    let textAfterCursor = celine.textContent.substring(cursorOffset);
                    celine.textContent = text + '>' + tagEnd + textAfterCursor;

                    range.setStart(celine.firstChild, cursorOffset + 1);
                    range.collapse(true);
                    selection.removeAllRanges();
                    selection.addRange(range);
                }
            }

            let selection = window.getSelection();

            let range = selection.getRangeAt(0);
            let cursorOffset = range.startOffset;

            function insertClosingCharacter(openingChar, closingChar) {
                let newpast2 = [];
                lasteventsparentsection = section;
                let pastelement2 = {
                    element: celine,
                    type: "text",
                    text: celine.textContent
                };
                newpast2.push(pastelement2);
                if (newpast2.length > 0) {
                    if (!pastevents[lasteventsparentsection.id]) {
                        pastevents[lasteventsparentsection.id] = [];
                    }
                    pastevents[lasteventsparentsection.id].push(newpast2);
                    enablepastbtn();
                }
                let text = celine.textContent;
                let textAfterCursor = text.substring(cursorOffset);
                celine.textContent = text.substring(0, cursorOffset) + openingChar + closingChar + textAfterCursor;

                range.setStart(celine.firstChild, cursorOffset + 1);
                range.collapse(true);
                selection.removeAllRanges();
                selection.addRange(range);
            }

            if (event.key === '{') {
                event.preventDefault();
                insertClosingCharacter('{', '}');
            }

            if (event.key === '[') {
                event.preventDefault();
                insertClosingCharacter('[', ']');
            }

            if (event.key === '(') {
                event.preventDefault();
                insertClosingCharacter('(', ')');
            }

            if (event.key != "'" && event.key != "\"" && event.key != "`" && event.key != "(" && event.key != "{" && event.key != "[" && event.key != "“" && event.key != "‚" && event.key != ">" && event.key != "„" && event.key != "Backspace" && event.key != "‘" && event.key != "Enter" && event.key != "}" && event.key != "]" && event.key != ")" && event.key != ";"){
                let newpast2 = [];
                lasteventsparentsection = section;
                let pastelement2 = {
                    element: celine,
                    type: "text",
                    text: celine.textContent
                };
                newpast2.push(pastelement2);
                if (newpast2.length > 0) {
                    if (!pastevents[lasteventsparentsection.id]) {
                        pastevents[lasteventsparentsection.id] = [];
                    }
                    pastevents[lasteventsparentsection.id].push(newpast2);
                    enablepastbtn();
                }
            }

            function checkAndSkipClosingCharacter(closingChar) {
                let text = celine.textContent;
                let nextChar = text.charAt(cursorOffset);
                if (nextChar === closingChar) {
                    event.preventDefault();
                    range.setStart(celine.firstChild, cursorOffset + 1);
                    range.collapse(true);
                    selection.removeAllRanges();
                    selection.addRange(range);
                }else {
                    let newpast2 = [];
                    lasteventsparentsection = section;
                    let pastelement2 = {
                        element: celine,
                        type: "text",
                        text: celine.textContent
                    };
                    newpast2.push(pastelement2);
                    if (newpast2.length > 0) {
                        if (!pastevents[lasteventsparentsection.id]) {
                            pastevents[lasteventsparentsection.id] = [];
                        }
                        pastevents[lasteventsparentsection.id].push(newpast2);
                        enablepastbtn();
                    }
                }
            }

            function checkAndSkipornotClosingCharacter(closingChar) {
                let text = celine.textContent;
                let nextChar = text.charAt(cursorOffset);
                if (nextChar === closingChar) {
                    event.preventDefault();
                    range.setStart(celine.firstChild, cursorOffset + 1);
                    range.collapse(true);
                    selection.removeAllRanges();
                    selection.addRange(range);
                } else {
                    let newpast2 = [];
                    lasteventsparentsection = section;
                    let pastelement2 = {
                        element: celine,
                        type: "text",
                        text: celine.textContent
                    };
                    newpast2.push(pastelement2);
                    if (newpast2.length > 0) {
                        if (!pastevents[lasteventsparentsection.id]) {
                            pastevents[lasteventsparentsection.id] = [];
                        }
                        pastevents[lasteventsparentsection.id].push(newpast2);
                        enablepastbtn();
                    }
                    event.preventDefault();
                    insertClosingCharacter(closingChar, closingChar);
                }
            }
            if (event.key === ']') {
                checkAndSkipClosingCharacter(']');
            }
            if (event.key === '}') {
                checkAndSkipClosingCharacter('}');
            }
            if (event.key === '"') {
                checkAndSkipornotClosingCharacter('"');
            }
            if (event.key === "'") {
                checkAndSkipornotClosingCharacter("'");
            }
            if (event.key === ')') {
                checkAndSkipClosingCharacter(')');
            }
            if (event.key === ';') {
                checkAndSkipClosingCharacter(';');
            }
            if (event.key === '„') {
                checkAndSkipornotClosingCharacter('"');
            }
            if (event.key === '“') {
                checkAndSkipornotClosingCharacter('"');
            }
            if (event.key === "‘") {
                checkAndSkipornotClosingCharacter('\'');
            }
            if (event.key === "‚") {
                checkAndSkipornotClosingCharacter('\'');
            }
        }
        function updateSelectedClasses() {
            const lines = section.querySelectorAll('.code-editor-line');
            
            if (!section.querySelectorAll('.code-editor-line.selected')){
                return;
            }
            
            updateimportantpinClasses();

            lines.forEach((line, index) => {
                const isSelected = line.classList.contains('selected');

                const hasAbove = index > 0 && lines[index - 1].classList.contains('selected');
                const hasBelow = index < lines.length - 1 && lines[index + 1].classList.contains('selected');

                if (line.classList.contains('topSelected')){
                    line.classList.remove('topSelected');
                }
                if (line.classList.contains('bottomSelected')){
                    line.classList.remove('bottomSelected');
                }
                if (line.classList.contains('middleSelected')){
                    line.classList.remove('middleSelected');
                }
                if (line.classList.contains('singleSelected')){
                    line.classList.remove('singleSelected');
                }

                if (isSelected) {
                    if (!hasAbove && !hasBelow) {
                        line.classList.add('singleSelected');
                    } else if (!hasAbove && hasBelow) {
                        line.classList.add('topSelected');
                    } else if (hasAbove && !hasBelow) {
                        line.classList.add('bottomSelected');
                    } else if (hasAbove && hasBelow) {
                        line.classList.add('middleSelected');
                    }
                }
            });
        }
        function updateimportantpinClasses() {
            const lines = section.querySelectorAll('.code-editor-line');
    
            if (!section.querySelectorAll('.code-editor-line.importantpin')) {
                return;
            }

            lines.forEach((line, index) => {
                const isSelected = line.classList.contains('importantpin');

                const hasAbove = index > 0 && lines[index - 1].classList.contains('importantpin') && !lines[index - 1].classList.contains('selected');
                const hasBelow = index < lines.length - 1 && lines[index + 1].classList.contains('importantpin') && !lines[index + 1].classList.contains('selected');
                if (line.classList.contains('topimportantpin')) {
                    line.classList.remove('topimportantpin');
                }
                if (line.classList.contains('bottomimportantpin')) {
                    line.classList.remove('bottomimportantpin');
                }
                if (line.classList.contains('middleimportantpin')) {
                    line.classList.remove('middleimportantpin');
                }
                if (line.classList.contains('singleimportantpin')) {
                    line.classList.remove('singleimportantpin');
                }

                if (isSelected) {
                    if (!hasAbove && !hasBelow) {
                        line.classList.add('singleimportantpin');
                    } else if (!hasAbove && hasBelow) {
                        line.classList.add('topimportantpin');
                    } else if (hasAbove && !hasBelow) {
                        line.classList.add('bottomimportantpin');
                    } else if (hasAbove && hasBelow) {
                        line.classList.add('middleimportantpin');
                    }
                }
            });
        }
        function setupAutocomplete(inputElement) {
            if (!section){
                return;
            }
            if (!section.classList.contains('autocompleteenabled')){
                return;
            }
            if (!inputElement) {
                return;
            }
            if (!inputElement.parentElement) {
                return;
            }
            if (inputElement.textContent == ""){
                return;
            }
            function getCursorPosition(element) {
                const selection = window.getSelection();
                if (!selection.rangeCount) return null;
                const range = selection.getRangeAt(0);
                const preCaretRange = range.cloneRange();
                preCaretRange.selectNodeContents(element);
                preCaretRange.setEnd(range.startContainer, range.startOffset);
                const startOffset = preCaretRange.toString().length;

                return startOffset;
            }

            function setCursorPosition(element, position) {
                const selection = window.getSelection();
                selection.removeAllRanges();

                const range = document.createRange();
                let currentOffset = 0;

                function traverseNodes(node) {
                    if (node.nodeType === Node.TEXT_NODE) {
                        const nextOffset = currentOffset + node.textContent.length;
                        if (currentOffset <= position && position <= nextOffset) {
                            range.setStart(node, position - currentOffset);
                            range.collapse(true);
                            return true;
                        }
                        currentOffset = nextOffset;
                    } else if (node.nodeType === Node.ELEMENT_NODE) {
                        for (let i = 0; i < node.childNodes.length; i++) {
                            if (traverseNodes(node.childNodes[i])) return true;
                        }
                    }
                    return false;
                }

                traverseNodes(element);
                selection.addRange(range);
            }

            const cursorPosition = getCursorPosition(inputElement);
            const ctext = inputElement.textContent;
            if (ctext.trim() != "") {
                inputElement.innerHTML = "";
                inputElement.textContent = ctext;
                if (cursorPosition !== null) {
                    setCursorPosition(inputElement, cursorPosition);
                }
            }
            let newpast2 = [];
            lasteventsparentsection = section;
            let pastelement2 = {
                element: inputElement,
                type: "text",
                text: inputElement.textContent
            };
            newpast2.push(pastelement2);
            if (newpast2.length > 0) {
                if (!pastevents[lasteventsparentsection.id]) {
                    pastevents[lasteventsparentsection.id] = [];
                }
                pastevents[lasteventsparentsection.id].push(newpast2);
                enablepastbtn();
            }
            const cssKeywordsAndProperties = [
                "color", "background", "font-size", "margin", "padding", "border", "display", "position", 
                "grid", "flex", "align-items", "justify-content", "z-index", "width", "height", "max-width", 
                "max-height", "min-width", "min-height", "box-sizing", "border-radius", "overflow", "opacity", 
                "visibility", "box-shadow", "text-shadow", "font-family", "font-weight", "font-style", "line-height", 
                "letter-spacing", "word-spacing", "text-align", "text-decoration", "text-transform", "white-space", 
                "vertical-align", "list-style", "cursor", "filter", "transition", "animation", "background-color", 
                "background-image", "background-position", "background-size", "background-repeat", "background-attachment", 
                "border-top", "border-right", "border-bottom", "border-left", "border-color", "border-style", 
                "border-width", "border-collapse", "border-spacing", "position", "top", "right", "bottom", "left", 
                "float", "clear", "clip", "resize", "box-align", "align-content", "justify-items", "align-self", 
                "grid-template-columns", "grid-template-rows", "grid-column", "grid-row", "grid-gap", "grid-template-areas", 
                "gap", "column-gap", "row-gap", "order", "flex-wrap", "flex-direction", "flex-basis", "flex-grow", "flex-shrink", 
                "justify-self", "align-items", "align-content", "object-fit", "object-position", "clip-path", "filter", 
                "transform", "transform-origin", "perspective", "backface-visibility", "z-index", "box-sizing", "border-box", 
                "content", "counter-reset", "counter-increment", "quotes", "writing-mode", "direction", "text-orientation", 
                "scroll-behavior", "resize", "user-select", "contain", "will-change", "pointer-events", "clip-path", "object-fit",

                "@import", "@media", "@font-face", "@keyframes", "@supports", "@page", 
                "@charset", "@namespace", "@document", "@viewport", "@counter-style",

                ":hover", ":focus", ":active", ":visited", ":link", ":checked", ":disabled", 
                ":first-child", ":last-child", ":nth-child()", ":not()", ":root", ":before", ":after",
    
                "::before", "::after", "::first-letter", "::first-line", "::selection", 
                "::placeholder"
            ];

            const jsKeywords = [
                "function", "const", "let", "var", "if", "else", "return", "for", "while", "switch", "case", "break", 
                "continue", "class", "extends", "constructor", "super", "import", "export", "default", "try", "catch", 
                "finally", "throw", "debugger", "this", "new", "delete", "typeof", "instanceof", "in", "of", "void", 
                "yield", "await", "async", "true", "false", "null", "undefined", "NaN", "Infinity", "eval", "arguments", 
                "with", "eval", "alert", "confirm", "prompt", "Date", "Math", "JSON", "RegExp", "Function", "Object", 
                "Array", "String", "Number", "Boolean", "Symbol", "Set", "Map", "WeakSet", "WeakMap", "Promise", 
                "Iterator", "Generator", "GeneratorFunction", "Reflect", "Proxy", "Intl", "console", "document", "window",
    
                "getElementById", "getElementsByClassName", "getElementsByTagName", "querySelector", "querySelectorAll", 
                "createElement", "createTextNode", "appendChild", "removeChild", "replaceChild", "insertBefore", "cloneNode", 
                "setAttribute", "getAttribute", "removeAttribute", "hasAttribute", "focus", "blur", "scrollTo", "scrollIntoView", 
                "addEventListener", "removeEventListener", "dispatchEvent", "setInterval", "setTimeout", "clearInterval", "clearTimeout",
    
                "style", "cssText", "getComputedStyle", "setProperty", "getPropertyValue", "removeProperty", "getBoundingClientRect",
                "visibility", "display", "position", "width", "height", "margin", "padding", 
                "border", "backgroundColor", "color", 
                "fontSize", "fontWeight", "fontFamily", "textAlign", "textDecoration", 
                "lineHeight", "textTransform", "borderRadius", "overflow", "zIndex", 
                "boxShadow", "opacity", "cursor", "clipPath", "transition", 
                "animation", "transform", "backgroundImage", "backgroundSize", 
                "backgroundRepeat", "backgroundPosition", "borderWidth", "borderStyle", 
                "borderColor", "outline", "outlineWidth", "outlineColor", "flex", 
                "flexDirection", "alignItems", "justifyContent", "gap", "gridTemplateColumns", 
                "gridTemplateRows", "gridGap", "order", "alignSelf", "overflowX", 
                "overflowY", "whiteSpace", "wordBreak", "wordSpacing", "letterSpacing"
            ];

            const htmlTags = [
                "<div>", "<span>", "<input>", "<button>", "<form>", "<select>", "<option>", "<table>", "<thead>", 
                "<tbody>", "<tr>", "<td>", "<ul>", "<ol>", "<li>", "<a>", "<p>", "<h1>", "<h2>", "<h3>", "<h4>", 
                "<h5>", "<h6>", "<article>", "<section>", "<header>", "<footer>", "<nav>", "<aside>", "<main>", "<mark>", 
                "<small>", "<strong>", "<em>", "<i>", "<b>", "<u>", "<code>", "<pre>", "<blockquote>", "<cite>", "<time>", 
                "<abbr>", "<address>", "<del>", "<ins>", "<sub>", "<sup>", "<figure>", "<figcaption>", "<details>", "<summary>", 
                "<progress>", "<meter>", "<canvas>", "<svg>", "<path>", "<g>", "<circle>", "<rect>", "<line>", "<polygon>", 
                "<polyline>", "<text>", "<style>", "<link>", "<meta>", "<title>", "<base>", "<script>", "<noscript>", "<iframe>", 
                "<audio>", "<video>", "<source>", "<track>", "<object>", "<param>", "<embed>", "<picture>", "<map>", "<area>", 
                "<canvas>", "<iframe>", "<iframe>", "<svg>", "<use>", "<iframe>", "<style>", "<link>", "<input>", "<form>"
            ];
            
            const commandsice = [
                "/ALERT",
                "/ARROWBOTTOMLEFT",
                "/ARROWBOTTOMRIGHT",
                "/ARROWDOWN",
                "/ARROWGOLEFT",
                "/ARROWGORIGHT",
                "/ARROWLEFT",
                "/ARROWRIGHT",
                "/ARROWTOPLEFT",
                "/ARROWTOPRIGHT",
                "/ARROWUP",
                "/BIGSPARK",
                "/BOTTOMLEFTEDGE",
                "/BOTTOMRIGHTEDGE",
                "/SMALLCHECKMARK",
                "/EMPTYCIRCLE",
                "/COPYRIGHT",
                "/BIGCROSS",
                "/CROSSINCIRKLE",
                "/CROSSINSQUARE",
                "/CROSSNOTINSQUARE",
                "/CUTOUTCIRCLE",
                "/DIAMOND",
                "/EMPTYSPARK",
                "/EMPTYSQUARE",
                "/EMPTYSTAR",
                "/EMPTYTRIANGLELEFT",
                "/EMPTYTRIANGLEDOWN",
                "/EMPTYTRIANGLERIGHT",
                "/EMPTYTRIANGLETOP",
                "/FILLEDCIRCLE",
                "/HEART",
                "/INFINITE",
                "/MAGNIFYINGGLASS",
                "/MINUS",
                "/MOONLEFT",
                "/MOONRIGHT",
                "/MOVABLE",
                "/EIGHTHNOTE",
                "/BEAMEDNOTE",
                "/CHORDSYMBOL",
                "/QUARTERNOTE",
                "/PAPERPLANE",
                "/PENCIL",
                "/PLUS",
                "/REFRESHRIGHT",
                "/REFRESHLEFT",
                "/REGISTERED",
                "/SIDEBAR",
                "/SMALLCROSS",
                "/FILLEDSPARK",
                "/FILLEDSQUARE",
                "/FILLEDSTAR",
                "/SUN",
                "/TOPRIGHTEDGE",
                "/TOPLEFTEDGE",
                "/TRADEMARK",
                "/TRIANGLELEFT",
                "/TRIANGLERIGHT",
                "/TRIANGLEDOWN",
                "/TRIANGLETOP",
                "/UPDOWNLEFTARROW",
                "/:func",
                "/:if",
                "/:for",
                "/:try",
                "/:div",
                "/:btn",
                "/:span",
                "/:img",
                "/:p",
                "/:h1",
                "/:h2",
                "/:h3",
                "/:h4",
                "/:h5",
                "/:h6",
                "/:at",
                "/:ul",
                "/:ol",
                "/:li",
                "/:table",
                "/:tr",
                "/:td",
                "/:th",
                "/:input",
                "/:form",
                "/:label",
                "/:iframe",
                "/:nav",
                "/:header",
                "/:footer",
                "/:sec",
                "/:article",
                "/:aside",
                "/:main"
            ];

            function extractUniqueValues(code) {
                const matches = new Set();

                const patterns = [
                    { regex: /class="([^"]+)"/g, prefix: '.' },
                    { regex: /id="([^"]+)"/g, prefix: '#' },
                    { regex: /function\s+([a-zA-Z0-9_$]+)\s*\(/g, prefix: '' },
                    { regex: /const\s+([a-zA-Z0-9_$]+)\s*=/g, prefix: '' },
                    { regex: /var\s+([a-zA-Z0-9_$]+)\s*=/g, prefix: '' },
                    { regex: /let\s+([a-zA-Z0-9_$]+)\s*=/g, prefix: '' },
                    { regex: /\.classList\.add\(\s*['"]([^'"]+)['"]\s*\)/g, prefix: '.' },
                    { regex: /\.className\s*=\s*['"]([^'"]+)['"]/g, prefix: '.' },
                    { regex: /\.id\s*=\s*['"]([^'"]+)['"]/g, prefix: '#' }
                ];

                patterns.forEach(({ regex, prefix }) => {
                    let match;
                    while ((match = regex.exec(code)) !== null) {
                        matches.add(prefix + match[1]);
                        matches.add(match[1]);
                    }
                });
    
                return Array.from(matches);
            }

            const uniquevalues = extractUniqueValues(inputElement.parentElement.textContent);


            const suggestionsList = [...uniquevalues, ...cssKeywordsAndProperties, ...jsKeywords, ...htmlTags];
            
            if (inputElement.textContent.includes('/') && document.querySelector('.commandsswitch')?.checked) {
                suggestionsList.push(...commandsice);
            }

            function getCursorPosition() {
                const range = window.getSelection().getRangeAt(0);
                const tempRange = range.cloneRange();
                tempRange.selectNodeContents(inputElement);
                tempRange.setEnd(range.endContainer, range.endOffset);
                return tempRange.toString().length;
            }

            function getLastWordBeforeCursor() {
                const cursorPos = getCursorPosition();
                const textBeforeCursor = inputElement.textContent.slice(0, cursorPos);
                const words = textBeforeCursor.split(/\s+/);
                return words.pop();
            }


            function filterSuggestions(word) {
                if (!word) return [];
                return suggestionsList.filter(item => item.startsWith(word) && item != word);
            }

            function createSuggestionsContainer() {
                let container = document.querySelector(".options-container");
                if (!container) {
                    container = document.createElement("div");
                    container.className = "options-container";
                    container.classList.add('suggestioncontainer');
                    container.style.position = "absolute";
                    container.style.backgroundColor = "var(--background-color)";
                    container.style.border = "1px solid var(--rectangleborder)";
                    container.style.padding = "5px";
                    container.style.borderLeft = "none";
                    container.style.borderRight = "none";
                    container.style.maxHeight = "100px";
                    container.style.borderRadius = "0";
                    container.style.boxShadow = "none";
                    positionoptionsElementBelow(container, section.querySelector('.editor-selected-line-btns'));
            
                    container.style.overflowY = "scroll";
                    document.body.appendChild(container);
                }
                return container;
            }

            function positionSuggestionsContainer(container) {
                const rect = inputElement.getBoundingClientRect();
                const parentRect = inputElement.parentElement.getBoundingClientRect();
                const scrollOffset = inputElement.parentElement.scrollTop;

                container.style.left = `${rect.left}px`;
                container.style.top = `${rect.top + window.innerHeight * 0.03 + scrollOffset}px`;
            }
            function updateSuggestions() {
                const lastWord = getLastWordBeforeCursor();
                const suggestions = filterSuggestions(lastWord);
                const container = createSuggestionsContainer();

                container.innerHTML = "";
                performLongPressAction(inputElement);

                suggestions.forEach(suggestion => {
                    const option = document.createElement("div");
                    option.textContent = suggestion;
                    option.style.cursor = "pointer";
                    option.style.padding = "5px";
                    option.addEventListener("click", () => {
                        const cursorPos = cursorPosition;
                        const textBeforeCursor = inputElement.textContent.slice(0, cursorPos);
                        const regex = /\s/g;
                        const words = textBeforeCursor.split(regex);
                        let lastword = words.pop();
                        words.push(suggestion);
                        inputElement.textContent = words.join(" ") + inputElement.textContent.slice(cursorPos);
                        container.innerHTML = "";
                        container.remove();
                        if (!document.querySelector('.commandsswitch')?.checked) {
                            addJsSyntaxHighlighting(inputElement);
                            inputElement.focus();
                        }
                        if (cursorPosition !== null) {
                            setCursorPosition(inputElement, cursorPosition + suggestion.replace(lastword, '').length);
                        }
                        if (inputElement.textContent.includes('/') && document.querySelector('.commandsswitch')?.checked) {
                            replaceCommandsWithSymbols(inputElement);
                            preserveCursorAndHighlight(inputElement);
                        }
                    });
                    container.appendChild(option);
                });
                if (container.textContent == "") {
                    container.remove();
                    return;
                }
            }
            updateSuggestions();
        }
  </script>

</body>
</html>
