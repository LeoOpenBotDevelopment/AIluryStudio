<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="faviconico" rel="icon" href="AIlurylogo.ico" type="image/x-icon">
    <title>AIlury</title>
    <style>
    :root {
      --background-color: #fff;
      --white-color: #fff;
      --grey-color: #ccc;
      --lightgrey-color: #f0f0f0;/*fcfcfc*/
      --lightdarkgrey-color: #f4f4f4;
      --black-color: #000;
      --linenumber-color: #999999;
      --drakgrey-color: #f0f0f0;
      --selected-color: #e0f7e9;
      --safariheader-color: #dcdcdc;
      --safariheaderbackground-color: #f7f7f8;
      --urlbarbackground-color: #e6e6e6;
      --urlbarcolor-color: #333;
      --browsercontainerbackground-color: #fff;
      --browserheaderborderbottom-color: #ddd;
      --spencialbtnbackground-color: #ccc;
      --spencialbtncolor-color: #000;
      --overlayborder-color: #999999;
      --overlaycolor-color: #333;
      --rectangleborder: #e0e0e0;
      --overlaybackground-color: rgba(0, 0, 0, 0.3);
      --contentcontainer-color: #fff;
      --checkmark-color: #28a745;
      --seccontainerbackground-color: #fcfcfc;
      --seccontainerlinebackground-color: rgba(200, 200, 200, 0.5);
      --navdotcolor-color: #727272;
      --seccontainerlinecolor-color: #fff;
      --switchcheckedbackground-color: #007aff;
      --filepathinput-color: rgba(0, 0, 0, 0.5);
      --transparentshade-color: rgba(255, 255, 255, 0.2);
      --superselected-color: #28a745;
      --leftarrow-color: #28a745;
      --loadingbarbackground-color: rgba(0, 0, 0, 0.2);
      --loadingbarloadedbackground-color: #007aff;
      --fileloadingoverlaybackground-color: rgba(0, 0, 0, 0.5);
      --commandlistbackground-color: #fff;/*#f9f9f9*/
      --commandlistcolor-color: #555;
      --codeeditoreditbtn-color: #000;
      --codeeditoreditbtnbackground-color: #fff;
      --browseriframebackgroundcolor-color: #fff;
      --rectanglecolorcolor-color: #e0e0e0;
      --deviceborder-color: #333;
    }
     @media (prefers-color-scheme: dark) {
      :root {
        --background-color: #0d1117;
        --white-color: #0d1117;
          --grey-color: #2E2E2E;
          --lightgrey-color: #161b22;/*fcfcfc*/
          --lightdarkgrey-color: #4f4f4f;/*f4f4f4*/
          --black-color: #fff;
        --linenumber-color: #555555;
        --drakgrey-color: #161b22;/*0f0f0f*/
        --selected-color: #0E7F9E;
        --safariheader-color: #0c0c0c;
        --safariheaderbackground-color: #0E0F0E;
        --urlbarbackground-color: #161b22;/*3A3A3A*/
        --urlbarcolor-color: #fff;
        --browsercontainerbackground-color: #000;
        --browserheaderborderbottom-color: #161b22;
        --spencialbtnbackground-color: #161b22;/*121212*/
        --spencialbtncolor-color: #fff;
        --overlayborder-color: #161b22;/*121212*/
        --overlaycolor-color: #666;
        --rectangleborder: #161b22;/*0e0e0e*/
        --overlaybackground-color: rgba(0, 0, 0, 0.3);
        --contentcontainer-color: #0d1117;/*0c0c0c*/
        --checkmark-color: #0E7F9E;
        --seccontainerbackground-color: #161b22;/*0c0c0c*/
        --seccontainerlinebackground-color: rgba(50, 50, 50, 0.5);
        --navdotcolor-color: #161b22;/*999999*/
        --seccontainerlinecolor-color: #666;
        --switchcheckedbackground-color: #0156CD;/*0156CD*/
        --filepathinput-color: rgba(255, 255, 255, 0.5);
        --transparentshade-color: rgba(0, 0, 0, 0.2);
        --superselected-color: #28a745;
        --leftarrow-color: #28a745;
        --loadingbarbackground-color: rgba(0, 0, 0, 0.2);
        --loadingbarloadedbackground-color: #0156CD;
        --fileloadingoverlaybackground-color: rgba(0, 0, 0, 0.5);
    --commandlistbackground-color: #0d1117;/*010101*/
    --commandlistcolor-color: #A5A5A5;/*A5A5A5*/
    --codeeditoreditbtn-color: #fff;
    --codeeditoreditbtnbackground-color: #0d1117;/*000*/
    --browseriframebackgroundcolor-color: #000;
    --rectanglecolorcolor-color: #363736;
    --deviceborder-color: #161b22;
      }
      /*.helloween-theme {
        --background-color: #000;
        --white-color: #000;
          --grey-color: #2E2E2E;
          --lightgrey-color: #0c0c0c;
          --lightdarkgrey-color: #4f4f4f;
          --black-color: #fff;
        --linenumber-color: #555555;
        --drakgrey-color: #0f0f0f;
        --selected-color: rgba(255, 109, 0, 0.5);
        --safariheader-color: #0c0c0c;
        --safariheaderbackground-color: #0E0F0E;
        --urlbarbackground-color: #3A3A3A;
        --urlbarcolor-color: #fff;
        --browsercontainerbackground-color: #000;
        --browserheaderborderbottom-color: #121212;
        --spencialbtnbackground-color: #121212;
        --spencialbtncolor-color: #fff;
        --overlayborder-color: #121212;
        --overlaycolor-color: #666;
        --rectangleborder: rgba(255, 109, 0, 0.5);
        --overlaybackground-color: rgba(0, 0, 0, 0.5);
        --contentcontainer-color: #000;
        --checkmark-color: rgba(255, 109, 0, 0.5);
        --seccontainerbackground-color: #0c0c0c;
        --seccontainerlinebackground-color: rgba(50, 50, 50, 0.5);
        --navdotcolor-color: #999999;
        --seccontainerlinecolor-color: #666;
        --switchcheckedbackground-color: #FF6D00;
        --filepathinput-color: rgba(255, 255, 255, 0.5);
        --transparentshade-color: rgba(0, 0, 0, 0.2);
        --superselected-color: #28a745;
        --leftarrow-color: #28a745;
        --loadingbarbackground-color: rgba(0, 0, 0, 0.2);
        --loadingbarloadedbackground-color: #FF6D00;
        --fileloadingoverlaybackground-color: rgba(0, 0, 0, 0.5);
    --commandlistbackground-color: #010101;
    --commandlistcolor-color: #A5A5A5;
    --codeeditoreditbtn-color: #fff;
    --codeeditoreditbtnbackground-color: #000;
    --browseriframebackgroundcolor-color: #000;
    --rectanglecolorcolor-color: rgba(255, 109, 0, 0.5);
      }*/
    }
    .helloween-theme {
      --selected-color: rgba(255, 109, 0, 0.5);
      --rectangleborder: rgba(255, 109, 0, 0.5);
      --checkmark-color: rgba(255, 109, 0, 0.5);
      --switchcheckedbackground-color: #FF6D00;
      --loadingbarloadedbackground-color: #FF6D00;
      --rectanglecolorcolor-color: rgba(255, 109, 0, 0.5);
      --codeeditoreditbtn-color: rgba(255, 109, 0, 0.5);
      --lightgrey-color: rgba(255, 109, 0, 0.5);;
--drakgrey-color: rgba(255, 109, 0, 0.5);;
    }
    .winter-theme {
  --selected-color: rgba(173, 216, 230, 0.5);
  --rectangleborder: rgba(173, 216, 230, 0.5);
  --checkmark-color: rgba(173, 216, 230, 0.7);
  --switchcheckedbackground-color: #00bcd4;
  --loadingbarloadedbackground-color: #00acc1;
  --rectanglecolorcolor-color: rgba(173, 216, 230, 0.5);
  --codeeditoreditbtn-color: rgba(173, 216, 230, 0.5);
  --lightgrey-color: rgba(173, 216, 230, 0.5);
--drakgrey-color: rgba(173, 216, 230, 0.5);
}
.spring-theme {
  --selected-color: rgba(144, 238, 144, 0.5);
  --rectangleborder: rgba(144, 238, 144, 0.5);
  --checkmark-color: rgba(102, 187, 106, 0.7);
  --switchcheckedbackground-color: #4caf50;
  --loadingbarloadedbackground-color: #43a047;
  --rectanglecolorcolor-color: rgba(144, 238, 144, 0.5);
  --codeeditoreditbtn-color: rgba(144, 238, 144, 0.5);/*e8f5e9*/
  --lightgrey-color: rgba(144, 238, 144, 0.5);
--drakgrey-color: rgba(144, 238, 144, 0.5);
}
.ocean-theme {
  --selected-color: rgba(0, 123, 255, 0.5);
  --rectangleborder: rgba(0, 123, 255, 0.5);
  --checkmark-color: rgba(33, 150, 243, 0.7);
  --switchcheckedbackground-color: #2196f3;
  --loadingbarloadedbackground-color: #1e88e5;
  --rectanglecolorcolor-color: rgba(0, 123, 255, 0.5);
  --codeeditoreditbtn-color: rgba(0, 123, 255, 0.5);/*e3f2fd*/
  --lightgrey-color: rgba(0, 123, 255, 0.5);
--drakgrey-color: rgba(0, 123, 255, 0.5);
}
.autumn-theme {
  --selected-color: rgba(255, 165, 0, 0.5);
  --rectangleborder: rgba(255, 165, 0, 0.5);
  --checkmark-color: rgba(255, 152, 0, 0.7);
  --switchcheckedbackground-color: #ff9800;
  --loadingbarloadedbackground-color: #fb8c00;
  --rectanglecolorcolor-color: rgba(255, 165, 0, 0.5);
  --codeeditoreditbtn-color: rgba(255, 165, 0, 0.5);/*fff3e0*/
  --lightgrey-color: rgba(255, 165, 0, 0.5);
--drakgrey-color: rgba(255, 165, 0, 0.5);
}
.nightsky-theme {
  --selected-color: rgba(48, 63, 159, 0.5);
  --rectangleborder: rgba(48, 63, 159, 0.5);
  --checkmark-color: rgba(63, 81, 181, 0.7);
  --switchcheckedbackground-color: #3f51b5;
  --loadingbarloadedbackground-color: #3949ab;
  --rectanglecolorcolor-color: rgba(48, 63, 159, 0.5);
  --codeeditoreditbtn-color: rgba(48, 63, 159, 0.5);/*303f9f*/
  --lightgrey-color: rgba(48, 63, 159, 0.5);
--drakgrey-color: rgba(48, 63, 159, 0.5);
}
.desert-theme {
  --selected-color: rgba(237, 201, 175, 0.5);
  --rectangleborder: rgba(237, 201, 175, 0.5);
  --checkmark-color: rgba(255, 183, 77, 0.7);
  --switchcheckedbackground-color: #ffcc80;
  --loadingbarloadedbackground-color: #ffa726;
  --rectanglecolorcolor-color: rgba(237, 201, 175, 0.5);
  --codeeditoreditbtn-color: rgba(237, 201, 175, 0.5);/*fff8e1*/
  --lightgrey-color: rgba(237, 201, 175, 0.5);
--drakgrey-color: rgba(237, 201, 175, 0.5);
}
.galaxy-theme {
  --selected-color: rgba(138, 43, 226, 0.5);
  --rectangleborder: rgba(138, 43, 226, 0.5);
  --checkmark-color: rgba(103, 58, 183, 0.7);
  --switchcheckedbackground-color: #673ab7;
  --loadingbarloadedbackground-color: #5e35b1;
  --rectanglecolorcolor-color: rgba(138, 43, 226, 0.5);
  --codeeditoreditbtn-color: rgba(138, 43, 226, 0.5);/*f3e5f5*/
  --lightgrey-color: rgba(138, 43, 226, 0.5);
--drakgrey-color: rgba(138, 43, 226, 0.5);
}
.forest-theme {
  --selected-color: rgba(34, 139, 34, 0.5);
  --rectangleborder: rgba(34, 139, 34, 0.5);
  --checkmark-color: rgba(76, 175, 80, 0.7);
  --switchcheckedbackground-color: #4caf50;
  --loadingbarloadedbackground-color: #388e3c;
  --rectanglecolorcolor-color: rgba(34, 139, 34, 0.5);
  --codeeditoreditbtn-color: rgba(34, 139, 34, 0.5);/*e8f5e9*/
  --lightgrey-color: rgba(34, 139, 34, 0.5);
--drakgrey-color: rgba(34, 139, 34, 0.5);
}
.neon-theme {
  --selected-color: rgba(57, 255, 20, 0.5);
  --rectangleborder: rgba(57, 255, 20, 0.5);
  --checkmark-color: rgba(124, 252, 0, 0.7);
  --switchcheckedbackground-color: #76ff03;
  --loadingbarloadedbackground-color: #64dd17;
  --rectanglecolorcolor-color: rgba(57, 255, 20, 0.5);
  --codeeditoreditbtn-color: rgba(57, 255, 20, 0.5);/*64dd17*/
  --lightgrey-color: rgba(57, 255, 20, 0.5);
--drakgrey-color: rgba(57, 255, 20, 0.5);
}
.sunset-theme {
  --selected-color: rgba(255, 87, 34, 0.5);
  --rectangleborder: rgba(255, 87, 34, 0.5);
  --checkmark-color: rgba(244, 67, 54, 0.7);
  --switchcheckedbackground-color: #f44336;
  --loadingbarloadedbackground-color: #e53935;
  --rectanglecolorcolor-color: rgba(255, 87, 34, 0.5);
  --codeeditoreditbtn-color: rgba(255, 87, 34, 0.5);/*e53935*/
  --lightgrey-color: rgba(255, 87, 34, 0.5);
--drakgrey-color: rgba(255, 87, 34, 0.5);
}
.custom-theme {
  --background-color: #0d1117;
  --selected-color: #0E7F9E; /* Deep Pink */
  --rectangleborder: #161b22; /* Deep Pink */
  --checkmark-color: #0E7F9E; /* Hot Pink */
  --switchcheckedbackground-color: #0156CD; /* Hot Pink */
  --loadingbarloadedbackground-color: #0156CD; /* Deep Pink */
  --rectanglecolorcolor-color: #363736; /* Deep Pink */
  --codeeditoreditbtn-color: #fff;
  --codeeditoreditbtnbackground-color: #0d1117;
  --contentcontainer-color: #0d1117;
  --white-color: #0d1117;
  --lightgrey-color: #161b22;
  --drakgrey-color: #161b22;
  --black-color: #fff;
  --commandlistbackground-color: #0d1117;
  --spencialbtnbackground-color: #161b22;
  --deviceborder-color: #161b22;
  --commandlistcolor-color: #A5A5A5;
  --browserheaderborderbottom-color: #161b22;
  --browsercontainerbackground-color: #000;
  --browseriframebackgroundcolor-color: #000;
  --safariheaderbackground-color: #0E0F0E;
  --urlbarbackground-color: #161b22;/*3A3A3A*/
  --urlbarcolor-color: #fff;
}


    /*helloween-theme {
--background-color: #fff;
--white-color: #fff;
--grey-color: #ccc;
--lightgrey-color: #fcfcfc;
--lightdarkgrey-color: #f4f4f4;
--black-color: #000;
--linenumber-color: #999999;
--drakgrey-color: #f0f0f0;
--selected-color: rgba(255, 109, 0, 0.5);
--safariheader-color: #dcdcdc;
--safariheaderbackground-color: #f7f7f8;
--urlbarbackground-color: #e6e6e6;
--urlbarcolor-color: #333;
--browsercontainerbackground-color: #fff;
--browserheaderborderbottom-color: #ddd;
--spencialbtnbackground-color: #ccc;
--spencialbtncolor-color: #000;
--overlayborder-color: #999999;
--overlaycolor-color: #333;
--rectangleborder: rgba(255, 109, 0, 0.5);
--overlaybackground-color: rgba(0, 0, 0, 0.5);
--contentcontainer-color: #fff;
--checkmark-color: rgba(255, 109, 0, 0.5);
--seccontainerbackground-color: #fcfcfc;
--seccontainerlinebackground-color: rgba(200, 200, 200, 0.5);
--navdotcolor-color: #727272;
--seccontainerlinecolor-color: #fff;
--switchcheckedbackground-color: #FF6D00;
--filepathinput-color: rgba(0, 0, 0, 0.5);
--transparentshade-color: rgba(255, 255, 255, 0.2);
--superselected-color: #28a745;
--leftarrow-color: #28a745;
--loadingbarbackground-color: rgba(0, 0, 0, 0.2);
--loadingbarloadedbackground-color: #FF6D00;
--fileloadingoverlaybackground-color: rgba(0, 0, 0, 0.5);
--commandlistbackground-color: #fff;
--commandlistcolor-color: #555;
--codeeditoreditbtn-color: #000;
--codeeditoreditbtnbackground-color: #fff;
--browseriframebackgroundcolor-color: #fff;
--rectanglecolorcolor-color: rgba(255, 109, 0, 0.5);
}*/
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            height: 100vh;
            overflow: hidden;
            background-color: var(--background-color);/*#f7f9fc*/
        }

        .container {
            height: 100vh;
            width: 100vw; /* Enough width for 5 sections */
            display: flex;
            scroll-snap-type: x mandatory;
            overflow-x: hidden;
            transition: transform 0.5s ease-in-out;
            transition: 0.5s;

        }

        .sidebarenabled .container{
            width: 70vw;
        }

        .section {
            min-width: 100vw;
            height: 100vh;
            display: flex;
      flex-direction: column;
            /*justify-content: center;
            align-items: center;
            position: relative;
            font-size: 2rem;
            text-align: center;
      color: rgba(0, 0, 0, 0.5);*/
      background: transparent;
      transition: 0.5s;

    }

    .sidebarenabled .section{
        min-width: 70vw;
    }

  @keyframes swipein {
    0%{
        transform: translateY(-100vh);
      opacity: 0;
    }
    100%{
        transform: translateY(0);
      opacity: 1;
    }
  }
  @keyframes swipeout {
    0%{
        transform: translateY(0);
      opacity: 1;
    }
    100%{
        transform: translateY(150vh);
      opacity: 0;
    }
  }
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100vw;
            display: flex;
            height: 50px;
            background-color: var(--background-color);/*--seccontainerbackground-color*/
            /*box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.2);*/
            border-radius: 10px 10px 0 0;
            overflow-x: auto;
            scroll-behavior: smooth;
            scroll-snap-type: x mandatory;
            /*transition: height 0.4s ease, box-shadow 0.4s ease;*/
            transition: 0.3s;
        }

        .sidebarenabled .nav-bar{
            width: 70vw;
            left: 30vw;
            right: 0;
            border-radius: 0;
            border-top: 1px solid var(--rectangleborder);
            transition: 0.3s;
        }
        .sidebarenabled .allcontainer{
            border-radius: 0;
            border: 1px solid var(--rectangleborder);
            border-left: 0;
            transition: 0.3s;
        }

        .nav-bar.expanded {
            /*box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.3);*/
        background: var(--background-color);
        transition: 0.3s;
        }


        .nav-bar div {
            min-width: 100vw;
            height: 50px;
            background-color: var(--seccontainerbackground-color);/*--lightgrey-color*/
            color: var(--black-color);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            /*transition: background-color 0.3s, box-shadow 0.3s ease-in-out;*/
            scroll-snap-align: center;
            border-radius: 10px 10px 0 0;
            position: relative;
            overflow: hidden;
            transition: 0.3s;
        }

        .sidebarenabled .nav-bar div{
            min-width: 70vw;
            border-radius: 0;
            transition: 0.3s;
        }

        .nav-bar div:hover {
            background-color: var(--lightdarkgrey-color);
            /*box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);*/
            transition: 0.3s;
        }

        .nav-bar .active {
            background-color: var(--lightgrey-color);
            transition: 0.3s;
        }

        .expanded {
            height: 100vh;
            transition: 0.3s;
        }

        .nav-dot-content {
            display: none;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            width: 100%;
            text-align: center;
            color: var(--black-color);
            position: relative;
            /*box-shadow: 0 -10px 20px rgba(0, 0, 0, 0.3);*/
            border-radius: 10px;
            animation: fadeInUp 0.5s ease-in-out;
            transition: 0.3s;
        }

        .expanded .nav-dot-content {
            display: block;
            transition: 0.3s;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .input-field {
            margin-top: 20px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            width: 80%;
            font-size: 1rem;
            /*transition: box-shadow 0.3s ease;*/
            transition: 0.3s;
        }

        .input-field:focus {
            /*box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);*/
            outline: none;
            transition: 0.3s;
        }

    .seccontainer {
            width: 100vw;
            height: 85vh;
            background-color: var(--background-color); /*var(--seccontainerbackground-color);*/
            color: var(--black-color);
            /*transition: background-color 0.3s, box-shadow 0.3s ease-in-out;*/
            scroll-snap-align: center;
            border-radius: 10px 10px 0 0;
            position: fixed;
            overflow: hidden;
      bottom: 0;
      left: 0;
      animation: up 1s;
      padding: 10px;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      overflow-y: scroll;
      transition: 0.3s;
        }

        .sidebarenabled .seccontainer{
            width: 70vw;
            left: 30vw;
            right: 0;
            border-radius: 0;
            transition: 0.3s;
        }

    /*.seccontainer-line{
      display: flex;
      justify-content: space-between;
      width: 70vw;
      font-size: 1.5em;
      margin-bottom: 2vh;
      border-radius: 10px;
      background: var(--seccontainerlinebackground-color);
      padding: 10px;
      color: var(--seccontainerlinecolor-color);
    }*/

    @keyframes up{
      0%{ transform: translateY(100vh); }
      100%{ transform: translateY(0); }
    }

    .input-field {
            margin-top: 20px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            width: 80%;
            font-size: 1rem;
            /*transition: box-shadow 0.3s ease;*/
            transition: 0.3s;
        }

        .input-field:focus {
            /*box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);*/
            outline: none;
        }
    .switch {
        position: relative;
          display: inline-block;
          width: 51px;
          height: 31px;
          transition: 0.3s;
    }

    .switch input {
          opacity: 0;
          width: 0;
          height: 0;
          transition: 0.3s;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--grey-color);
        border-radius: 34px;
        transition: 0.3s;
    }

    .slider:before {
          position: absolute;
          content: "";
        height: 23px;
        width: 23px;
        left: 4px;
        bottom: 4px;
        background: var(--white-color);
        border-radius: 50%;
        transition: 0.3s;
    }

    input:checked + .slider {
        background: var(--switchcheckedbackground-color);/*linear-gradient(90deg, #ff0077, #7700ff);*//*#4cd964*/
    }

    input:checked + .slider:before {
        transform: translateX(20px);
        transition: 0.3s;
    }







    .code-editor-container {
      position: relative;
            height: calc(88vh - 100px);/*70vh*/
            width: 90vw;
            border-radius: 5px;
            background: var(--background-color);
      /*box-shadow: inset 0px 0px 20px var(--white-color);*/
          padding: 5px 4.5em;/*4.5em*/
          overflow-y: scroll;
          overflow-x: hidden;
          transition: 0.3s;
        }
        .sidebarenabled .code-editor-container {
            width: 70vw;
        }
      @media (max-width: 700px) {
            .code-editor-container {
                width: 90vw;
            padding: 5px 3.5em;
            height: calc(88vh - 100px);/*65vh*/
            }
        }
      @media (max-width: 600px) {
            .code-editor-container {
                width: 100vw;
            padding: 5px 3em;
            height: calc(88vh - 100px);/*65vh*/
            }

        }
        .code-editor-line {
            display: flex;/*inline-block*/
            position: relative;
            border-radius: 5px;
            background: var(--white-color);
            color: var(--black-color);
            font-size: 1em;
            font-family: "Fira Code", "JetBrains Mono", monospace;
            letter-spacing: 0.06em;
            text-align: left;
            padding: 5px;
            transition: 0.5s;
            white-space: pre-wrap;
            /*width: 70vw;*/
            box-sizing: border-box;
            cursor: pointer;
          opacity: 1;
      /*word-break: break-word;*/
        }

        .code-editor-line:focus {
            outline: none;
            background: var(--drakgrey-color);
        }
        .code-editor-line {
            counter-increment: line-number;
            position: relative;
        }
        #linenumberingon .code-editor-line::before {
            content: counter(line-number) ". ";
            position: absolute;
            right: 101%;
            font-family: Arial, sans-serif;
            font-weight: bold;
            font-size: 0.7em;
            border: none;
            color: var(--linenumber-color);
        }
        /* Checkmark style */
        .code-editor-line.selected::after {
            content: '✓';
            position: absolute;
            left: -3.5em;
            top: 0;
            color: var(--checkmark-color);
            font-size: 1.2em;
            transition: 0.3s;
        }
        /* Selected line styling */
        .code-editor-line.selected.topSelected {
          border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0; /* Falls du die untere rechte Ecke ebenfalls abgerundet haben möchtest */
        }

        .code-editor-line.selected.bottomSelected {
          border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
            border-top-left-radius: 0;
            border-top-right-radius: 0; /* Falls du die obere rechte Ecke ebenfalls abgerundet haben möchtest */
        }

        .code-editor-line.selected.middleSelected {
            border-top-left-radius: 0;
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0; /* Entfernt alle Ecken */
        }

        .code-editor-line.selected.singleSelected {
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px; /* Rundet alle Ecken */
        }
        .code-editor-line.superselected {
            border-radius: 5px;
            background: var(--superselected-color);
            transform: translateX(1.5em); /* Slight movement to the right */
        }
        .code-editor-line.superselected::after {
            content: '→';
            position: absolute;
            left: -3.5em;
            top: 0;
            color: var(--leftarrow-color);
            font-size: 1.2em;
            transition: 0.3s;
        }

      .editor-selected-line-btns{
          width: 100vw;/*90vw*/
          background: var(--white-color);
          /*height: 8vh;*/
          padding: 10px;
          display: flex;
          overflow-x: scroll;
          overflow-y: hidden;
          transition: 0.3s;
      }
      .sidebarenabled .editor-selected-line-btns{
          width: 70vw;
          /*border-bottom: 1px solid var(--rectangleborder);*/
      }
      .eslbtn{
          color: var(--codeeditoreditbtn-color);
          width: 6vh;
          height: 6vh;
          min-width: 40px;
          min-height: 40px;
          background: var(--codeeditoreditbtnbackground-color);
          text-align: center;
          border: none;
          border-radius: 50%;
          font-weight: bold;
          font-size: 0.85em;
          margin-left: 1%;
          transition: 0.3s;
      }
      .eslbtn:hover{
          background: var(--drakgrey-color);
      }
      .disabled{
          pointer-events: none;
            opacity: 0.5;
      }
      .disableline{
          pointer-events: none;
            opacity: 0.5;
      }
      .importantpin{
          background: rgba(255, 0, 0, 0.5);/*#F09286*/
      }
      .code-editor-line.selected {
            background: var(--selected-color);
            transform: translateX(1.5em); /* Slight movement to the right */
          border-radius: 0;
          transition: 0.3s;
        }
      /*.unsleeplines{*/
      .code-editor-btn{
          color: var(--codeeditoreditbtn-color);
          width: 6vh;
          height: 6vh;
          min-width: 40px;
          min-height: 40px;
          background: var(--codeeditoreditbtnbackground-color);
          text-align: center;
          border: none;
          border-radius: 50%;
          font-weight: bold;
          font-size: 0.85em;
          margin-left: 1%;
          transition: 0.3s;

      }
      .code-editor-btn:hover {
    background: var(--drakgrey-color);
}
      .unsleeplines:hover{
          background: var(--drakgrey-color);
      }
      .hiddenlinesparent{
          transform: translateX(-1.5em);
      }
      .hidden{
          display: none;
          /*animation: Hide 1s forwards;*/
      }
      @keyframes Hide {
          100%{
            transform: translateY(-50px);
            opacity: 0;
            display: none;
          }
        }
      .code-editor-btns{
          width: 100vw;/*90vw*/
          background: var(--white-color);
          /*height: 8vh;*/
          padding: 10px;
          display: flex;
          overflow-x: scroll;
          overflow-y: hidden;
          transition: 0.3s;
      }
      .sidebarenabled .code-editor-btns {
          width: 70vw;
          /*border-top: 1px solid var(--rectangleborder);*/
      }
    .filePathInput{
      font-size: 1em;
      color: var(--filepathinput-color);
      font-weight: bold;
      background: transparent;
      border: none;
      display: inline-block;
      width: 100%;
      text-align: center;
      transition: 0.3s;
      overflow: hidden;
    }
    .filePathInput:focus{
      outline: none;
    }






        .viewcontainer {
            font-family: 'Arial', sans-serif;
            background-color: var(--background-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            transition: 0.3s;
        }

        .swipe-container {
            display: flex;
            width: 100vw;
            height: 100vh;
            scroll-snap-type: x mandatory;
            overflow-x: scroll;
            scroll-behavior: smooth;
            transition: 0.3s;
        }

        .sidebarenabled .swipe-container {
            width: 70vw;
        }

        .view {
            width: 100vw;
            height: 90vh;
            flex-shrink: 0;
            scroll-snap-align: start;
      padding: 5vh 0;
      transition: 0.3s;
        }

        .sidebarenabled .view {
            width: 70vw;
        }

        .mobile-container, .browser-container {
            margin: auto;
            transition: 0.3s;
        }

        .mobile-container {
            max-width: 375px;
      width: calc(100vw - 1em);
            max-height: 667px;
      height: calc(100vh - 1em);
            border-radius: 35px;
            background-color: var(--white-color);
            box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            border: 1em solid var(--deviceborder-color);
            transition: 0.3s;
        }

        /* Safari-like top bar */
        .safari-header {
            background: var(--safariheaderbackground-color);
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            border-bottom: 1px solid var(--browserheaderborderbottom-color);
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            transition: 0.3s;
        }

        .safari-header .safari-buttons {
            display: flex;
            gap: 8px;
            transition: 0.3s;
        }

        .safari-buttons .back-btn {
            width: 12px;
            height: 12px;
            background-color: var(--switchcheckedbackground-color);/*333*/
            mask: url('https://upload.wikimedia.org/wikipedia/commons/2/26/Chevron_left_font_awesome.svg') no-repeat center;
            -webkit-mask: url('https://upload.wikimedia.org/wikipedia/commons/2/26/Chevron_left_font_awesome.svg') no-repeat center;
            mask-size: 100%;
            -webkit-mask-size: 100%;
            transition: 0.3s;
        }

        .url-bar {
            width: 70%;
            height: 28px;
            margin-left: 10px;
            display: flex;
            align-items: center;
            background-color: var(--urlbarbackground-color);
            border-radius: 12px;
            padding: 0 10px;
            font-size: 14px;
            color: #666;
            transition: 0.3s;
        }

        .url-bar input {
            width: 100%;
            border: none;
            background: transparent;
            outline: none;
            color: var(--urlbarcolor-color);
            font-size: 14px;
            transition: 0.3s;
        }

        .safari-header .action-btn {
            background-color: var(--switchcheckedbackground-color);
            padding: 4px 10px;
            color: white;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: 0.3s;
        }

        /* iFrame container */
        .iframe-container {
            flex-grow: 1;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            overflow: hidden;
            background-color: var(--browseriframebackgroundcolor-color);
            transition: 0.3s;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            transition: 0s;
        }
    .browser-container {
            width: 80vw;
            max-width: 1200px;
            height: 70vh;
            border-radius: 15px;
            box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
            background-color: var(--browsercontainerbackground-color);
            display: flex;
            flex-direction: column;
      border: 1em solid var(--deviceborder-color);/*alt option #BBBCBE*/
            transition: 0.3s;
        }

        .sidebarenabled .browser-container {
            width: 68vw;
        }

        /* Browser-like top bar */
        .browser-header {
            background-color: var(--safariheaderbackground-color);
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            border-bottom: 1px solid var(--browserheaderborderbottom-color);
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            transition: 0.3s;
        }

        .browser-header .browser-buttons {
            display: flex;
            gap: 8px;
            transition: 0.3s;
        }

        .browser-header .browser-buttons div {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            transition: 0.3s;
        }

        .close-btn {
            background-color: #f96256;
        }

        .minimize-btn {
            background-color: #fdbc40;
        }

        .maximize-btn {
            background-color: #34c84a;
        }

        .url-bar {
            flex-grow: 1;
            height: 28px;
            margin: 0 10px;
            display: flex;
            align-items: center;
            background-color: var(--urlbarbackground-color);
            border-radius: 8px;
            padding: 0 10px;
            font-size: 14px;
            color: #666;
            transition: 0.3s;
        }

        .url-bar input {
            width: 100%;
            border: none;
            background: transparent;
            outline: none;
            color: var(--urlbarcolor-color);
            font-size: 14px;
            transition: 0.3s;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            transition: 0.3s;
        }

        .btn-group button {
            background-color: var(--switchcheckedbackground-color);/*333*/
            color: #fff;
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            /*transition: background-color 0.3s;*/
            transition: 0.3s;
        }

        /*.btn-group button:hover {
            background-color: #555;
        }*/

        .iframe-container {
            flex-grow: 1;
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            overflow: hidden;
            background-color: var(--browseriframebackgroundcolor-color);
            transition: 0.3s;
        }
        .line-number-input{
          color: var(--black-color);
              width: 6vh;
              height: 6vh;
              min-width: 40px;
              min-height: 40px;
              background: var(--white-color);
              text-align: left;
              border: none;
              border-radius: 50%;
              font-weight: bold;
              font-size: 0.85em;
              margin-left: 1%;
              transition: 0.5s;
          padding: 0 2.5vh;
        }
        .line-number-input:focus{
          border-radius: 100px;
          width: 25vw;
          outline: none;
          box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
          transition: 0.3s;
        }
    .code-search-input{
      color: var(--black-color);
          width: 6vh;
          height: 6vh;
          min-width: 40px;
          min-height: 40px;
          background: var(--white-color);
          text-align: left;
          border: none;
          border-radius: 50%;
          font-weight: bold;
          font-size: 0.85em;
          margin-left: 1%;
          transition: 0.5s;
      padding: 0 2.5vh;
    }
    .code-search-input:focus{
      border-radius: 100px;
      width: 25vw;
      outline: none;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
      transition: 0.3s;
    }
    @media(max-width: 700px){
      #view2{
        display: none;
      }
      .view{
        padding: 0;
        height: 100vh;
      }
      .mobile-container{
        border: none;
        border-radius: 0;
        height: calc(100vh - 50px);
        width: 100vw;
        max-width: none;
      }
      /*.code-search-input{
        display: none;
      }*/
      /*#search-check{
        display: none;
      }*/
      .line-number-input:focus{
        position: fixed;
        top: 0;
        left: 0;
        border-radius: 5px;
        width: 100vw;
        outline: none;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
        background: var(--seccontainerbackground-color);
    z-index: 20;
    transition: 0.3s;
      }

      .code-search-input:focus{
          position: fixed;
          top: 0;
          left: 0;
          border-radius: 5px;
          width: 100vw;
          outline: none;
          box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
          background: var(--seccontainerbackground-color);
      z-index: 20;
      transition: 0.3s;
      }
      .code-editor-line {
    font-size: 0.8em;
      }
    }
    #addFile{
      position: fixed;
      right: 5px;
      bottom: 3px;
      color: #000;
          width: 4vh;
          height: 4vh;
          min-width: 40px;
          min-height: 40px;
          background: transparent;
          text-align: center;
          border: none;
          border-radius: 50%;
          font-weight: bold;
          font-size: 1em;
          margin-left: 1%;
          transition: 0.5s;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #addFile:hover{
          background: #f0f0f0;
      }
    #specialbtn{
      display: flex;
      /*justify-content: space-between;*/
      width: 70vw;
      font-size: 1.5em;
      margin-top: 2vh;
      border-radius: 10px;
      /*background: var(--seccontainerlinebackground-color);*/
      padding: 10px;
      /*color: var(--seccontainerlinecolor-color);*/
      transition: 1s;
      justify-content: center;
      background: var(--commandlistbackground-color); /*var(--switchcheckedbackground-color);*/
      border: 1px solid var(--browserheaderborderbottom-color);
      color: var(--black-color);
    }
    .sidebarenabled #specialbtn {
        width: 68vw;
    }
    #specialbtn:active{
      background: var(--spencialbtnbackground-color);
      color: var(--spencialbtncolor-color);
    }
    #specialbtn:hover{
      background: var(--spencialbtnbackground-color);
      color: var(--spencialbtncolor-color);
    }
    @keyframes rotatesign {
      100%{
        transform: rotate(360deg);
      }
    }
    @keyframes rotatesignleft {
    0%{
        transform: rotate(360deg);
    }
    100% {
        transform: rotate(0deg);
    }
}
      @keyframes swipeOutLeft {
                0% {
                    transform: translateX(0);
                }
                100% {               
                  transform: translateX(-100%);
                }
            }

      @keyframes swipeInLeft {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(0);
  }
}

      @keyframes swipeOutRight {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(100%);
  }
}

      @keyframes swipeInRight {
  0% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(0);
  }
}
    .overlay-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: var(--overlaybackground-color); /* Transparente schwarze Wand */
            display: none;/*flex*/
            justify-content: center;
            align-items: center;
      z-index: 1000;
      animation: swipein 0.5s;
           transition: 0.3s;
        }
        .sidebarenabled .overlay-container {
            width: 70vw;
            left: 30vw;
            right: 0;
        }
    .content-container {
    border: 1px solid var(--rectangleborder);
    background-color: var(--contentcontainer-color);
    padding: 20px;
    border-radius: 5px;
    display: grid;
    align-items: start; /* Elemente vertikal oben ausrichten */
    justify-content: start; /* Elemente horizontal oben ausrichten */
    grid-template-columns: repeat(auto-fit, minmax(150px, 200px)); /* Flexible Spalten */
    gap: 20px;
    width: 80vw;
    max-width: 1200px;
    margin-top: 20px;
    position: relative;
    max-height: 95vh;
    overflow: hidden;
    overflow-y: scroll;
    transition: 0.3s;
}

        .sidebarenabled .content-container{
           width: 70vw;
           height: 100vh;
           grid-template-columns: repeat(2, 1fr);
           overflow-y: auto;
           right: 0;
           margin-top: 0;
           border: none;
           max-height: 100vh;
           max-width: none;
           border-radius: 0;
           border: 1px solid var(--rectangleborder);
           border-left: none;
           /*left: 30vw;*/
        }
        @media(max-width: 800px){
            .sidebarenabled .content-container {
    width: 70vw;
    height: 100vh;
    grid-template-columns: repeat(2, 1fr);
    overflow-y: auto;
    right: 0;
    border: none;
    /*left: 30vw;*/
    transition: 0.3s;
    border-radius: 0;
            }
        }

        .sidebarenabled .commandsdisplay-container {
            width: 70vw;
            /*left: 30vw;*/
            right: 0;
            margin-top: 0;
            border: none;
            max-height: 100vh;
            max-width: none;
            border-radius: 0;
            border: 1px solid var(--rectangleborder);
            border-left: none;
            border-radius: 0;
            transition: 0.3s;
        }
        .theme-overlay, .commandsoverlay-container, .singsoverlay-container{
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: var(--overlaybackground-color); /* Transparente schwarze Wand */
            display: none;/*flex*/
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: swipein 0.5s;
            transition: 0.3s;
        }
        .sidebarenabled .theme-overlay, .sidebarenabled .commandsoverlay-container, .sidebarenabled .topandbottomsignsdisplay-container {
            width: 70vw;
            height: 100vh;
            overflow-y: auto;
            right: 0;
            left: 30vw;
            transition: 0.3s;
        }
       .theme-option-container, .topandbottomsignsdisplay-container, .commandsdisplay-container {
            border: 1px solid var(--rectangleborder);
            background-color: var(--contentcontainer-color);
            padding: 20px;
            /*box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);*/ /* Box Shadow */
            border-radius: 5px;
            width: 80vw;
            max-width: 1200px;
            margin-top: 20px;
            position: relative;
            max-height: 95vh;
            overflow-y: scroll;
            transition: 0.3s;
       }

       .sidebarenabled .theme-option-container, .sidebarenabled .topandbottomsignsdisplay-container, .sidebarenabled .commandsdisplay-container{
            width: 70vw;
height: 100vh;
overflow-y: auto;
right: 0;
left: 0;
margin-top: 0;
border: none;
max-height: 100vh;
max-width: none;
border-radius: 0;
border: 1px solid var(--rectangleborder);
border-left: none;
transition: 0.3s;
}

        .sidebarenabled .singsoverlay-container {
    width: 70vw;
    left: 30vw;
    right: 0;
}

        .top-bar {
            grid-column: 1 / -1; /* Macht die Top-Bar über die gesamte Breite des Containers */
            width: 100%;
            background-color: var(--contentcontainer-color);
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: 0.3s;
        }


        .overlay-back-btn, .upload-btn, .viewthisfile, .create-file-btn, .overlay-close-btn {
            /*background-color: var(--contentcontainer-color);
            border: 1px solid var(--rectangleborder);
            color: var(--overlaycolor-color);*/
        background: var(--switchcheckedbackground-color);
        color: white;
        border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            transition: 0.3s;
        }
        .overlay-close-btn{
          display: inline-block;
        }
        .overlay-back-btn{
          display: none;
        }
        @media(max-width: 700px){
          .overlay-close-btn {
            display: none;
          }
          .overlay-back-btn {
            display: inline-block;
          }
        }


        .rectangle {
            background-color: var(--contentcontainer-color); /* --lightgrey-color */
            border: 1px solid var(--rectangleborder);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 150px;
            border-radius: 5px;
            color: var(--rectanglecolorcolor-color); /* Textfarbe */
            font-size: 18px;
            position: relative;
            min-width: 200px;
            /*transition: background 0.5s;*/
      white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: 0.3s;
        }
        @keyframes easeinanimationfrb {
            0% {
                transform: translateY(-100%);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .rectangle-buttons {
            position: absolute;
            top: 5px;
            right: 5px;
            display: none;
            transition: 0.3s;
        }

        .rectangle:hover .rectangle-buttons {
            display: flex;
            gap: 10px;
        }

        .rectangle.enlarged .rectangle-buttons{
            display: flex;
            gap: 10px;
        }

        .download-btn, .delete-btn, .close, .edit-btn{
            background-color: var(--contentcontainer-color);/*--lightgrey-color*/
            border: 1px solid var(--rectangleborder);/*--overlayborder-color*/
            color: var(--overlaycolor-color);
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 3px;
            font-size: 14px;
            animation: easeinanimationfrb 0.3s;
        }

        .download-btn {
            display: none;
        }

    @keyframes easeinanimationfin {
            0% {
                transform: translateY(100%);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .image-name {
            display: none;
            position: absolute;
            color: rgba(255, 255, 255, 0.7);/*#999999*/
            font-size: 20px;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 5px;
            border-radius: 3px;
      animation: easeinanimationfin 0.3s;
      transition: 0.5s;
      width: 100%;
      height: 100%;
      text-align: center;
      justify-content: center;
      align-items: center;
      white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .rectangle:hover .image-name {
            display: flex;
        }

        .rectangle.enlarged .image-name {
            display: flex;
      color: rgba(255, 255, 255, 0.7);
        }

        .rectangle.enlarged .rectangle-buttons .download-btn {
            display: inline-block;
        }

        .rectangle.enlarged {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 80vw;
            height: 80vh;
            transform: translate(-50%, -50%);
            z-index: 1000;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            transition: 0.3s;
        }

        .sidebarenabled .rectangle.enlarged {
            transform: none;
            top: 0;
            right: 0;
            left: 30vw;
            height: 100vh;
            width: 70vw;
            box-shadow: none;
            border-radius: 0;
            border-left: none;
            transition: 0.3s;
        }

        .close {
            position: absolute;
            top: 5px;
            left: 5px;
            display: none;
            transition: 0.3s;
        }

        .rectangle.enlarged .close{
            display: block;
        }

        @media (max-width: 900px) {
            .commandsdisplay-container {
                width: 100vw;
                height: 100vh;
                max-width: none;
            }
           .topandbottomsignsdisplay-container {
                width: 100vw;
                height: 100vh;
                max-width: none;
            }
             .theme-option-container {
                width: 100vw;
                height: 100vh;
                max-width: none;
             }
            .content-container {
                width: 100vw;
                height: 100vh;
                max-width: none;
                grid-template-columns: repeat(2, 1fr);
                overflow-y: auto;
            }
            .rectangle{
               transition: 0.5s;
            }
            .rectangle.enlarged{
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                z-index: 1000;
                transform: none;
                background-size: contain;
                background-repeat: no-repeat;
                background-position: center;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            }
        }

        @media (max-width: 500px) {
        .content-container {
        width: 100vw;
        height: 100vh;
        grid-template-columns: repeat(1, 1fr);
        overflow-y: auto;
      }
      .rectangle{
        transition: 0.5s;
      }
      .code-editor-line {
    font-size: 0.7em;
      }
    }

    .closeviewthisfilebtn {
      height: 6vh;
      width: 6vh;
      background: var(--transparentshade-color);
      border: none;
      border-radius: 50%;
      display: none;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: var(--black-color);
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 2vh;
      z-index: 1112;
      transition: 0.3s;
    }

    .sidebarenabled .closeviewthisfilebtn {
        left: calc(30vw + 10px);
    }


    .codesearchresults{
      font-size: 1em;
      background: var(--seccontainerbackground-color);
      width: 25vw;
      border-radius: 5px;
      border: none;var(--switchcheckedbackground-color);
      position: absolute;
      display: none;
      color: var(--black-color);
      flex-direction: column;
      max-height: 50vh;
      overflow-y: scroll;
      word-break: break-word;
      transition: 0.3s;
    }
    .codesearchresults .result{
      padding: 10px;
      margin-top: 2px;
      background: var(--lightgrey-color);
      color: var(--black-color);
      border-radius: 5px;
      word-break: break-word;
      transition: 0.3s;
    }
    .codesearchresults .result .highlight{
      background: var(--switchcheckedbackground-color);
      font-size: 0.8em;
      padding: 0.1em;
      border-radius: 5px;
      display: inline-block;
      color: #fff;
      transition: 0.3s;
    }
    @media(max-width: 700px){
        .codesearchresults{
            width: 100vw;
        }
    }
    .lineoptions {
      display: none;
      padding: 0.1em;
      background: var(--seccontainerbackground-color);
      color: var(--black-color);
      border-radius: 100px;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
      transition: 0s;
    }
    .lineoptions button{
      color: var(--black-color);
          width: 5vh;
          height: 5vh;
          min-width: 40px;
          min-height: 40px;
          background: var(--seccontainerbackground-color);
          text-align: center;
          border: none;
          border-radius: 50%;
          font-weight: bold;
          font-size: 0.70em;
          transition: 0.5s;
    }
    .lineoptions button:hover{
      background: var(--seccontainerlinebackground-color);
    }








        #overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: var(--fileloadingoverlaybackground-color);
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          z-index: 1500;
          visibility: hidden;
          opacity: 0;
          transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        #overlay.active {
          visibility: visible;
          opacity: 1;
        }

        .progress-bar-container {
          width: 80%;
          max-width: 400px;
          background: var(--loadingbarbackground-color);
          border-radius: 5px;
          overflow: hidden;
          margin-bottom: 10px;
        }

        .progress-bar {
          height: 20px;
          width: 0;
          background: var(--loadingbarloadedbackground-color);
          transition: width 0.5s ease;
        }

        .progress-text {
          color: #fff;
          text-align: center;
          margin-top: 10px;
          font-size: 16px;
        }

        .checkmark {
          font-size: 50px;
          color: white;
          display: none;
          margin-bottom: 10px;
        }

        .checkmark.visible {
          display: block;
        }

        #custom-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.2); /* Semi-transparentes Schwarz */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1400;
            animation: fadeInOverlay 0.3s ease-in-out; /* Overlay fade-in Animation */
        }

        /* Dialog - Zentrale Box */
        #custom-dialog {
            background: var(--background-color);/*--seccontainerbackground-color*/
            padding: 30px;
        border: 1px solid var(--rectangleborder);
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px; /* Max-Breite der Box */
            text-align: center;
            position: relative;
            animation: fadeInDialog 0.4s ease-in-out; /* Box fade-in Animation */
        }

        /* Schließen-Button */
        #close-dialog {
            position: absolute;
            top: 15px;
            right: 15px;
            cursor: pointer;
            font-size: 24px;
            color: var(--rectangleborder);
            transition: color 0.2s;
        }

        /* Nachricht */
        #custom-message {
            font-size: 18px;
            color: var(--black-color);
            margin-bottom: 20px;
            padding: 10px;
            text-align: left;
            max-height: 200px;
            overflow: scroll;
        }

        /* Prompt Eingabe-Container */
        #prompt-input-container {
            margin-top: 15px;
        }

        /* Eingabefeld für prompt */
        #custom-input {
            width: 95%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--rectangleborder);
            font-size: 16px;
            margin-bottom: 15px;
            /*box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);*/
            color: var(--black-color);
            background: transparent;
        }
        #custom-input:focus{
            outline: none;
        }

        /* Button für Submit und OK */
        #close-alert, #submit-prompt {
            margin-top: 10px;
            padding: 12px;
            width: 100%;
            background: var(--spencialbtnbackground-color); /*#007BFF;*/
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }

        /*#close-alert:hover, #submit-prompt:hover {
            background-color: var(--button-disabled-background-color);
            color: var(--text-color);
        }*/

        /* Animationen */
        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInDialog {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        .closecommandoverlaybtn {
    background-color: var(--contentcontainer-color); /* --lightgrey-color */
    border: 1px solid var(--rectangleborder); /* --overlayborder-color */
    color: var(--overlaycolor-color);
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 3px;
    font-size: 14px;
    animation: easeinanimationfrb 0.3s;
    position: absolute;
    top: 5px;
    left: 5px;
}

h2 {
    font-family: Arial, sans-serif;
    font-size: 24px;
    font-weight: bold;
    text-align: center;
    color: var(--overlaycolor-color);
    margin-bottom: 20px;
}

.command-list {
    list-style: none; /* Entferne Standard-Bullets */
    padding: 0;
    margin: 0 auto;
    max-width: 600px; /* Zentriere die Liste mit einer maximalen Breite */
    background-color: var(--commandlistbackground-color);
    border: 1px solid var(--rectangleborder);/*browserheaderborderbottom*/
    border-radius: 8px;
    /*box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);*/
    overflow: hidden; /* Für abgerundete Ecken */
}
.seccontainer-line-container{
    list-style: none; /* Entferne Standard-Bullets */
    padding: 0;
    margin: 0 auto;
    /*max-width: 600px;*/ /* Zentriere die Liste mit einer maximalen Breite */
    background-color: var(--commandlistbackground-color);
    border: 1px solid var(--rectangleborder);/*browserheaderborderbottom-color*/
    border-radius: 8px;
    /*box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);*/
    overflow-y: scroll;
    overflow-x: hidden;
    /*height: 100%;*/
}

.command-list li {
    display: flex;
    justify-content: space-between; /* Abstand zwischen Text und Button */
    align-items: center;
    padding: 10px 15px;
    border-bottom: 1px solid var(--rectangleborder);/*browserheaderborderbottom*/
    font-family: 'Courier New', monospace;
    font-size: 16px;
    color: var(--commandlistcolor-color);
}

.seccontainer-line{
    display: flex;
    justify-content: space-between; /* Abstand zwischen Text und Button */
    align-items: center;
    padding: 10px 15px;
    border-bottom: 1px solid var(--rectangleborder);/*browserheaderborderbottom*/
    font-family: 'Courier New', monospace;
    font-size: 16px;
    color: var(--commandlistcolor-color);
    width: 70vw;
}

.sidebarenabled .seccontainer-line{
    width: 68vw;
}

.command-list li:last-child {
    border-bottom: none;
}

.seccontainer-line-container seccontainer-line:last-child{
    border-bottom: none;
}

.command {
    font-weight: bold;
    color: var(--switchcheckedbackground-color);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.symbolsignspan{
    font-weight: bold;
    color: var(--switchcheckedbackground-color);
    /*text-transform: uppercase;*/
    font-family: 'Arial', sans-serif;
    letter-spacing: 0.5px;
}

.Symbol-Span {
    background-color: var(--switchcheckedbackground-color);
    color: white;
    font-size: 18px;
    font-weight: bold;
    border: none;
    border-radius: 5px;
    padding: 5px 10px;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.2s;
    min-width: 40px;
}

@media (max-width: 600px) {
    .command-list li {
    font-size: 10px;
    }
    .seccontainer-line-container seccontainer-line{
    font-size: 10px;
    }
    .Symbol-Span {
    font-size: 12px;
    }
}

.Symbol-Span:hover {
    transform: scale(1.1);
}

.Symbol-Span:active {
    transform: scale(1);
    background-color: #004494;
}
#specialbtn{
    font-family: 'Arial', sans-serif;
}
    #scrolltopreviousfile, #scrolltonextfile{
        height: 50px;
        width: 50px;
        background: transparent;
        border: none;
        border-radius: 5px;
        color: var(--black-color);
        display: flex;
        justify-content: center;
            align-items: center;
        font-size: 20px;
        opacity: 0;
        position: fixed;
        bottom: 2.5px;
        transition: 0.3s;
    }
    #scrolltopreviousfile{
        left: 0;
    }
    .sidebarenabled #scrolltopreviousfile{
        left: 30vw;
    }
    #scrolltonextfile{
        right: 0;
    }
    #scrolltopreviousfile:hover{
        opacity: 1;
    }
        #scrolltonextfile:hover{
        opacity: 1;
    }
    .sidebarbardiv{
        height: 100vh;
        width: 30vw;
        background: var(--contentcontainer-color);
        border: 1px solid var(--rectangleborder);
        color: var(--black-color);
        display: flex;
        flex-direction: column;
        /*justify-content: center;
        align-items: center;
        text-align: center;*/
        padding: 3px;
        display: none;
        overflow: scroll;
        overflow-x: hidden;
        transition: 0.3s;
    }
    .sidebarenabled .sidebarbardiv{
        display: flex;
    }
    .smallsidebarenabled .sidebarbardiv{
        display: flex;
        position: fixed;
        left: 0;
        top: 0;
        z-index: 7;
        width: 100vw;
        transition: 0.5s
    }
    .sidebarbardiv h3{
        font-family: Arial, sans-serif;
        font-size: 1em;
        font-weight: bold;
        text-align: left;
        margin: 10px;
        color: var(--overlaycolor-color);
        transition: 0.3s;
    }
    .sidebarbardivbuttondiv{
        width: 100%;
        border: none;
        background: transparent;
        border-radius: 5px;
        display: flex;
        flex-direction: column;
        padding: 5px;
        transition: 0.3s;
    }
    .sidebarbardivbuttondiv button{
        background: var(--contentcontainer-color);
        border: 1px solid var(--rectangleborder);
        color: var(--black-color);
        display: flex;
        padding: 10px;
        text-align: left;
        font-size: 1em;
        border-radius: 5px;
        margin-bottom: 5px;
        transition: 0.3s;
        overflow: hidden;
    }
    .allcontainer{
        width: 100vw;
        height: 100vh;
        font-family: 'Arial', sans-serif;
        overflow: hidden;
        background-color: var(--background-color);/*#f7f9fc*/
        transition: 0.3s;
    }
    .sidebarenabled .allcontainer{
        width: 70vw;
    }
    .divcodeeditor-container{
        height: 100vh;
        width: 100vw;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: space-between;
        transition: 0.3s;
    }
    .togglesidebarbutton {
        border: none;
        background: transparent;
        color: var(--black-color);
        font-size: 1.2em;
        position: absolute;
        margin-top: 5px;
        margin-left: 10px;
        z-index: 5;
    }
    .sidebarenabled .content-container {
        border-radius: 0;
    }
    #closemenuforsmallscreen{
        background: var(--contentcontainer-color);
border: 1px solid var(--rectangleborder);
color: var(--black-color);
display: flex;
padding: 10px;
text-align: left;
font-size: 1em;
border-radius: 5px;
margin-bottom: 5px;
transition: 0.3s;
font-weight: bold;
border: none;
display: none;
    }
        .smallsidebarenabled #closemenuforsmallscreen {
        display: flex;
    }
    .themeoption{
        background: var(--contentcontainer-color);
        border: 1px solid var(--rectangleborder);
        color: var(--black-color);
        display: flex;
        padding: 10px;
        text-align: left;
        font-size: 1em;
        border-radius: 5px;
        margin-bottom: 5px;
        transition: 0.3s;
        overflow: hidden;
        justify-content: space-between;
    }
    .switchtothememaincolorspan{
        width: 1.2em;
        height: 1.2em;
        border-radius: 50%;
    }
    .switchtothememaincolorspan{
        width: 1.7em;
        height: 1.7em;
        border-radius: 50%;
    }
    .switchtothemetitlespan{
        color: var(--black-color);
        font-size: 1em;
    }
    .themeoption2{
        background: var(--contentcontainer-color);
border: 1px solid var(--rectangleborder);
color: var(--black-color);
display: flex;
padding: 10px;
text-align: left;
font-size: 1em;
border-radius: 5px;
margin-bottom: 5px;
transition: 0.3s;
overflow: hidden;
justify-content: center;
flex-direction: column;
    }













    input[type="range"]{
  -webkit-appearance: none;
  appearance: none;

  height: 8px;
  background: linear-gradient(90deg, var(--white-color), var(--switchcheckedbackground-color));
  border-radius: 5px;
  outline: none;
  transition: background 0.3s ease;
  border: 1px solid var(--white-color);
  margin-top: 8px;
}
@media(max-width: 700px){
    input[type="range"]{
        width: 30%;
    }
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  background: var(--white-color);
  border: 2px solid var(--switchcheckedbackground-color);
  border-radius: 50%;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

input[type="range"]::-webkit-slider-thumb:hover {
  transform: scale(1.2);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
}

input[type="range"]::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: var(--white-color);
  border: 2px solid var(--switchcheckedbackground-color);
  border-radius: 50%;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

input[type="range"]::-moz-range-thumb:hover {
  transform: scale(1.2);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
}

input[type="range"]::-ms-thumb {
  width: 20px;
  height: 20px;
  background: var(--white-color);
  border: 2px solid var(--switchcheckedbackground-color);
  border-radius: 50%;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}
.importantsearchresult{
    background: rgba(255, 0, 0, 0.5);
}
.result.importantsearchresult{
    background: rgba(255, 0, 0, 0.5);
}
.sidebarfilelinklink {
  display: flex; /* Macht den Button zu einem flexbox Container */
  justify-content: space-between; /* Erstes Element links, letztes Element rechts */
  align-items: center; /* Zentriert Inhalte vertikal */
  overflow-wrap: break-word; /* Bricht Wörter */
  word-break: break-word; /* Zusätzliche Unterstützung */
  hyphens: auto; /* Bindestriche, falls unterstützt */
  overflow-x: hidden;
}

.threedots {
  margin-left: auto; /* Schiebt die Punkte ganz nach rechts */
  padding: 0 10px;
}







/* Vollbild-Overlay */
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0); /* Halbtransparentes Overlay */
  display: flex;
  justify-content: center; /* Zentrierung horizontal */
  align-items: flex-start; /* Zentrierung vertikal starten */
  z-index: 2000;
}

/* Options-Container */
.options-container {
  position: absolute;
  background-color: var(--white-color);
  border-radius: 8px;
  border: 1px solid var(--rectangleborder);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  padding: 10px;
  width: 200px;
  color: var(--black-color);
}

/* Option-Item */
.option-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.option-icon {
  font-size: 18px;
  background: transparent;
  border: none;
  color: var(--black-color);
}

.option-text {
  font-size: 14px;
}
        .confetti {
      position: absolute;
      width: 12px;
      height: 12px;
      background-color: red;
      border-radius: 50%;
      animation: fall 4s ease-out forwards;
      pointer-events: none;
      z-index: 2500;
    }

    @keyframes fall {
      0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(calc(100vh + 100px)) rotate(360deg);
        opacity: 0;
      }
    }
    .sidebarbardivbuttondiv button{
        background: var(--lightgrey-color);/*rgba(150, 150, 150, 0.1);*/
        border: none;
    }
    #closemenuforsmallscreen h3{
        font-weight: 600;
        color: #333;
    }
    .code-editor-line:focus{
        background: rgba(150, 150, 150, 0.1);
    }
    .customthemecodeinput{
        background: var(--contentcontainer-color);
border: 1px solid var(--rectangleborder);
color: var(--black-color);
display: flex;
padding: 10px;
text-align: left;
font-size: 1em;
border-radius: 5px;
margin-bottom: 5px;
transition: 0.3s;
width: 100%;
overflow: hidden;
    }
    .customthemecodeinput:focus{
        /*outline-color: var(--checkmark-color);*/
        outline: none;
    }
    </style>

</head>
<body>
    <!-- Main content container with sections -->
  <!-- ☼ -->
    <div class="divcodeeditor-container sidebarenabled"><!-- -->
    <div class="sidebarbardiv">
        <button id="closemenuforsmallscreen" onclick="togglesidebarbuttonfunction()">← close Menu</button>
        <h3>functions</h3>
        <div class="sidebarbardivbuttondiv">
            <button onclick="showthemeoverlay()">theme</button>
            <button id="scrollviewintoviewbtn" onclick="scrollviewintoview()">view</button>
            <button onclick="showallfilescontainer()">files</button>
        </div>
        <h3>files</h3>
        <div class="sidebarbardivbuttondiv sidebarbardivbuttondiv1">
            <button id="sidebarfilelinklink0" class="sidebarfilelinklink" onclick="editthisfile('0', event)">index.html<div class="threedots">⋮</div></button>
            <button id="sidebarfilelinklink1" class="sidebarfilelinklink" onclick="editthisfile('1', event)">styles.css<div class="threedots">⋮</div></button>
            <button id="sidebarfilelinklink2" class="sidebarfilelinklink" onclick="editthisfile('2', event)">script.js<div class="threedots">⋮</div></button>
        </div>
    </div>
    <div class="allcontainer">

        <button class="togglesidebarbutton" onclick="togglesidebarbuttonfunction()">☰</button>
        <div class="container" id="container">
        <div class="section" id="section0">
            <div class="editor-selected-line-btns">
                  <button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onblur="hidecodesearchresults()" onfocus="searchcode(this)" placeholder="⌕ search"></div>
            <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
                <div id="1" class="code-editor-line" contenteditable="true"></div>
            </div>
            <div class="code-editor-btns">
                  <button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number"></div>

    </div>
    <div class="section" id="section1">
        <div class="editor-selected-line-btns">
              <button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onblur="hidecodesearchresults()" onfocus="searchcode(this)" placeholder="⌕ search"></div>
            <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
                <div id="2" class="code-editor-line" contenteditable="true"></div>
            </div>
        <div class="code-editor-btns">
              <button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number"></div>

    </div>
    <div class="section" id="section2">
        <div class="editor-selected-line-btns">
              <button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onblur="hidecodesearchresults()" onfocus="searchcode(this)" placeholder="⌕ search"></div>
            <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
                <div id="3" class="code-editor-line" contenteditable="true"></div>
            </div>
        <div class="code-editor-btns">
              <button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number"></div>

    </div>
    <div class="section viewcontainer" id="section3">
      <div class="swipe-container">

            <div class="view">
                <div class="mobile-container">

                    <div class="safari-header">
                        <div class="safari-buttons">
                            <div class="back-btn"></div>
                        </div>
                        <div class="url-bar">
                            <input type="text" id="mobile-url-input" placeholder="file..." list="filenameoptions">
                <datalist id="filenameoptions">
                  <option id="option0" value="index.html"></option>
                  <option id="option1" value="styles.css"></option>
                  <option id="option2" value="script.js"></option>
                </datalist>
                        </div>
                        <div class="action-btn" onclick="textCode('mobile-url-input', 'mobile-frame');createConfetti()">⌕</div>
                    </div>


                    <div class="iframe-container">
                        <iframe id="mobile-frame" loading="lazy"></iframe>
                    </div>
                </div>
            </div>


            <div class="view" id="view2">
                <div class="browser-container">

                    <div class="browser-header">
                        <div class="browser-buttons">
                            <div class="close-btn"></div>
                            <div class="minimize-btn"></div>
                            <div class="maximize-btn"></div>
                        </div>
                        <div class="url-bar">
                            <input type="text" id="computer-url-input" placeholder="file..." list="filenameoptions">

                        </div>
                        <div class="btn-group">
                            <button onclick="textCode('computer-url-input', 'computer-frame');createConfetti()">⌕</button>
                        </div>
                    </div>


                    <div class="iframe-container">
                        <iframe id="computer-frame" loading="lazy"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

  <div class="codesearchresults">
    no results
  </div>

  <div class="lineoptions">
    <button onclick="swipethislineleft()">←</button>
    <button onclick="closelineoptionscontainer()">×</button>
    <button onclick="swipethislineright()">→</button>
  </div>

    <!-- Navigation Bar -->
    <div class="nav-bar" id="nav-bar">
        <div data-index="0" class="nav-dot filedot navdot0" onclick="dotonclick()">
            <input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="index.html">
        </div>
    <div data-index="1" class="nav-dot filedot navdot1" onclick="dotonclick()">
            <input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="styles.css">
        </div>
    <div data-index="2" class="nav-dot filedot navdot2" onclick="dotonclick()">
            <input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="script.js">
      <!--oninput="handleFileNameInputChange(this)"-->
    </div>
    <div data-index="3" class="nav-dot navdot3" id="view-nav-dot" onclick="dotonclick()">
            <input class="filePathInput" type="text" value="view" maxlength="20" oninput="viewbottominputoninput(this)">
        </div>
    </div>
    <button id="scrolltopreviousfile" onclick="gotonextorpreviousfile('back')">←</button>
    <button id="scrolltonextfile" onclick="gotonextorpreviousfile('forward')">→</button>
  <!--<span id="addFile" onclick="createCodeEditorSection()">+</span>-->
  <div class="seccontainer">
    <div class="seccontainer-line-container">
    <div class="seccontainer-line">
      <label class="switch">
                <input type="checkbox" class="switchbox" data-checked="copybtn" onchange="updatecheckboxed(this)" checked>
                <span class="slider"></span>
            </label> <button class="Symbol-Span">□</button>
    </div>
    <div class="seccontainer-line">
        <label class="switch">
                <input type="checkbox" class="switchbox" data-checked="deletebtn" onchange="updatecheckboxed(this)" checked>
                <span class="slider"></span>
            </label> <button class="Symbol-Span">⌧</button>
    </div>
    <div class="seccontainer-line">
        <label class="switch">
                <input type="checkbox" class="switchbox" data-checked="downbtn" onchange="updatecheckboxed(this)" checked>
                <span class="slider"></span>
            </label> <button class="Symbol-Span">↓</button>
    </div> 
    <div class="seccontainer-line">
        <label class="switch">
                <input type="checkbox" class="switchbox" data-checked="upbtn" onchange="updatecheckboxed(this)" checked>
                <span class="slider"></span>
            </label> <button class="Symbol-Span">↑</button>
    </div> 
    <div class="seccontainer-line">
        <label class="switch">
                <input type="checkbox" class="switchbox" data-checked="importantPinbtn" onchange="updatecheckboxed(this)" checked>
                <span class="slider"></span>
            </label> <button class="Symbol-Span">⚠</button>
    </div>
    <div class="seccontainer-line">
        <label class="switch">
                <input type="checkbox" class="switchbox" data-checked="sleapbtn" onchange="updatecheckboxed(this)" checked>
                <span class="slider"></span>
            </label> <button class="Symbol-Span">☾</button>
    </div>
    <div class="seccontainer-line">
        <label class="switch">
                <input type="checkbox" class="switchbox" data-checked="unsleeplines" onchange="updatecheckboxed(this)" checked>
                <span class="slider"></span>
            </label> <button class="Symbol-Span">○</button>
    </div>
    <div class="seccontainer-line" id="search-check">
        <label class="switch">
                <input type="checkbox" class="switchbox" data-checked="code-search-input" onchange="updatecheckboxed(this)" checked>
                <span class="slider"></span>
            </label> <button class="Symbol-Span">⌕</button>
    </div>
    <div class="seccontainer-line" id="search-check">
            <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="line-number-input" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
                </label> <button class="Symbol-Span">⌕</button>
    </div>
    <div class="seccontainer-line" id="search-check">
            <label class="switch">
                    <input type="checkbox" class="switchbox commandsswitch" data-checked="showcommandlist-btn-element" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
            </label> <button class="Symbol-Span">⌘</button>
    </div>
    <div class="seccontainer-line" id="search-check">
            <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="trimbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
            </label> <button class="Symbol-Span">●</button>
    </div>
    <div class="seccontainer-line" id="search-check">
            <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="rightbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
            </label> <button class="Symbol-Span">→</button>
    </div>
    <div class="seccontainer-line" id="search-check">
            <label class="switch">
                    <input type="checkbox" class="switchbox" data-checked="leftbtn" onchange="updatecheckboxed(this)" checked>
                    <span class="slider"></span>
            </label> <button class="Symbol-Span">←</button>
    </div>
    <div class="seccontainer-line">
        <label class="switch">
                <input type="checkbox" class="switchbox" data-update-id="linenumbering" onchange="updatelinenumbercheckbox(this)" checked>
                <span class="slider"></span>
            </label> line numbers
    </div>
    </div>

    <!--<div class="seccontainer-line" id="specialbtn" onclick="deleteAllLines()">
        clear
    </div>-->
    <div class="seccontainer-line" id="specialbtn" onclick="deleteAllEmptyLines()">
        delete empty lines
    </div>
    <div class="seccontainer-line" id="specialbtn" onclick="deleteAllCommentsInLines()">
        delete comments
    </div>
  </div>
  <div class="commandsoverlay-container" onclick="hideelement('class', 'commandsoverlay-container', event)">
      <div class="commandsdisplay-container">
          <button class="closecommandoverlaybtn" onclick="hidecommandoverlay()">×</button>
       <br>
       <h2>commands</h2>
       <br>
           <ul class="command-list">
<li><span class="command">/alert</span>  <button class="Symbol-Span">⚠</button></li>
<li><span class="command">/arrowbottomleft</span>  <button class="Symbol-Span">↙</button></li>
<li><span class="command">/arrowbottomright</span>  <button class="Symbol-Span">↘</button></li>
<li><span class="command">/arrowdown</span>  <button class="Symbol-Span">↓</button></li>
<li><span class="command">/arrowgoleft</span>  <button class="Symbol-Span">↤</button></li>
<li><span class="command">/arrowgoright</span>  <button class="Symbol-Span">↦</button></li>
<li><span class="command">/arrowleft</span>  <button class="Symbol-Span">←</button></li>
<li><span class="command">/arrowright</span>  <button class="Symbol-Span">→</button></li>
<li><span class="command">/arrowtopleft</span>  <button class="Symbol-Span">↖</button></li>
<li><span class="command">/arrowtopright</span>  <button class="Symbol-Span">↗</button></li>
<li><span class="command">/arrowup</span>  <button class="Symbol-Span">↑</button></li>
<li><span class="command">/bigspark</span>  <button class="Symbol-Span">✶</button></li>
<li><span class="command">/bottomleftedge</span>  <button class="Symbol-Span">◣</button></li>
<li><span class="command">/bottomrightedge</span>  <button class="Symbol-Span">◢</button></li>
<li><span class="command">/smallcheckmark</span>  <button class="Symbol-Span">✓</button></li>
<li><span class="command">/emptycircle</span>  <button class="Symbol-Span">◯</button></li>
<li><span class="command">/copyright</span>  <button class="Symbol-Span">©</button></li>
<li><span class="command">/bigcross</span>  <button class="Symbol-Span">✘</button></li>
<li><span class="command">/crossincirkle</span>  <button class="Symbol-Span">⊗</button></li>
<li><span class="command">/crossinsquare</span>  <button class="Symbol-Span">⌧</button></li>
<li><span class="command">/crossnotinsquare</span>  <button class="Symbol-Span">×</button></li>
<li><span class="command">/cutoutcircle</span>  <button class="Symbol-Span">◌</button></li>
<li><span class="command">/diamond</span>  <button class="Symbol-Span">◆</button></li>
<li><span class="command">/emptyspark</span>  <button class="Symbol-Span">✧</button></li>
<li><span class="command">/emptysquare</span>  <button class="Symbol-Span">□</button></li>
<li><span class="command">/emptystar</span>  <button class="Symbol-Span">☆</button></li>
<li><span class="command">/emptytriangleleft</span>  <button class="Symbol-Span">◁</button></li>
<li><span class="command">/emptytriangledown</span>  <button class="Symbol-Span">▽</button></li>
<li><span class="command">/emptytriangleright</span>  <button class="Symbol-Span">▷</button></li>
<li><span class="command">/emptytriangletop</span>  <button class="Symbol-Span">△</button></li>
<li><span class="command">/filledcircle</span>  <button class="Symbol-Span">●</button></li>
<li><span class="command">/heart</span>  <button class="Symbol-Span">♥</button></li>
<li><span class="command">/infinite</span>  <button class="Symbol-Span">∞</button></li>
<li><span class="command">/magnifyingglass</span>  <button class="Symbol-Span">⌕</button></li>
<li><span class="command">/minus</span>  <button class="Symbol-Span">-</button></li>
<li><span class="command">/moonleft</span>  <button class="Symbol-Span">☽</button></li>
<li><span class="command">/moonright</span>  <button class="Symbol-Span">☾</button></li>
<li><span class="command">/movable</span>  <button class="Symbol-Span">✣</button></li>
<li><span class="command">/eighthnote</span>  <button class="Symbol-Span">♪</button></li>
<li><span class="command">/beamednote</span>  <button class="Symbol-Span">♫</button></li>
<li><span class="command">/chordsymbol</span>  <button class="Symbol-Span">♬</button></li>
<li><span class="command">/quarter note</span>  <button class="Symbol-Span">♩</button></li>
<li><span class="command">/paperplane</span>  <button class="Symbol-Span">➤</button></li>
<li><span class="command">/pencil</span>  <button class="Symbol-Span">✎</button></li>
<li><span class="command">/plus</span>  <button class="Symbol-Span">+</button></li>
<li><span class="command">/refreshright</span>  <button class="Symbol-Span">↻</button></li>
<li><span class="command">/refreshleft</span>  <button class="Symbol-Span">↺</button></li>
<li><span class="command">/registered</span>  <button class="Symbol-Span">®</button></li>
<li><span class="command">/sidebar</span>  <button class="Symbol-Span">≡</button></li>
<li><span class="command">/smallcross</span>  <button class="Symbol-Span">×</button></li>
<li><span class="command">/filledspark</span>  <button class="Symbol-Span">✦</button></li>
<li><span class="command">/filledsquare</span>  <button class="Symbol-Span">■</button></li>
<li><span class="command">/filledstar</span>  <button class="Symbol-Span">★</button></li>
<li><span class="command">/sun</span>  <button class="Symbol-Span">☼</button></li>
<li><span class="command">/toprightedge</span>  <button class="Symbol-Span">◥</button></li>
<li><span class="command">/topleftedge</span>  <button class="Symbol-Span">◤</button></li>
<li><span class="command">/trademark</span>  <button class="Symbol-Span">™</button></li>
<li><span class="command">/triangleleft</span>  <button class="Symbol-Span">◀</button></li>
<li><span class="command">/triangleright</span>  <button class="Symbol-Span">▶</button></li>
<li><span class="command">/triangledown</span>  <button class="Symbol-Span">▼</button></li>
<li><span class="command">/triangletop</span>  <button class="Symbol-Span">▲</button></li>
<li><span class="command">/updownleftarrow</span>  <button class="Symbol-Span">↵</button></li></ul>
      <br>
      <h2>short-cuts</h2>
      <br>
           <ul class="command-list">
<li><span class="command">/:func</span>  <button class="Symbol-Span">function</button></li>
<li><span class="command">/:if</span>  <button class="Symbol-Span">if statement</button></li>
<li><span class="command">/:for</span>  <button class="Symbol-Span">for loop</button></li>
<li><span class="command">/:try</span>  <button class="Symbol-Span">try catch</button></li>
<li><span class="command">/:div</span>  <button class="Symbol-Span">division tag</button></li>
<li><span class="command">/:btn</span>  <button class="Symbol-Span">button tag</button></li>
<li><span class="command">/:span</span>  <button class="Symbol-Span">span tag</button></li>
<li><span class="command">/:image</span>  <button class="Symbol-Span">image tag</button></li></ul>
      </div>
  </div>
<div class="singsoverlay-container" onclick="hideelement('class', 'singsoverlay-container', event)">
      <div class="topandbottomsignsdisplay-container">
          <button class="closecommandoverlaybtn" onclick="hidesignexplenationoverlay()">×</button>
       <br>
       <h2>top - (selected)</h2>
       <br>
<ul class="command-list">
<li><button class="Symbol-Span">⌧</button><span class="symbolsignspan">Delete</span></li>
<li><button class="Symbol-Span">⚠</button><span class="symbolsignspan">Pin</span></li>
<li><button class="Symbol-Span">↑</button><span class="symbolsignspan">Move up</span></li>
<li><button class="Symbol-Span">↓</button><span class="symbolsignspan">Move down</span></li>
<li><button class="Symbol-Span">☾</button><span class="symbolsignspan">Disable</span></li>
<li><button class="Symbol-Span">□</button><span class="symbolsignspan">Copy</span></li>
<li><button class="Symbol-Span">●</button><span class="symbolsignspan">trim</span></li>
<li><button class="Symbol-Span">⌕</button><span class="symbolsignspan">Code Search</span></li></ul>
      <br>
      <h2>bottom - (all)</h2>
      <br>
<ul class="command-list"><li><button class="Symbol-Span">⌧</button><span class="symbolsignspan">Delete</span></li>
<li><button class="Symbol-Span">⚠</button><span class="symbolsignspan">Unpin</span></li>
<li><button class="Symbol-Span">←</button><span class="symbolsignspan">Unselect</span></li>
<li><button class="Symbol-Span">→</button><span class="symbolsignspan">Unfold</span></li>
<li><button class="Symbol-Span">○</button><span class="symbolsignspan">Enable</span></li>
<li><button class="Symbol-Span">□</button><span class="symbolsignspan">Copy</span></li>
<li><button class="Symbol-Span">⌘</button><span class="symbolsignspan">Commands</span></li>
<li><button class="Symbol-Span">⌕</button><span class="symbolsignspan">Teleport</span></li></ul>
      </div>
  </div>
  <div class="closeviewthisfilebtn" onclick="closeviewthisfile()">×</div>
  <div class="overlay-container" onclick="hideelement('class', 'overlay-container', event)">
        <!-- Content Container (mit Top Bar drin) -->
        <div class="content-container">
            <!-- Top Bar -->
            <div class="top-bar">
                <button class="overlay-back-btn" onclick="hideelement('class', 'overlay-container', event)">×</button>
                <button class="overlay-close-btn" onclick="hideelement('class', 'overlay-container', event)">close</button>
        <input type="file" id="fileInput" style="display: none;" accept=".txt, .css, .js, .html, image/*" multiple>
                <button onclick="clickthiselement('#fileInput')" class="upload-btn">upload</button>
        <button class="viewthisfile" onclick="viewthisfile()">view</button>
                <button class="create-file-btn" onclick="requestcreatenewfile()">+</button>
            </div>

            <!-- Rechtecke (Inhalt) -->

            <div class="rectangle" id="rectangle0" onclick="editthisfile('0', event)">
                <span class="notclickable">index.html</span>
                <div class="rectangle-buttons">
                    <button class="edit-btn">…</button>
                </div>
                <button class="close">×</button>
            </div>
            <div class="rectangle" id="rectangle1" onclick="editthisfile('1', event)">
                <span class="notclickable">styles.css</span>
                <div class="rectangle-buttons">
                    <button class="edit-btn">…</button>
                </div>
                <button class="close">×</button>
            </div>
            <div class="rectangle" id="rectangle2" onclick="editthisfile('2', event)">
                <span class="notclickable">script.js</span>
                <div class="rectangle-buttons">
                    <button class="edit-btn">…</button>
                </div>
                <button class="close">×</button>
            </div>
            <div class="rectangle" id="image-rectangle" data-name="Image" data-type="png" style="background-image: url(Plants_fm.jpg); background-size: cover; background-position: center;">
                <span class="image-name">Image.png</span>
                <div class="rectangle-buttons">
                    <button class="download-btn">Download</button>
                    <button class="delete-btn" onclick="deleteImage(this)">Delete</button>
                </div>
                <button class="close">×</button>
            </div>
        </div>
    </div>
    <div id="theme-overlay" class="theme-overlay" onclick="hideelement('class', 'theme-overlay', event)">
        <div class="theme-option-container">
            <button class="closecommandoverlaybtn" onclick="hidethemeoverlay()">×</button>
<br>
<br>
<br>
<div class="themeoption" onclick="removeallthemes()">
<span class="switchtothememaincolorspan" style="background: linear-gradient(to right, var(--rectanglecolorcolor-color), var(--background-color));"></span>
<span class="switchtothemetitlespan">none</span>
</div>
            <div class="themeoption" onclick="switchtotheme('helloween-theme')"><span class="switchtothememaincolorspan" style="background: #FF6D00"></span><span class="switchtothemetitlespan">helloween</span></div>
            
            <div class="themeoption" onclick="switchtotheme('winter-theme')">
  <span class="switchtothememaincolorspan" style="background: #00bcd4"></span>
  <span class="switchtothemetitlespan">winter</span>
</div>
<div class="themeoption" onclick="switchtotheme('spring-theme')">
  <span class="switchtothememaincolorspan" style="background: #4caf50"></span>
  <span class="switchtothemetitlespan">spring</span>
</div>
<div class="themeoption" onclick="switchtotheme('ocean-theme')">
  <span class="switchtothememaincolorspan" style="background: #00acc1"></span>
  <span class="switchtothemetitlespan">ocean</span>
</div>
<div class="themeoption" onclick="switchtotheme('autumn-theme')">
  <span class="switchtothememaincolorspan" style="background: #ff9800"></span>
  <span class="switchtothemetitlespan">autumn</span>
</div>
<div class="themeoption" onclick="switchtotheme('nightsky-theme')">
  <span class="switchtothememaincolorspan" style="background: #3f51b5"></span>
  <span class="switchtothemetitlespan">nightsky</span>
</div>
<div class="themeoption" onclick="switchtotheme('desert-theme')">
  <span class="switchtothememaincolorspan" style="background: #ffcc80"></span>
  <span class="switchtothemetitlespan">desert</span>
</div>
<div class="themeoption" onclick="switchtotheme('forest-theme')">
  <span class="switchtothememaincolorspan" style="background: #4caf50"></span>
  <span class="switchtothemetitlespan">forest</span>
</div>
<div class="themeoption" onclick="switchtotheme('galaxy-theme')">
  <span class="switchtothememaincolorspan" style="background: #673ab7"></span>
  <span class="switchtothemetitlespan">galaxy</span>
</div>
<div class="themeoption" onclick="switchtotheme('sunset-theme')">
  <span class="switchtothememaincolorspan" style="background: #f44336"></span>
  <span class="switchtothemetitlespan">sunset</span>
</div>
<div class="themeoption" onclick="switchtotheme('neon-theme')">
  <span class="switchtothememaincolorspan" style="background: #76ff03"></span>
  <span class="switchtothemetitlespan">neon</span>
</div>

<div class="themeoption2" id="customthemeoption" onclick="switchtotheme('custom-theme')">
    <div class="themeoption"><span class="switchtothememaincolorspan" style="background: var(--switchcheckedbackground-color)"></span>
    <span class="switchtothemetitlespan">custom</span></div>
    <div class="colorselectorcontainer">
        <br>
    <div class="themeoption">
<input class="switchtothememaincolorspan2" type="color" id="backgroundColor" value="#0d1117" onchange="updateBackgroundColor()">
<span class="switchtothemetitlespan">background</span>
<input type="range" id="backgroundAlpha" min="0" max="100" value="100" onchange="updateBackgroundColor()">
</div>
<br>
        <!-- Eingabefelder für jede Farbe -->
<div class="themeoption">
<input class="switchtothememaincolorspan2" type="color" id="selectedColor" value="#161b22" onchange="updateSelectedColor()">
<span class="switchtothemetitlespan">accent color</span>
<input type="range" id="selectedAlpha" min="0" max="100" value="100" onchange="updateSelectedColor()">
</div>
<br>

<div class="themeoption">
    <input class="switchtothememaincolorspan2" type="color" id="colorColor" value="#ffffff" onchange="updateColorColor()">
    <span class="switchtothemetitlespan">text color</span>
    <input type="range" id="colorAlpha" min="0" max="100" value="100" onchange="updateColorColor()">
</div>
<br>
<div class="themeoption">
<input class="switchtothememaincolorspan2" type="color" id="rectangleBorderColor" value="#161b22" onchange="updateRectangleBorderColor()">
<span class="switchtothemetitlespan">borders</span>
<input type="range" id="rectangleBorderAlpha" min="0" max="100" value="100" onchange="updateRectangleBorderColor()">
</div>
<br>
<div class="themeoption">
<input class="switchtothememaincolorspan2" type="color" id="switchCheckedBackgroundColor" value="#0156CD" onchange="updateSwitchCheckedBackgroundColor()">
<span class="switchtothemetitlespan">secondary color</span>
<input type="range" id="switchCheckedAlpha" min="0" max="100" value="100" onchange="updateSwitchCheckedBackgroundColor()">
</div>
<br>
<div class="themeoption">
    <input class="switchtothememaincolorspan2" type="color" id="codeeditoreditbtncolor" value="#fff" onchange="updatecodeeditoreditbtncolor()">
    <span class="switchtothemetitlespan">functions</span>
    <input type="range" id="codeeditoreditbtncolorAlpha" min="0" max="100" value="100" onchange="updatecodeeditoreditbtncolor()">
</div>
<br>
<div class="themeoption">
<input class="switchtothememaincolorspan2" type="color" id="loadingBarLoadedBackgroundColor" value="#0156CD" onchange="updateLoadingBarLoadedBackgroundColor()">
<span class="switchtothemetitlespan">loading bar</span>
<input type="range" id="loadingBarLoadedAlpha" min="0" max="100" value="100" onchange="updateLoadingBarLoadedBackgroundColor()">
</div>
<br>
<div class="themeoption">
<input class="switchtothememaincolorspan2" type="color" id="rectangleColorColor" value="#363736" onchange="updateRectangleColorColor()">
<span class="switchtothemetitlespan">file container path</span>
<input type="range" id="rectangleColorAlpha" min="0" max="100" value="100" onchange="updateRectangleColorColor()">
</div>
<br>
<div class="themeoption">
    <input class="customthemecodeinput" type="text" id="customthemecodeinput" onchange="updatecustomtheme(this)" placeholder="enter your theme code...">
</div>
    </div>
</div>
        </div>
    </div>
    <div id="custom-overlay" style="display: none;">
        <div id="custom-dialog">
            <span id="close-dialog">&times;</span>
            <p id="custom-message"></p>
            <div id="prompt-input-container" style="display: none;">
                <input type="text" id="custom-input" maxlength="250" placeholder="Enter a value">
                <button id="submit-prompt">Submit</button>
            </div>
            <button id="close-alert">OK</button>
        </div>
    </div>
    <div id="overlay">
      <div class="progress-bar-container" id="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      <div class="checkmark" id="checkmark">✓</div>
      <div class="progress-text" id="progress-text">Analyzing</div>
    </div>
    </div>
    </div>


    <script>
    function gobackrotateanimation(deletebtnnnn) {
    const initialsign = deletebtnnnn.textContent;
    deletebtnnnn.style.animation = "none";
    void deletebtnnnn.offsetWidth; // Trigger reflow
    deletebtnnnn.style.animation = "rotatesignleft 0.5s ease-out";
    deletebtnnnn.disabled = true;
    setTimeout(() => {
        deletebtnnnn.disabled = false;
    }, 500);
}
        let lasteventsparentsection = document.getElementById('section0');
        let pastevents = {};
        let futureevents = {};
        function disablepastbtn() {
            if (lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn') && !lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn').classList.contains('disabled')){
                lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn').classList.add('disabled');
            }
        }

        function enablepastbtn() {
    if (lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn') && lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn').classList.contains('disabled')) {
        lasteventsparentsection.querySelector('.editor-selected-line-btns #pastbtn').classList.remove('disabled');
    }
}
        function gobacktolastpastevent() {
            if (!lasteventsparentsection){
                return;
            }
            if (!pastevents[lasteventsparentsection.id]){
                disablepastbtn();
                return;
            }
            const lastevent = pastevents[lasteventsparentsection.id].pop();
            
            if (!lastevent){
                disablepastbtn();
                return;
            }
            if (pastevents[lasteventsparentsection.id].length <= 0){
                disablepastbtn();
            }
            lastevent.reverse();
            let newfuture = [];
    lastevent.forEach(element => {
        if (element.type == "delete") {
            const allselectedlines = lasteventsparentsection.querySelectorAll(".hiddenlinesparent");
if (allselectedlines.length) { // Überprüfe, ob es ausgewählte Linien gibt
    allselectedlines.forEach(selectedline => {
        selectedline.classList.remove('hiddenlinesparent'); // Linie auswählen
        showHiddenElements(selectedline);
        updateSelectedClasses();
    });
}
            if (lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index - 1]) {
                lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index - 1].insertAdjacentElement("afterend", element.element);
                let futureelement = {
    element: element.element,
    type: "create",
    index: getElementIndexInParent(element.element) // Speichere den ursprünglichen Text
};
newfuture.push(futureelement);
            } else if (lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index]) {
                lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index].insertAdjacentElement("beforebegin", element.element);
                let futureelement = {
    element: element.element,
    type: "create",
    index: getElementIndexInParent(element.element) // Speichere den ursprünglichen Text
};
newfuture.push(futureelement);
            } else {
                lasteventsparentsection.querySelector('.code-editor-container').appendChild(element.element);
                let futureelement = {
    element: element.element,
    type: "create",
    index: getElementIndexInParent(element.element) // Speichere den ursprünglichen Text
};
newfuture.push(futureelement);
            }
            
if (allselectedlines.length) { // Überprüfe, ob es ausgewählte Linien gibt
    allselectedlines.forEach(selectedline => {
        analyzeAndHideElements(selectedline);
        updateSelectedClasses();
    });
}
            if (lasteventsparentsection.querySelector('.code-editor-line.selected')) {
    lasteventsparentsection.querySelectorAll('.eslbtn').forEach(dline => {
        if (dline.classList.contains('disabled')) {
            dline.classList.remove('disabled');
        }
    });
}
        }else if (element.type == "text"){
    let futureelement = {
        element: element.element,
        type: "text",
        text: element.element.textContent // Speichere den ursprünglichen Text
    };
    newfuture.push(futureelement);
            element.element.textContent = element.text;
        }else if (element.type == "create"){
    let futureelement = {
        element: element.element,
        type: "delete",
        index: element.index // Speichere den ursprünglichen Text
    };
    newfuture.push(futureelement);
            element.element.remove();
        }
    });
if (newfuture.length > 0) {
    if (!futureevents[lasteventsparentsection.id]) {
        futureevents[lasteventsparentsection.id] = [];
    }
    futureevents[lasteventsparentsection.id].push(newfuture); // Speichere das Event
}
        }
        function gobacktofutureevent() {
    if (!lasteventsparentsection) {
        return;
    }
    if (!futureevents[lasteventsparentsection.id]) {
        return;
    }
    const futureevent = futureevents[lasteventsparentsection.id].pop();
    
    if (!futureevent) {
        return;
    }
    futureevent.reverse();
    let newpast = [];
    
    futureevent.forEach(element => {
        if (element.type == "create") {
            if (lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index - 1]) {
                lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index - 1].insertAdjacentElement("afterend", element.element);
            } else if (lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index]) {
                lasteventsparentsection.querySelectorAll('.code-editor-container .code-editor-line')[element.index].insertAdjacentElement("beforebegin", element.element);
            } else {
                lasteventsparentsection.querySelector('.code-editor-container').appendChild(element.element);
            }
            let pastelement = {
                element: element.element,
                type: "delete",
                index: element.index // Speichere den ursprünglichen Text
            };
            newpast.push(pastelement);
        } else if (element.type == "text") {
            let pastelement = {
                element: element.element,
                type: "text",
                text: element.element.textContent // Speichere den ursprünglichen Text
            };
            newpast.push(pastelement);
            element.element.textContent = element.text;
        } else if (element.type == "delete") {
            let pastelement = {
                element: element.element,
                type: "create",
                index: element.index // Speichere den ursprünglichen Text
            };
            newpast.push(pastelement);
            element.element.remove();
        }
    });

    if (newpast.length > 0) {
        if (!pastevents[lasteventsparentsection.id]) {
            pastevents[lasteventsparentsection.id] = [];
        }
        pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
        enablepastbtn();
    }
}

        let createkonfetti = true;
        function createConfetti() {
            if (!createkonfetti){
                return;
            }
      for (let i = 0; i < 100; i++) {
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.top = `${-100}px`;
        confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
        confetti.style.animationDuration = `${Math.random() * 2 + 3}s`;
        confetti.style.animationDelay = `${Math.random() * 2}s`;  /* Versatz für den Abstand */
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        document.body.appendChild(confetti);

      }
      createkonfetti = false;
    }

    function mergecode(htmlCodeComtainer, additionalCode, tofinde) {
    closesidebaronsmallscreensizes();
closeeverything();
let navBar = document.getElementById('nav-bar');
let scrolltothissection = navBar.querySelector('.nav-dot[data-index="' + htmlCodeComtainer.parentElement.id.replace('section', '') + '"]');
if (scrolltothissection) {
    scrolltothissection.scrollIntoView({ behavior: 'smooth' });
    document.querySelector('.overlay-back-btn').click();
}
const allselectedlines = htmlCodeComtainer.querySelectorAll(".hiddenlinesparent");
if (allselectedlines.length) { // Überprüfe, ob es ausgewählte Linien gibt
    allselectedlines.forEach(selectedline => {
        selectedline.classList.remove('hiddenlinesparent'); // Linie auswählen
        showHiddenElements(selectedline);
        updateSelectedClasses();
    });
}
    //unfoldalllines();
    let celines = htmlCodeComtainer.querySelectorAll('.code-editor-line');
    relevantlines = [];
    celines.forEach((line, index) => {
        if (line.innerText.includes(tofinde)){
            relevantlines.push(index);
        }
    });
    let celine = null;
    if (tofinde == "</head>"){
    if (relevantlines == [] || !celines[relevantlines[0] - 1]){
        showAlert('Merge Failed');
        return;
    }
    
    celine = celines[relevantlines[0] - 1];
    }else {
        if (relevantlines == [] || !celines[relevantlines[relevantlines.length - 1] - 1]) {
    showAlert('Merge Failed');
    return;
}

celine = celines[relevantlines[relevantlines.length - 1] - 1];
    }
    if (!celine) {
        showAlert('the merge failed');
        return;
    } // Sicherstellen, dass celine existiert
    startLoadingMerge();
    let newpast = [];
lasteventsparentsection = section;
let pastelement = {
    element: celine,
    type: "text",
    text: celine.textContent // Speichere den ursprünglichen Text
};
newpast.push(pastelement);

    // Ermitteln der führenden Leerzeichen in der aktuellen Linie
    let spaces = "";
    let extraspacesadded = false;
    let continueSpaces = true;
    for (let i = 0; i < celine.textContent.length; i++) {
        let character = celine.textContent[i];
        if ((character === " " || character === "\u00A0") && continueSpaces) {
            spaces += "\u00A0"; // Unicode für nicht-trennbares Leerzeichen
        } else {
            continueSpaces = false;
        }
    }
    if (celine.textContent.trim().endsWith('<style>') || celine.textContent.trim().startsWith('<style>')) {
    extraspacesadded = true;
    spaces += "\u00A0\u00A0\u00A0\u00A0";
}else if (celine.textContent.trim().endsWith('<body>') || celine.textContent.trim().startsWith('<body>')){
    spaces += "\u00A0\u00A0\u00A0\u00A0";
}

    // Kopierten Text aus der Zwischenablage holen
    let pasteText = additionalCode;

    // Aufteilen des eingefügten Textes bei Zeilenumbrüchen
    let lines = pasteText.split(/\r\n|\n|\r/);

    // Verarbeite die erste Linie: Der Text wird in die aktuelle Linie eingefügt
    let firstreferencespacesforspacecoun = convertToNonBreakingSpaces(lines[0]);

    let space2 = "";
    let continueSpace2 = true;
    for (let i = 0; i < firstreferencespacesforspacecoun.length; i++) {
        let character = firstreferencespacesforspacecoun[i];
        if ((character === " " || character === "\u00A0") && continueSpace2) {
            space2 += "\u00A0"; // Unicode für nicht-trennbares Leerzeichen
        } else {
            continueSpace2 = false;
        }
    }
    const firstLineLeadingSpacesCount = space2.length;
    let lineSpacesCoun2 = 0;
    let continueLineSpac2 = true;

    for (let j = 0; j < lines[0].length; j++) {
        let character = lines[0][j];
        if ((character === " " || character === "\u00A0") && continueLineSpac2) {
            lineSpacesCoun2++;
        } else {
            continueLineSpac2 = false;
        }
    }

    // Entfernen der führenden Leerzeichen, falls sie gleich oder größer als die der ersten Zeile sind
    let adjustedLin2 = lines[0];
    if (lineSpacesCoun2 >= firstLineLeadingSpacesCount) {
        adjustedLin2 = lines[0].slice(firstLineLeadingSpacesCount);
    }
    celine.textContent += convertToNonBreakingSpaces(adjustedLin2);
    let longspaces = spaces + "\u00A0\u00A0\u00A0\u00A0";
    // Für die folgenden Zeilen, füge sie als neue Linien (divs) hinzu
    let startwithscriptorstyle = additionalCode.trim().startsWith('<style>') || additionalCode.trim().startsWith('<script>');
    for (let i = 1; i < lines.length; i++) {
        correntids += 1;
        const newline = document.createElement('div');
        newline.setAttribute('contenteditable', 'true');
        newline.id = correntids;
        newline.classList.add('code-editor-line');

        // Zählen der führenden Leerzeichen in der aktuellen Linie
        let lineSpacesCount = 0;
        let continueLineSpaces = true;

        for (let j = 0; j < lines[i].length; j++) {
            let character = lines[i][j];
            if ((character === " " || character === "\u00A0") && continueLineSpaces) {
                lineSpacesCount++;
            } else {
                continueLineSpaces = false;
            }
        }

        // Entfernen der führenden Leerzeichen, falls sie gleich oder größer als die der ersten Zeile sind
        let adjustedLine = lines[i];
        if (lineSpacesCount >= firstLineLeadingSpacesCount) {
            adjustedLine = lines[i].slice(firstLineLeadingSpacesCount);
        }
        if (i != lines.length - 1 && startwithscriptorstyle && i != 1 && !extraspacesadded) {
            newline.textContent = longspaces + convertToNonBreakingSpaces(adjustedLine);
        } else {
            newline.textContent = spaces + convertToNonBreakingSpaces(adjustedLine);
        }
        celine.insertAdjacentElement('afterend', newline);
let pastelement2 = {
    element: newline,
    type: "create",
    index: getElementIndexInParent(newline) // Speichere den ursprünglichen Text
};
newpast.push(pastelement2);
        celine = newline;
        if (i == lines.length - 1 && htmlCodeComtainer.parentElement && htmlCodeComtainer.parentElement.style.display != "none") {
            celine.scrollIntoView({
                behavior: 'smooth',
                block: 'center', // Aligns the element in the middle vertically
                inline: 'center' // Aligns the element in the middle horizontally (optional)
            });
        }
        if (allselectedlines.length) { // Überprüfe, ob es ausgewählte Linien gibt
    allselectedlines.forEach(selectedline => {
        analyzeAndHideElements(selectedline);
        updateSelectedClasses();
    });
}
    }
    if (newpast.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
    enablepastbtn();
}
}

    function modifyHTML(htmlCode, additionalCode, type, htmlCodeComtainer) {
    if (typeof htmlCode !== 'string' || typeof additionalCode !== 'string' || !['css', 'js'].includes(type)) {
        showAlert('Merge Failed');
        return "";
    }

    // Regex für die entsprechenden Bereiche
    const bodyRegex = /<body[^>]*>([\s\S]*?)<\/body>/i;
    const headRegex = /<head[^>]*>([\s\S]*?)<\/head>/i;
    const styleTagRegex = /<style[^>]*>([\s\S]*?)<\/style>/i;

    if (type == 'js') {
        // Füge den JavaScript-Code zum Inhalt des Body-Tags hinzu.
        if (bodyRegex.test(htmlCode)){
            mergecode(htmlCodeComtainer, '\n<script>\n' + additionalCode + '\n<\/script>', '</body>');
        }else {
            showAlert('make sure that you have a body tag in your html code');
        }
        /*const scriptTag = `<script>\n${additionalCode}\n<\/script>`;
        htmlCode = htmlCode.replace(bodyRegex, (match, bodyContent) => {
            return `<body>\n${bodyContent}\n${scriptTag}\n</body>`;
        });*/
    } else if (type == 'css') {
        if (styleTagRegex.test(htmlCode)) {
            mergecode(htmlCodeComtainer, '\n' + additionalCode, '</style>')
            // Wenn kein Style-Tag existiert, füge es zum Head hinzu
            /*const styleTag = `<style>${additionalCode}</style>`;
            htmlCode = htmlCode.replace(headRegex, (match, headContent) => {
                return `<head>\n${headContent}\n${styleTag}\n</head>`;
            });*/
        }else if (headRegex.test(htmlCode)) {
            mergecode(htmlCodeComtainer, '\n<style>\n' + additionalCode + '\n<\/style>', '</head>')
        }else {
            showAlert('make sure that you have a head or a style tag in your html code');
        }
    }else {
        showAlert('you can only merge css, javascript and html, with eachother');
    }

    return htmlCode;
}
    function adjustElementPosition(element) {
    const rect = element.getBoundingClientRect();
    const screenHeight = window.innerHeight;

    // Berechne, wie viel das Element unter dem sichtbaren Bereich ist
    const distanceToBottom = rect.bottom - screenHeight;

    // Wenn das Element unter dem sichtbaren Bereich ist, passen wir seine Position an
    if (distanceToBottom > 0) {
        // Setze die top Position des Elements so, dass es im sichtbaren Bereich bleibt
        element.style.top = `${rect.top - distanceToBottom}px`;
    }
}


function adjustElementPositionleft(element) {
    const rect = element.getBoundingClientRect();
    const screenWidth = window.innerWidth;

    // Berechne, wie viel das Element rechts aus dem sichtbaren Bereich herausragt
    const distanceToRight = rect.right - screenWidth;

    // Wenn das Element rechts außerhalb des sichtbaren Bereichs ist, passe die Position an
    if (distanceToRight > 0) {
        element.style.left = `${rect.left - distanceToRight}px`;
    }

    // Überprüfe, ob das Element links aus dem sichtbaren Bereich herausragt
    if (rect.left < 0) {
        element.style.left = "0px"; // Stelle sicher, dass es am linken Rand bleibt
    }
}


    function createOptionsContainer(targetElement, number) {
  const options = [
    { icon: "⚠", text: "Delete" },
    { icon: "□", text: "Copy Code" },
    { icon: "□", text: "Copy Path" },
    { icon: "-", text: "Merge" },
    { icon: "↓", text: "Download" },
  ];

  // Overlay erstellen
  const overlay = document.createElement("div");
  overlay.className = "overlay";
  document.body.appendChild(overlay);

  // Options-Container erstellen
  const container = document.createElement("div");
  container.className = "options-container";
  overlay.appendChild(container); // Füge den Container hinzu, bevor die Position berechnet wird

  // Optionen hinzufügen
  options.forEach((option) => {
    const optionItem = document.createElement("div");
    optionItem.className = "option-item";

    const icon = document.createElement("button");
    icon.className = "option-icon";
    icon.textContent = option.icon;

    const text = document.createElement("span");
    text.className = "option-text";
    text.textContent = option.text;

    // Funktionen definieren
    const copyText = (text) => {
      try {
        const textarea = document.createElement("textarea");
        textarea.value = text.trim();
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand("copy");
        document.body.removeChild(textarea);
      } catch (error) {
        const catchederror = error;
      }
    };

    const copyCode = (element) => {
      let text = "";
      element.querySelectorAll(".code-editor-line").forEach((line) => {
        text += line.textContent + "\n";
      });
      try {
        const textarea = document.createElement("textarea");
        textarea.value = text.trim();
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand("copy");
        document.body.removeChild(textarea);
      } catch (error) {
        const catchederror = error;
      }
    };

    function getalllinestext(element) {
        let text = "";
element.querySelectorAll(".code-editor-line").forEach((line) => {
    text += line.textContent + "\n";
});
return text;
    }
    function MergeFiles() {
    showPrompt('merge with file:', (filename) => {
        let allfilenames = document.querySelectorAll('.filedot .filePathInput');
        let allfilenamesarray = Array.from(allfilenames).map(input => input.value);
        if (!allfilenamesarray.includes(filename)) {
            showAlert('you have no html, css or javascript file with the name: ' + filename);
            return;
        }
        allfilenames.forEach(file => {
            if (file.value == filename) {
                let mergedcode = "";
                let htmlfile = "";
                if (targetElement.classList.contains('edit-btn') && targetElement.parentElement.parentElement.querySelector('.notclickable')) {
                    if (targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.html') && file.value.trim().endsWith('.css') && !file.value.trim().endsWith('.js')) {
                        mergedcode = modifyHTML(
                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                            'css',
                            document.querySelector(`#section${number} .code-editor-container`)
                        );
                        htmlfile = document.querySelector(`#section${number} .code-editor-container`);
                    } else if (targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.html') && !file.value.trim().endsWith('.css') && file.value.trim().endsWith('.js')) {
                        mergedcode = modifyHTML(
                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                            'js',
                            document.querySelector(`#section${number} .code-editor-container`)
                        );
                        htmlfile = document.querySelector(`#section${number} .code-editor-container`);
                    } else if (targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.css') && file.value.trim().endsWith('.html') && !file.value.trim().endsWith('.js')) {
                        mergedcode = modifyHTML(
                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                            'css',
                            document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)
                        );
                        
                        htmlfile = document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`);
                    } else if (targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.js') && file.value.trim().endsWith('.html') && !file.value.trim().endsWith('.css')) {
                        mergedcode = modifyHTML(
                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                            'js',
                            document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)
                        );
                        htmlfile = document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`);
                    }else {
    showAlert('you can only merge javascript and css with html code');
}
                } else {
                    if (targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.html') && file.value.trim().endsWith('.css') && !file.value.trim().includes('.js')) {
                        mergedcode = modifyHTML(
                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                            'css',
                            document.querySelector(`#section${number} .code-editor-container`)
                        );
                        htmlfile = document.querySelector(`#section${number} .code-editor-container`);
                    } else if (targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.html') && !file.value.trim().endsWith('.css') && file.value.trim().endsWith('.js')) {
                        mergedcode = modifyHTML(
                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                            'js',
                            document.querySelector(`#section${number} .code-editor-container`)
                        );
                        htmlfile = document.querySelector(`#section${number} .code-editor-container`);
                    } else if (targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.css') && file.value.trim().endsWith('.html') && !file.value.trim().endsWith('.js')) {
                        mergedcode = modifyHTML(
                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                            'css',
                            document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)
                        );
                        htmlfile = document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`);
                    } else if (targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.js') && file.value.trim().endsWith('.html') && !file.value.trim().endsWith('.css')) {
                        mergedcode = modifyHTML(
                            getalllinestext(document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)),
                            getalllinestext(document.querySelector(`#section${number} .code-editor-container`)),
                            'js',
                            document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`)
                        );
                        htmlfile = document.querySelector(`#section${file.parentElement.getAttribute('data-index')} .code-editor-container`);
                    }else {
    showAlert('you can only merge javascript and css with html code');
}
                }
                /*if (htmlfile != "" && mergedcode != ""){
                    const lines = mergedcode.split('\n');
htmlfile.innerHTML = "";
lines.forEach((lineText) => {
    const line = document.createElement('div');
    line.classList.add('code-editor-line');
    line.setAttribute('contenteditable', 'true');
    line.innerText = lineText;
    htmlfile.appendChild(line);
});
                }*/
            }
        });
    });
}

    // Event-Handler für Optionen
    if (option.text == "Delete") {
      optionItem.onclick = () => {
        overlay.remove();
        deletethisfile(number);
      };
    } else if (option.text == "Download" && targetElement.parentElement) {
      optionItem.onclick = () => {
        overlay.remove();
        //downloadFile(targetElement.parentElement.textContent.replace("⋮", ""));
        if (targetElement.classList.contains('edit-btn') && targetElement.parentElement.parentElement.querySelector('.notclickable')) {
    downloadFile(targetElement.parentElement.parentElement.querySelector('.notclickable').textContent);
} else {
    downloadFile(targetElement.parentElement.textContent.replace("⋮", ""));
}
      };
    } else if (option.text == "Copy Path" && targetElement.parentElement) {
      optionItem.onclick = () => {
        overlay.remove();
        if (targetElement.classList.contains('edit-btn') && targetElement.parentElement.parentElement.querySelector('.notclickable')){
            copyText(targetElement.parentElement.parentElement.querySelector('.notclickable').textContent);
        }else {
            copyText(targetElement.parentElement.textContent.replace("⋮", ""));
        }
      };
    } else if (
      option.text == "Copy Code" &&
      document.querySelector(`#section${number} .code-editor-container`)
    ) {
      const textToCopy = document.querySelector(
        `#section${number} .code-editor-container`
      );
      optionItem.onclick = () => {
        overlay.remove();
        copyCode(textToCopy);
      };
    }else if (option.text == 'Merge' && targetElement.parentElement && document.querySelector(`#section${number} .code-editor-container`)){
        optionItem.onclick = () => {
    overlay.remove();
    MergeFiles();
};
    }

    // Option entfernen, falls nicht erlaubt
    if (number == "0" && option.text == "Delete") {
      return;
    }
    
    if (targetElement.classList.contains('edit-btn') && targetElement.parentElement.parentElement.querySelector('.notclickable')) {
    if (option.text == "Merge" && !targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.html') && !targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.css') && !targetElement.parentElement.parentElement.querySelector('.notclickable').textContent.trim().endsWith('.js')){
        return;
    }
} else {
    if (option.text == "Merge" && !targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.html') && !targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.js') && !targetElement.parentElement.textContent.replace("⋮", "").trim().endsWith('.css')){
        return;
    }
}

    // Elemente anhängen
    optionItem.appendChild(icon);
    optionItem.appendChild(text);
    container.appendChild(optionItem);
  });

  // Position des Options-Containers relativ zum Ziel-Element
  const targetRect = targetElement.getBoundingClientRect();
  setTimeout(() => {
    container.style.position = "absolute";
    container.style.top = `${targetRect.bottom + 5}px`;
    adjustElementPosition(container);
    container.style.left = `${
            targetRect.left + targetRect.width / 2 - container.offsetWidth / 2
        }px`;
    adjustElementPositionleft(container);
    /*if (window.innerWidth <= 768){
        container.style.right = "0";
    }else {
        container.style.left = `${
            targetRect.left + targetRect.width / 2 - container.offsetWidth / 2
        }px`;
    }*/
  }, 0);

  // Overlay bei Klick entfernen
  overlay.addEventListener("click", (event) => {
    if (event.target === overlay) {
      overlay.remove();
    }
  });
}



    function typeEffect(element, newText, callback) {
    // Holen des aktuellen Textes vom Element
    const originalText = element.textContent || ""; // Sicherstellen, dass kein Nullwert verarbeitet wird

    let index = originalText.length;

    // Schritt 1: Zeichen für Zeichen abbauen
    function removeText() {
        if (index > 0) {
            element.textContent = originalText.slice(0, --index);
            setTimeout(removeText, 100); // Geschwindigkeit anpassen
        } else {
            // Wenn der Text leer ist, Schritt 2 starten
            buildText();
        }
    }

    let buildIndex = 0;

    // Schritt 2: Zeichen für Zeichen aufbauen
    function buildText() {
        if (buildIndex < newText.length) {
            element.textContent += newText.charAt(buildIndex++);
            setTimeout(buildText, 100); // Geschwindigkeit anpassen
        } else if (callback) {
            // Callback ausführen, wenn der neue Text vollständig ist
            callback();
        }
    }

    // Tipp-Effekt starten
    removeText();
}
    
    let themetoedit = document.querySelector(`.custom-theme`);
    function removeThemeProperties() {
  if (!themetoedit) {
    return; // Wenn `custom-theme` nicht existiert, nichts tun
  }

  // Entferne die spezifischen CSS-Variablen
  themetoedit.style.removeProperty('--selected-color');
  themetoedit.style.removeProperty('--rectangleborder');
  themetoedit.style.removeProperty('--checkmark-color');
  themetoedit.style.removeProperty('--switchcheckedbackground-color');
  themetoedit.style.removeProperty('--loadingbarloadedbackground-color');
  themetoedit.style.removeProperty('--rectanglecolorcolor-color');
  themetoedit.style.removeProperty('--codeeditoreditbtn-color');
  themetoedit.style.removeProperty('--lightdarkgrey-color');
  themetoedit.style.removeProperty('--lightgrey-color');
  themetoedit.style.removeProperty('--background-color');
  themetoedit.style.removeProperty('--white-color');
  themetoedit.style.removeProperty('--commandlistbackground-color');
  themetoedit.style.removeProperty('--codeeditoreditbtnbackground-color');
  themetoedit.style.removeProperty('--contentcontainer-color');
  themetoedit.style.removeProperty('--deviceborder-color');
themetoedit.style.removeProperty('--browserheaderborderbottom-color');
themetoedit.style.removeProperty('--urlbarbackground-color');
themetoedit.style.removeProperty('--urlbarcolor-color');
themetoedit.style.removeProperty('--black-color');
themetoedit.style.removeProperty('--spencialbtnbackground-color');
themetoedit.style.removeProperty('--browsercontainerbackground-color');
themetoedit.style.removeProperty('--browseriframebackgroundcolor-color');
themetoedit.style.removeProperty('--browsercontainerbackground-color');
themetoedit.style.removeProperty('--seccontainerbackground-color');
}

function updateSelectedColor() {
  themetoedit = document.querySelector(`.custom-theme`);
  if (!themetoedit){
      return;
  }
  const selectedColor = document.getElementById('selectedColor').value;
  const alpha = document.getElementById('selectedAlpha').value / 100;
  const rgba = hexToRgba(selectedColor, alpha);
  themetoedit.style.setProperty('--selected-color', rgba);
  themetoedit.style.setProperty('--darkgrey-color', rgba);
  themetoedit.style.setProperty('--lightgrey-color', rgba);
  themetoedit.style.setProperty('--urlbarbackground-color', rgba);
  themetoedit.style.setProperty('--spencialbtnbackground-color', rgba);
  themetoedit.style.setProperty('--checkmark-color', rgba);
  themetoedit.style.setProperty('--seccontainerbackground-color', rgba);
  generateCustomThemeCode();
}

//--commandlistcolor-color: #A5A5A5;
function isColorLightOrDark(rgba) {
    // Extrahiere die Werte von r, g und b mit einer Regex
    const match = rgba.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);
    if (!match) {
        throw new Error("Ungültiger RGBA-Wert");
    }

    // Parse die RGB-Werte
    const r = parseInt(match[1], 10);
    const g = parseInt(match[2], 10);
    const b = parseInt(match[3], 10);

    // Berechne die relative Helligkeit (Luminanz)
    // Die Formel berücksichtigt, dass grün mehr zur Wahrnehmung beiträgt
    const brightness = 0.2126 * r + 0.7152 * g + 0.0722 * b;

    // Definiere den Schwellenwert (128 ist ein üblicher Wert)
    return brightness > 128 ? "light" : "dark";
}
function updateColorColor() {
    themetoedit = document.querySelector(`.custom-theme`);
    if (!themetoedit) {
        return;
    }
    const selectedColor = document.getElementById('colorColor').value;
    const alpha = document.getElementById('colorAlpha').value / 100;
    const rgba = hexToRgba(selectedColor, alpha);
    themetoedit.style.setProperty('--urlbarcolor-color', rgba);
    themetoedit.style.setProperty('--black-color', rgba);
    generateCustomThemeCode();
}
function updateBackgroundColor() {
    themetoedit = document.querySelector(`.custom-theme`);
    if (!themetoedit) {
        return;
    }
    const selectedColor = document.getElementById('backgroundColor').value;
    const alpha = document.getElementById('backgroundAlpha').value / 100;
    const rgba = hexToRgba(selectedColor, alpha);
    themetoedit.style.setProperty('--background-color', rgba);
    themetoedit.style.setProperty('--white-color', rgba);
    themetoedit.style.setProperty('--commandlistbackground-color', rgba);
    themetoedit.style.setProperty('--codeeditoreditbtnbackground-color', rgba);
    themetoedit.style.setProperty('--contentcontainer-color', rgba);
    if (isColorLightOrDark(rgba) == "light"){
        themetoedit.style.setProperty('--browsercontainerbackground-color', '#fff');
themetoedit.style.setProperty('--browseriframebackgroundcolor-color', '#fff');
themetoedit.style.setProperty('--browsercontainerbackground-color', '#f7f7f7');
    }else {
        themetoedit.style.setProperty('--browsercontainerbackground-color', '#000');
themetoedit.style.setProperty('--browseriframebackgroundcolor-color', '#000');
themetoedit.style.setProperty('--browsercontainerbackground-color', '#0E0F0E');
    }
    generateCustomThemeCode();
}

// Funktion zur Aktualisierung der 'rectangleborder' CSS-Variable (inkl. Alpha)
function updateRectangleBorderColor() {
    themetoedit = document.querySelector(`.custom-theme`);
if (!themetoedit) {
    return;
}
  const rectangleBorderColor = document.getElementById('rectangleBorderColor').value;
  const alpha = document.getElementById('rectangleBorderAlpha').value / 100;
  const rgba = hexToRgba(rectangleBorderColor, alpha);
  themetoedit.style.setProperty('--rectangleborder', rgba);
  themetoedit.style.setProperty('--deviceborder-color', rgba);
  themetoedit.style.setProperty('--browserheaderborderbottom-color', rgba);
  generateCustomThemeCode();
}

// Funktion zur Aktualisierung der 'switchcheckedbackground-color' CSS-Variable (inkl. Alpha)
function updateSwitchCheckedBackgroundColor() {
    themetoedit = document.querySelector(`.custom-theme`);
if (!themetoedit) {
    return;
}
  const switchCheckedBackgroundColor = document.getElementById('switchCheckedBackgroundColor').value;
  const alpha = document.getElementById('switchCheckedAlpha').value / 100;
  const rgba = hexToRgba(switchCheckedBackgroundColor, alpha);
  themetoedit.style.setProperty('--switchcheckedbackground-color', rgba);
  generateCustomThemeCode();
}

// Funktion zur Aktualisierung der 'loadingbarloadedbackground-color' CSS-Variable (inkl. Alpha)
function updateLoadingBarLoadedBackgroundColor() {
    themetoedit = document.querySelector(`.custom-theme`);
if (!themetoedit) {
    return;
}
  const loadingBarLoadedBackgroundColor = document.getElementById('loadingBarLoadedBackgroundColor').value;
  const alpha = document.getElementById('loadingBarLoadedAlpha').value / 100;
  const rgba = hexToRgba(loadingBarLoadedBackgroundColor, alpha);
  themetoedit.style.setProperty('--loadingbarloadedbackground-color', rgba);
  generateCustomThemeCode();
}

// Funktion zur Aktualisierung der 'rectanglecolorcolor-color' CSS-Variable (inkl. Alpha)
function updateRectangleColorColor() {
    themetoedit = document.querySelector(`.custom-theme`);
if (!themetoedit) {
    return;
}
  const rectangleColorColor = document.getElementById('rectangleColorColor').value;
  const alpha = document.getElementById('rectangleColorAlpha').value / 100;
  const rgba = hexToRgba(rectangleColorColor, alpha);
  themetoedit.style.setProperty('--rectanglecolorcolor-color', rgba);
  generateCustomThemeCode();
}

function updatecodeeditoreditbtncolor() {
    themetoedit = document.querySelector(`.custom-theme`);
if (!themetoedit) {
    return;
}
const codeeditoreditbtncolor = document.getElementById('codeeditoreditbtncolor').value;
const alpha = document.getElementById('codeeditoreditbtncolorAlpha').value / 100;
const rgba = hexToRgba(codeeditoreditbtncolor, alpha);
themetoedit.style.setProperty('--codeeditoreditbtn-color', rgba);
generateCustomThemeCode();
}

function updatecustomtheme(codeInputField) {
    const themeCode = codeInputField.value.trim(); // Eingabe bereinigen
    const everyValue = themeCode.split('.'); // Aufteilung nach "."
    const everyColorInput = document.querySelectorAll('.switchtothememaincolorspan2');
    const everyRangeInput = document.querySelectorAll('.themeoption input[type="range"]');

    everyValue.forEach((value, index) => {
        const [valueHex, valueRange] = value.split(','); // Aufteilen in Hex-Wert und Range-Wert

        if (isValidHex(valueHex) && isValidNumber(valueRange)) {
            if (everyColorInput[index]) {
                everyColorInput[index].value = valueHex.trim();
            }
            if (everyRangeInput[index]) {
                everyRangeInput[index].value = parseFloat(valueRange.trim());
            }
            updateSelectedColor();
            updateColorColor();
            updateBackgroundColor();
            updateRectangleBorderColor();
            updateSwitchCheckedBackgroundColor();
            updateLoadingBarLoadedBackgroundColor();
            updateRectangleColorColor();
            updatecodeeditoreditbtncolor();
        }
    });
}

function generateCustomThemeCode() {
    const everyColorInput = document.querySelectorAll('.switchtothememaincolorspan2');
    const everyRangeInput = document.querySelectorAll('.themeoption input[type="range"]');
    
    let themeCode = [];

    everyColorInput.forEach((colorInput, index) => {
        const colorValue = colorInput.value.trim(); // Hex-Wert auslesen
        const rangeValue = everyRangeInput[index]?.value.trim(); // Range-Wert auslesen

        if (isValidHex(colorValue) && isValidNumber(rangeValue)) {
            themeCode.push(`${colorValue},${rangeValue}`);
        }
    });

    const codeInput = document.querySelector('.customthemecodeinput');
    if (codeInput) {
        codeInput.value = themeCode.join('.'); // Alle Werte verbinden und einfügen
    }
}

function isValidNumber(value) {
    const number = parseFloat(value.trim()); // Trim zur Sicherheit
    return !isNaN(number) && number >= 0 && number <= 100; // Gültigkeitsbereich angepasst
}

function isValidHex(hex) {
    const hexPattern = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/; // Hex-Pattern für 3 oder 6 Zeichen
    return hexPattern.test(hex.trim());
}


// Hilfsfunktion zur Umwandlung von Hex-Farben in RGBA
function hexToRgba(hex, alpha) {
  // Hex-Farbe in RGB umwandeln
  const r = parseInt(hex.slice(1, 3), 16);
  const g = parseInt(hex.slice(3, 5), 16);
  const b = parseInt(hex.slice(5, 7), 16);

  // RGBA-Wert zurückgeben
  return `rgba(${r}, ${g}, ${b}, ${alpha})`;
}




    function switchtotheme(theme) {
    // Entferne nur Theme-Klassen, z. B. "dark" oder "light"
    if (theme != "custom-theme"){
        removeThemeProperties();
    }
    document.body.classList.remove('helloween-theme', "winter-theme", "spring-theme", "summer-theme", "autumn-theme", "vintage-theme", "futuristic-theme", "nature-theme", "mystic-theme", "candy-theme", "space-theme", "custom-theme");
    document.body.className = "";
    document.body.classList.add(theme);
}
function removeallthemes() {
    // Entferne nur Theme-Klassen, z. B. "dark" oder "light"
    removeThemeProperties();
    document.body.classList.remove('helloween-theme', "winter-theme", "spring-theme", "summer-theme", "autumn-theme", "vintage-theme", "futuristic-theme", "nature-theme", "mystic-theme", "candy-theme", "space-theme", "custom-theme");
    document.body.className = "";
}
    function showallfilescontainer() {
        if (document.querySelector('.overlay-container').style.display != "flex") {
            document.querySelector('.overlay-container').style.display = "flex";
            document.querySelector('.overlay-container').style.animation = "none";
            void document.querySelector('.overlay-container').offsetWidth; // Trigger reflow
            document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
        }
        closesidebaronsmallscreensizes();
    }
    
    function closesidebaronsmallscreensizes() {
        if (document.querySelector('.divcodeeditor-container').classList.contains('smallsidebarenabled')){
            document.querySelector('.divcodeeditor-container').classList.remove('smallsidebarenabled');
        }
    }
    function closeeverything() {
        hidecommandoverlay();
hidesignexplenationoverlay();
closeviewthisfile();
hidethemeoverlay();
document.querySelector('.overlay-close-btn').click();
closesidebaronsmallscreensizes();
    }
    function scrollviewintoview() {
        const view = document.getElementById('view-nav-dot');
        view.scrollIntoView({ behavior: 'smooth' });
        document.querySelector('.nav-bar').style.overflow = "scroll";
        document.querySelector('.nav-bar').style.overflowY = "hidden";
        closeeverything();
    }
    function viewbottominputoninput(viewelementinputelement){
        document.getElementById('scrollviewintoviewbtn').textContent = viewelementinputelement.value;
    }
    function togglesidebarbuttonfunction() {
    const mediaQuery = window.matchMedia('(max-width: 700px)');
    if (mediaQuery.matches) { // Wenn die Bildschirmbreite <= 900px ist
        if (document.querySelector('.divcodeeditor-container').classList.contains('sidebarenabled')){
            document.querySelector('.divcodeeditor-container').classList.remove('sidebarenabled');
        }
        document.querySelector('.divcodeeditor-container').classList.toggle('smallsidebarenabled');
    } else { // Wenn die Bildschirmbreite > 900px ist
        if (document.querySelector('.divcodeeditor-container').classList.contains('smallsidebarenabled')){
            document.querySelector('.divcodeeditor-container').classList.remove('smallsidebarenabled');
        }
        document.querySelector('.divcodeeditor-container').classList.toggle('sidebarenabled');
    }
}
    const mediaQuery = window.matchMedia('(max-width: 700px)');

    if (mediaQuery.matches){
        if (document.querySelector('.divcodeeditor-container').classList.contains('sidebarenabled')){
            document.querySelector('.divcodeeditor-container').classList.remove('sidebarenabled');
        }
    }
    window.addEventListener('resize', function() {

    // Beispiel: Auf bestimmte Breite reagieren
    if (window.innerWidth <= 700) {
        if (document.querySelector('.divcodeeditor-container').classList.contains('sidebarenabled')){
            document.querySelector('.divcodeeditor-container').classList.remove('sidebarenabled');
        }
    }else if (window.innerWidth > 700) {
        if (document.querySelector('.divcodeeditor-container').classList.contains('smallsidebarenabled')){
            document.querySelector('.divcodeeditor-container').classList.remove('smallsidebarenabled');
        }
    }
});


    function showcommandoverlay() {
        document.querySelector('.commandsoverlay-container').style.display = "flex";
            document.querySelector('.commandsoverlay-container').style.animation = "none";
            void document.querySelector('.commandsoverlay-container').offsetWidth;
            document.querySelector('.commandsoverlay-container').style.animation = "swipein 0.5s ease-out";
    }
    function hidecommandoverlay() {
            document.querySelector('.commandsoverlay-container').style.animation = "none";
            void document.querySelector('.commandsoverlay-container').offsetWidth;
            document.querySelector('.commandsoverlay-container').style.animation = "swipeout 0.5s ease-out";
        setTimeout(() => {
        document.querySelector('.commandsoverlay-container').style.display = "none";
        }, 500);
    }
    function showsignexplenationoverlay() {
        document.querySelector('.singsoverlay-container').style.display = "flex";
            document.querySelector('.singsoverlay-container').style.animation = "none";
            void document.querySelector('.singsoverlay-container').offsetWidth;
            document.querySelector('.singsoverlay-container').style.animation = "swipein 0.5s ease-out";
    }
    function hidesignexplenationoverlay() {
            document.querySelector('.singsoverlay-container').style.animation = "none";
            void document.querySelector('.singsoverlay-container').offsetWidth;
            document.querySelector('.singsoverlay-container').style.animation = "swipeout 0.5s ease-out";
        setTimeout(() => {
        document.querySelector('.singsoverlay-container').style.display = "none";
        }, 500);
    }
    function showthemeoverlay() {
        if (document.querySelector('.theme-overlay').style.display == "flex"){
            return;
        }
        document.querySelector('.theme-overlay').style.display = "flex";
            document.querySelector('.theme-overlay').style.animation = "none";
            void document.querySelector('.theme-overlay').offsetWidth;
            document.querySelector('.theme-overlay').style.animation = "swipein 0.5s ease-out";
    }
    function hidethemeoverlay() {
            document.querySelector('.theme-overlay').style.animation = "none";
            void document.querySelector('.theme-overlay').offsetWidth;
            document.querySelector('.theme-overlay').style.animation = "swipeout 0.5s ease-out";
        setTimeout(() => {
        document.querySelector('.theme-overlay').style.display = "none";
        }, 500);
    }
        const overlay = document.getElementById('custom-overlay');
        const messageBox = document.getElementById('custom-message');
        const closeAlertButton = document.getElementById('close-alert');
        const promptInputContainer = document.getElementById('prompt-input-container');
        const promptInput = document.getElementById('custom-input');
        const submitPromptButton = document.getElementById('submit-prompt');
        const closeDialog = document.getElementById('close-dialog');

        // Function to show a custom alert

        function showAlert(message) {
            setTimeout(() => {
                messageBox.textContent = message;
promptInputContainer.style.display = 'none'; // Hide the input for alerts
closeAlertButton.style.display = 'block'; // Show the OK button
overlay.style.display = 'flex'; // Show the overlay
            }, 100);
        }

        // Function to show a custom prompt
        function showPrompt(message, callback) {
            messageBox.textContent = message;
            promptInputContainer.style.display = 'block'; // Show the input for prompts
            closeAlertButton.style.display = 'none'; // Hide the OK button for prompts
            overlay.style.display = 'flex'; // Show the overlay

            submitPromptButton.onclick = () => {
                const inputValue = promptInput.value;
                callback(inputValue); // Return the input value to the callback function
                closeCustomDialog();
            };
        }

        // Function to close the custom dialog
        function closeCustomDialog() {
            overlay.style.display = 'none'; // Hide the overlay
            promptInput.value = ''; // Clear the input value
        }

        // Event listeners for closing the dialog
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) { // Close if the background (overlay) is clicked
                closeCustomDialog();
            }
        });

        closeAlertButton.addEventListener('click', closeCustomDialog);
        closeDialog.addEventListener('click', closeCustomDialog);



        let isloadingfiles = false;
        let isloadingimages = false;
        function startLoading() {
            const overlay = document.getElementById('overlay');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const checkmark = document.getElementById('checkmark');
            const progressContainer = document.getElementById('progress-container');

            // Reset to initial state
            overlay.classList.add('active');
            progressBar.style.width = '0%';
            progressContainer.style.display = 'block';
            checkmark.classList.remove('visible');
            progressText.textContent = 'Analyzing';

            const steps = [
              { percent: 0, text: 'Reserving' },
              { percent: 25, text: 'Creating environment' },
              { percent: 50, text: 'Linking' },
              { percent: 75, text: 'Formatting' },
              { percent: 100, text: 'Loading complete' },
            ];

            let stepIndex = 0;

            function updateStep() {
              if (stepIndex < steps.length) {
                const step = steps[stepIndex];
                progressBar.style.width = `${step.percent}%`;
                progressText.textContent = step.text;

                if (step.percent === 100) {
                  progressContainer.style.display = 'none'; // Hide progress bar
                  checkmark.classList.add('visible');      // Show checkmark
                }

                stepIndex++;
                setTimeout(updateStep, 1000); // Update every 1 second
              } else {
                setTimeout(() => {
                  overlay.classList.remove('active');
                }, 500); // Hide overlay after completion
              }
            }

            updateStep();
        }
        function startLoadingMerge() {
    const overlay = document.getElementById('overlay');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    const checkmark = document.getElementById('checkmark');
    const progressContainer = document.getElementById('progress-container');

    // Reset to initial state
    overlay.classList.add('active');
    progressBar.style.width = '0%';
    progressContainer.style.display = 'block';
    checkmark.classList.remove('visible');
    progressText.textContent = 'Reserving';

    const steps = [
        { percent: 0, text: 'Processing' },
        { percent: 50, text: 'Adding' },
        { percent: 100, text: 'Merge complete' },
            ];

    let stepIndex = 0;

    function updateStep() {
        if (stepIndex < steps.length) {
            const step = steps[stepIndex];
            progressBar.style.width = `${step.percent}%`;
            progressText.textContent = step.text;

            if (step.percent === 100) {
                progressContainer.style.display = 'none'; // Hide progress bar
                checkmark.classList.add('visible'); // Show checkmark
            }

            stepIndex++;
            setTimeout(updateStep, 1000); // Update every 1 second
        } else {
            setTimeout(() => {
                overlay.classList.remove('active');
            }, 500); // Hide overlay after completion
        }
    }

    updateStep();
}
        function startLoadingImages() {
            const overlay = document.getElementById('overlay');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const checkmark = document.getElementById('checkmark');
            const progressContainer = document.getElementById('progress-container');

            // Reset to initial state
            overlay.classList.add('active');
            progressBar.style.width = '0%';
            progressContainer.style.display = 'block';
            checkmark.classList.remove('visible');
            progressText.textContent = 'Reserving';

            const steps = [
              { percent: 0, text: 'Processing' },
              { percent: 50, text: 'Adding' },
              { percent: 100, text: 'Loading complete' },
            ];

            let stepIndex = 0;

            function updateStep() {
              if (stepIndex < steps.length) {
                const step = steps[stepIndex];
                progressBar.style.width = `${step.percent}%`;
                progressText.textContent = step.text;

                if (step.percent === 100) {
                  progressContainer.style.display = 'none'; // Hide progress bar
                  checkmark.classList.add('visible');      // Show checkmark
                }

                stepIndex++;
                setTimeout(updateStep, 1000); // Update every 1 second
              } else {
                setTimeout(() => {
                  overlay.classList.remove('active');
                }, 500); // Hide overlay after completion
              }
            }

            updateStep();
        }
        function startLoadingImagesAndFiles() {
            const overlay = document.getElementById('overlay');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const checkmark = document.getElementById('checkmark');
            const progressContainer = document.getElementById('progress-container');

            // Reset to initial state
            overlay.classList.add('active');
            progressBar.style.width = '0%';
            progressContainer.style.display = 'block';
            checkmark.classList.remove('visible');
            progressText.textContent = 'Analyzing files';

            const steps = [
              { percent: 0, text: 'Reserving' },
              { percent: 25, text: 'Creating environment' },
              { percent: 50, text: 'Linking' },
              { percent: 75, text: 'Formatting' },
              { percent: 100, text: 'Loading complete' },
            ];

            let stepIndex = 0;

            function updateStep() {
              if (stepIndex < steps.length) {
                const step = steps[stepIndex];
                progressBar.style.width = `${step.percent}%`;
                progressText.textContent = step.text;

                if (step.percent === 100) {
                  progressContainer.style.display = 'none'; // Hide progress bar
                  checkmark.classList.add('visible');      // Show checkmark
                }

                stepIndex++;
                setTimeout(updateStep, 1000); // Update every 1 second
              } else {
                setTimeout(() => {
                  overlay.classList.remove('active');
                }, 500); // Hide overlay after completion
              }
            }

            updateStep();
        }
    /*document.querySelectorAll('.filedot').forEach(rect => {
      rect.querySelector('.filePathInput').addEventListener('input', () => {
        handleFileNameInputChange(rect);
      });
    });*/
    function hidecodesearchresults() {
      setTimeout(() => {
          const codesearchresults = document.querySelector('.codesearchresults');
          codesearchresults.style.display = "none";
      }, 500);
    }
    document.getElementById('fileInput').addEventListener('change', function(event) {
        const files = event.target.files;

        // Iteriere durch die ausgewählten Dateien
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const filePath = file.name;
            // Prüfen, ob die Datei ein Bild ist
            if (file.type.startsWith('image/')) {
                isloadingimages = true;
                addNewImage(filePath, URL.createObjectURL(file), file); // Bild hinzufügen
            } else if (file.type === 'text/plain' || file.type === 'text/css' || file.type === 'application/javascript' || file.type === 'text/html') {
                let allfilenames = Array.from(document.querySelectorAll('.filedot .filePathInput')).map(input => input.value);
                if (!allfilenames.includes(filePath)) {
                  isloadingfiles = true;
                  addNewFile(filePath, file); // Text oder Code-Datei hinzufügen
                }
            }
        }
        if (isloadingfiles == true && isloadingimages == false) {
            isloadingfiles = false;
            isloadingimages = false;
            startLoading();
        }else if (isloadingfiles == false && isloadingimages == true) {
            isloadingfiles = false;
            isloadingimages = false;
            startLoadingImages();
        }else if (isloadingfiles == true && isloadingimages == true) {
            isloadingfiles = false;
            isloadingimages = false;
            startLoadingImagesAndFiles();
        }
    });

    function clickthiselement(elementidorclass){
      document.querySelector(elementidorclass).click();
    }

    const imagerectangle = document.getElementById('image-rectangle');
    imagerectangle.querySelector('.download-btn').addEventListener('click', () => {
      const a = document.createElement('a');
a.href = imagerectangle.textContent; // Direkt den Base64-URL-String verwenden
a.download = imagerectangle.textContent;
document.body.appendChild(a);
a.click();
document.body.removeChild(a);
    });

    function addNewImage(imagePath, imageUrl, file) {
// Der Dateiname wird aus dem Pfad extrahiert
const fileName = imagePath.split('/').pop(); // Holt den Dateinamen aus dem Pfad

// Container, in den das neue Rectangle hinzugefügt wird
const contentContainer = document.querySelector('.content-container');

// Neues Rectangle-Element erstellen
      function getImageInfo(filePath) {

          const fileName = filePath.split('/').pop();

          const [name, format] = fileName.split(/\.(?=[^\.]+$)/);

            return {
              name: name,
              format: format
          };
      }
const newRectangle = document.createElement('div');
newRectangle.classList.add('rectangle');
      let newfilenameinfo = getImageInfo(fileName);
newRectangle.setAttribute('data-name', newfilenameinfo.name);
      newRectangle.setAttribute('data-type', newfilenameinfo.format);
newRectangle.style.backgroundImage = `url('${imageUrl}')`;
newRectangle.style.backgroundSize = 'cover';
newRectangle.style.backgroundPosition = 'center';

// Inhalt des Rectangles
newRectangle.innerHTML = `<span class="image-name">${fileName}</span>
<div class="rectangle-buttons"><button class="download-btn">Download</button><button class="delete-btn" onclick="deleteImage(this)">Delete</button></div>
<button class="close">×</button>`;

// Rectangle in den Content-Container einfügen
contentContainer.appendChild(newRectangle);

      newRectangle.querySelector('.download-btn').addEventListener('click', () => {
        downloadImage(file);
      });

      let timer;

            // Touch and mouse handling
            newRectangle.querySelector('.close').addEventListener('click', () => {
                newRectangle.classList.remove('enlarged');
            });
            newRectangle.addEventListener('mousedown', startEnlarge);
            newRectangle.addEventListener('touchstart', startEnlarge);

            newRectangle.addEventListener('mouseup', stopEnlarge);
            newRectangle.addEventListener('mouseleave', stopEnlarge);
            newRectangle.addEventListener('touchend', stopEnlarge);

            function startEnlarge(event) {
                timer = setTimeout(() => {
                    newRectangle.classList.add('enlarged');
                }, 700); // 1 Sekunde halten
            }

            function stopEnlarge() {
                clearTimeout(timer); // Timer stoppen, wenn das Bild nicht lange genug gehalten wird
            }
}

// Hilfsfunktion zum Löschen eines Rectangles
function deleteImage(element) {
const rectangle = element.closest('.rectangle');
rectangle.remove();
}

// Hilfsfunktion zum Herunterladen eines Bildes
        function downloadImage(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                const fileUrl = e.target.result;
                const a = document.createElement('a');
                a.href = fileUrl; // Direkt den Base64-URL-String verwenden
                a.download = file.name; // Der Name der Datei wird verwendet
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };
            reader.readAsDataURL(file); // Der FileReader liest die Datei korrekt
        }



        function requestcreatenewfile() {
            showPrompt('file path:', (filename) => {
                let allfilenames = Array.from(document.querySelectorAll('.filedot .filePathInput')).map(input => input.value);
                if (!allfilenames.includes(filename) && filename != '' && filename.length < 251){
                    createNewFile(filename);
                        }
            });
        }
        function requestcreatenewfilefortemplatecode(codetext) {
    showPrompt('file path:', (filename) => {
        let allfilenames = Array.from(document.querySelectorAll('.filedot .filePathInput')).map(input => input.value);
        if (!allfilenames.includes(filename) && filename.length < 251) {
            createNewFilefortemplatecode(filename, codetext);
        }
    });
}
        async function addNewFile(filename, file) {
            let allfilenames = Array.from(document.querySelectorAll('.filedot .filePathInput')).map(input => input.value);
            if (allfilenames.includes(filename)){
                return;
            }
const container = document.getElementById('container');
const navBar = document.getElementById('nav-bar');

// Create a new section
const newSection = document.createElement('div');
newSection.classList.add('section');
newSection.id = `section${container.children.length}`;
newSection.innerHTML = `<div class="editor-selected-line-btns"><button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onblur="hidecodesearchresults()" onfocus="searchcode(this)" placeholder="⌕ search"></div></div>
        <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onkeyup="handleKeyUpEvent(event)" onpaste="handlePaste(event)">
            <div id="1" class="code-editor-line" contenteditable="true"></div>
        </div>
        <div class="code-editor-btns"><button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number"></div>`;
container.appendChild(newSection);

      lineoptioncontainerupdate(newSection.querySelector('.code-editor-container'));

// Set up FileReader to read file and add each line to code-editor-container
const reader = new FileReader();
      let body = document.querySelector('body');
reader.onload = (e) => {
const lines = e.target.result.split('\n');// e.target.result.split('\n'); body.innerHTML.split('\n');
const editorContainer = newSection.querySelector('.code-editor-container');
lines.forEach((lineText) => {
const line = document.createElement('div');
line.classList.add('code-editor-line');
line.setAttribute('contenteditable', 'true');
line.innerText = lineText;
editorContainer.appendChild(line);
});
};
reader.readAsText(file);

// Create and add new navigation dot
const newNavDot = document.createElement('div');
newNavDot.classList.add('nav-dot', 'filedot');

newNavDot.setAttribute('data-index', container.children.length - 1);
newNavDot.innerHTML = `
      <input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="${filename}">
    `;
      newNavDot.setAttribute('onclick', 'dotonclick()');
navBar.appendChild(newNavDot);

      let filePathInputblablabla = newNavDot.querySelector('.filePathInput');
            let timeout;

        filePathInputblablabla.addEventListener('input', (event) => {
          handleFileNameInputChange(event.target.parentElement);
        });



            filePathInputblablabla.addEventListener('mousedown', startOverlayEnlarge);
            filePathInputblablabla.addEventListener('touchstart', startOverlayEnlarge);

            filePathInputblablabla.addEventListener('mouseup', stopOverlayEnlarge);
            filePathInputblablabla.addEventListener('mouseleave', stopOverlayEnlarge);
            filePathInputblablabla.addEventListener('touchend', stopOverlayEnlarge);

            function startOverlayEnlarge(event) {
                timeout = setTimeout(() => {
                    document.querySelector('.overlay-container').style.display = "flex";
          document.querySelector('.overlay-container').style.animation = "none";
                    void document.querySelector('.overlay-container').offsetWidth; // Trigger reflow
                    document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
                }, 700);
            }

            function stopOverlayEnlarge() {
                clearTimeout(timeout); // Timer stoppen, wenn das Bild nicht lange genug gehalten wird
            }

// Add file path to datalist
const dataList = document.getElementById('filenameoptions');
const option = document.createElement('option');
option.value = filename;
option.id = `option${newNavDot.getAttribute('data-index')}`;
dataList.appendChild(option);

// Add overlay rectangle with delete and download functionality
const overlayContainer = document.querySelector('.overlay-container .content-container');
const newRectangle = document.createElement('div');
newRectangle.classList.add('rectangle');
newRectangle.innerHTML = `<span class="notclickable">${filename}</span>
<div class="rectangle-buttons">
    <button class="edit-btn">…</button>
</div>
<button class="close">×</button>`;
newRectangle.setAttribute('onclick', `editthisfile(${container.children.length - 1}, event)`);
overlayContainer.appendChild(newRectangle);

// Delete functionality
/*newRectangle.querySelector('.delete-btn').addEventListener('click', () => {
newRectangle.remove();
newNavDot.remove();
newSection.remove();
option.remove();
});*/

// Download functionality
if (newRectangle.querySelector('.download-btn')){
newRectangle.querySelector('.download-btn').onclick = () => {
downloadFile(filename);
}
}
        /*.querySelector('.download-btn').addEventListener('click', () => {
const a = document.createElement('a');
a.href = `path/to/files/${filename}`;
a.download = filename;
document.body.appendChild(a);
a.click();
document.body.removeChild(a);
});*/

      newRectangle.querySelector('.close').addEventListener('click', () => {
                newRectangle.classList.remove('enlarged');
            });

// Touch and mouse handling for enlarging effect
let timer;
newRectangle.addEventListener('mousedown', startEnlarge);
newRectangle.addEventListener('touchstart', startEnlarge);
newRectangle.addEventListener('mouseup', stopEnlarge);
newRectangle.addEventListener('mouseleave', stopEnlarge);
newRectangle.addEventListener('touchend', stopEnlarge);

function startEnlarge() {
timer = setTimeout(() => {
newRectangle.classList.add('enlarged');
}, 700);
}

function stopEnlarge() {
clearTimeout(timer);
}

let sidebarfilelink = document.createElement('button');
sidebarfilelink.textContent = filename;
sidebarfilelink.innerHTML += `<div class="threedots">⋮</div>`;
sidebarfilelink.id = 'sidebarfilelinklink' + newNavDot.getAttribute('data-index');
sidebarfilelink.setAttribute('onclick', `editthisfile(${newNavDot.getAttribute('data-index')}, event)`);

document.querySelector('.sidebarbardivbuttondiv1').appendChild(sidebarfilelink);
// Update indices and numbering
await updateDataIndex('nav-bar');
      newNavDot.classList.add('nav-dot', 'navdot' + newNavDot.getAttribute('data-index'));
      newRectangle.id = "rectangle" + newNavDot.getAttribute('data-index');
      navBarremoveeventlistenerscrollandadditagain();
}
        async function createNewFile(filename) {
            const container = document.getElementById('container');
            const navBar = document.getElementById('nav-bar');

            // Create a new section
            const newSection = document.createElement('div');
            newSection.classList.add('section');
            newSection.id = `section${container.children.length}`;
            newSection.innerHTML = `<div class="editor-selected-line-btns"><button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button><button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button><button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button><button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button><button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button><button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button><button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button><button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button><input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onblur="hidecodesearchresults()" onfocus="searchcode(this)" placeholder="⌕"></div></div>
        <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onpaste="handlePaste(event)">
            <div id="1" class="code-editor-line" contenteditable="true"></div>
        </div>
        <div class="code-editor-btns"><button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button><button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button><button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button><button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button><button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button><button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button><button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button><button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button><input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number"></div>`;
            container.appendChild(newSection);

            lineoptioncontainerupdate(newSection.querySelector('.code-editor-container'));

            // Create and add new navigation dot
            const newNavDot = document.createElement('div');
            newNavDot.classList.add('nav-dot', 'filedot');
            newNavDot.setAttribute('data-index', container.children.length - 1);
            newNavDot.innerHTML = `<input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="${filename}">`;
            newNavDot.setAttribute('onclick', 'dotonclick()');
            navBar.appendChild(newNavDot);

            let filePathInputblablabla = newNavDot.querySelector('.filePathInput');
            let timeout;

            filePathInputblablabla.addEventListener('input', (event) => {
                handleFileNameInputChange(event.target.parentElement);
            });

            filePathInputblablabla.addEventListener('mousedown', startOverlayEnlarge);
            filePathInputblablabla.addEventListener('touchstart', startOverlayEnlarge);

            filePathInputblablabla.addEventListener('mouseup', stopOverlayEnlarge);
            filePathInputblablabla.addEventListener('mouseleave', stopOverlayEnlarge);
            filePathInputblablabla.addEventListener('touchend', stopOverlayEnlarge);

            function startOverlayEnlarge(event) {
                timeout = setTimeout(() => {
                    document.querySelector('.overlay-container').style.display = "flex";
                    document.querySelector('.overlay-container').style.animation = "none";
                    void document.querySelector('.overlay-container').offsetWidth; // Trigger reflow
                    document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
                }, 700);
            }

            function stopOverlayEnlarge() {
                clearTimeout(timeout); // Stop timer if interaction is too short
            }

            // Add file path to datalist
            const dataList = document.getElementById('filenameoptions');
            const option = document.createElement('option');
            option.value = filename;
            option.id = `option${newNavDot.getAttribute('data-index')}`;
            dataList.appendChild(option);

            // Add overlay rectangle with delete and download functionality
            const overlayContainer = document.querySelector('.overlay-container .content-container');
            const newRectangle = document.createElement('div');
            newRectangle.classList.add('rectangle');
            newRectangle.innerHTML = `<span class="notclickable">${filename}</span>
<div class="rectangle-buttons">
    <button class="edit-btn">…</button>
</div>
<button class="close">×</button>`;
newRectangle.setAttribute('onclick', `editthisfile(${container.children.length - 1}, event)`);
            overlayContainer.appendChild(newRectangle);

            if (newRectangle.querySelector('.download-btn')){
            newRectangle.querySelector('.download-btn').onclick = () => {
                downloadFile(filename);
            };
            }
            newRectangle.querySelector('.close').addEventListener('click', () => {
                newRectangle.classList.remove('enlarged');
            });

            // Touch and mouse handling for enlarging effect
            let timer;
            newRectangle.addEventListener('mousedown', startEnlarge);
            newRectangle.addEventListener('touchstart', startEnlarge);
            newRectangle.addEventListener('mouseup', stopEnlarge);
            newRectangle.addEventListener('mouseleave', stopEnlarge);
            newRectangle.addEventListener('touchend', stopEnlarge);

            function startEnlarge() {
                timer = setTimeout(() => {
                    newRectangle.classList.add('enlarged');
                }, 700);
            }

            function stopEnlarge() {
                clearTimeout(timer);
            }

            let sidebarfilelink = document.createElement('button');
            sidebarfilelink.textContent = filename;
            sidebarfilelink.innerHTML += `<div class="threedots">⋮</div>`;
            sidebarfilelink.id = 'sidebarfilelinklink' + newNavDot.getAttribute('data-index');
            sidebarfilelink.setAttribute('onclick', `editthisfile(${newNavDot.getAttribute('data-index')}, event)`);

            document.querySelector('.sidebarbardivbuttondiv1').appendChild(sidebarfilelink);

            // Update indices and numbering
            await updateDataIndex('nav-bar');
            newNavDot.classList.add('nav-dot', 'navdot' + newNavDot.getAttribute('data-index'));
            newRectangle.id = "rectangle" + newNavDot.getAttribute('data-index');
            navBarremoveeventlistenerscrollandadditagain();
        }
async function createNewFilefortemplatecode(filename, optionalText = '') {
    const container = document.getElementById('container');
    const navBar = document.getElementById('nav-bar');

    // Create a new section
    const newSection = document.createElement('div');
    newSection.classList.add('section');
    newSection.id = `section${container.children.length}`;
    newSection.innerHTML = `
        <div class="editor-selected-line-btns"><button class="code-editor-btn disabled" id="pastbtn" onclick="gobackrotateanimation(this);gobacktolastpastevent()">↺</button>
            <button class="eslbtn disabled" id="deletebtn" onclick="deleteSelectedLines();changedeletebtn(this)">⌧</button>
            <button class="eslbtn disabled" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantselectedlines()">⚠</button>
            <button class="eslbtn disabled" id="upbtn" onclick="moveselectedlineup()">↑</button>
            <button class="eslbtn disabled" id="downbtn" onclick="moveselectedlinedown()">↓</button>
            <button class="eslbtn disabled" id="sleapbtn" onclick="changebtnnotinsquare(this);restselectedline()">☾</button>
            <button class="eslbtn disabled" id="copybtn" onclick="changedeletebtn(this);copyselectedlinetexts()">□</button>
            <button class="eslbtn disabled" id="trimbtn" onclick="changebtnnotinsquare(this);trimAllselectedlinetexts()">●</button>
            <input type="text" class="code-search-input" id="code-search-input" oninput="searchcode(this)" onblur="hidecodesearchresults()" onfocus="searchcode(this)" placeholder="⌕">
        </div>
        <div class="code-editor-container" id="linenumberingon" onkeydown="handleKeyDown(event)" onpaste="handlePaste(event)">
        </div>
        <div class="code-editor-btns">
            <button class="code-editor-btn" id="deletebtn" onclick="deleteAllLines();changedeletebtn(this)">⌧</button>
            <button class="code-editor-btn" id="importantPinbtn" onclick="changebtnnotinsquare(this);importantalllines()">⚠</button>
            <button class="code-editor-btn" id="leftbtn" onclick="changebtnnotinsquare(this);unselectalllines()">←</button>
            <button class="code-editor-btn" id="rightbtn" onclick="changebtnnotinsquare(this);unfoldalllines()">→</button>
            <button class="code-editor-btn" id="unsleeplines" onclick="changebtnnotinsquare(this);unsleepalllines()">○</button>
            <button class="code-editor-btn" id="copybtn" onclick="changedeletebtn(this);copyalllinetexts()">□</button>
            <button class="code-editor-btn" id="showcommandlist-btn-element" onclick="showcommandoverlay()">⌘</button>
            <button class="code-editor-btn" id="showsignexplenationoverlay-btn-element" onclick="showsignexplenationoverlay()">?</button>
            <input type="text" class="line-number-input" id="line-number-input" onkeydown="checkiflinenumberinputkeydownisenter(event)" placeholder="⌕ line number">
        </div>`;
    container.appendChild(newSection);

    lineoptioncontainerupdate(newSection.querySelector('.code-editor-container'));

    // Create and add new navigation dot
    const newNavDot = document.createElement('div');
    newNavDot.classList.add('nav-dot', 'filedot');
    newNavDot.setAttribute('data-index', container.children.length - 1);
    newNavDot.innerHTML = `<input class="filePathInput" type="text" maxlength="250" onblur="onfilepathinputblur(this)" value="${filename}">`;
    newNavDot.setAttribute('onclick', 'dotonclick()');
    navBar.appendChild(newNavDot);

    let filePathInput = newNavDot.querySelector('.filePathInput');
    let timeout;

    filePathInput.addEventListener('input', (event) => {
        handleFileNameInputChange(event.target.parentElement);
    });

    filePathInput.addEventListener('mousedown', startOverlayEnlarge);
    filePathInput.addEventListener('touchstart', startOverlayEnlarge);
    filePathInput.addEventListener('mouseup', stopOverlayEnlarge);
    filePathInput.addEventListener('mouseleave', stopOverlayEnlarge);
    filePathInput.addEventListener('touchend', stopOverlayEnlarge);

    function startOverlayEnlarge() {
        timeout = setTimeout(() => {
            document.querySelector('.overlay-container').style.display = "flex";
            document.querySelector('.overlay-container').style.animation = "none";
            void document.querySelector('.overlay-container').offsetWidth; // Trigger reflow
            document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
        }, 700);
    }

    function stopOverlayEnlarge() {
        clearTimeout(timeout); // Stop timer if interaction is too short
    }

    // Add file path to datalist
    const dataList = document.getElementById('filenameoptions');
    const option = document.createElement('option');
    option.value = filename;
    option.id = `option${newNavDot.getAttribute('data-index')}`;
    dataList.appendChild(option);

    // Add overlay rectangle with delete and download functionality
    const overlayContainer = document.querySelector('.overlay-container .content-container');
    const newRectangle = document.createElement('div');
    newRectangle.classList.add('rectangle');
    newRectangle.innerHTML = `<span class="notclickable">${filename}</span>
<div class="rectangle-buttons">
    <button class="edit-btn">…</button>
</div>
<button class="close">×</button>`;
newRectangle.setAttribute('onclick', `editthisfile(${container.children.length - 1}, event)`);
    overlayContainer.appendChild(newRectangle);

    if (newRectangle.querySelector('.download-btn')){
    newRectangle.querySelector('.download-btn').onclick = () => {
        downloadFile(filename);
    };
    }

    newRectangle.querySelector('.close').addEventListener('click', () => {
        newRectangle.classList.remove('enlarged');
    });

    // Touch and mouse handling for enlarging effect
    let timer;
    newRectangle.addEventListener('mousedown', startEnlarge);
    newRectangle.addEventListener('touchstart', startEnlarge);
    newRectangle.addEventListener('mouseup', stopEnlarge);
    newRectangle.addEventListener('mouseleave', stopEnlarge);
    newRectangle.addEventListener('touchend', stopEnlarge);

    function startEnlarge() {
        timer = setTimeout(() => {
            newRectangle.classList.add('enlarged');
        }, 700);
    }

    function stopEnlarge() {
        clearTimeout(timer);
    }

    let sidebarfilelink = document.createElement('button');
    sidebarfilelink.textContent = filename;
    sidebarfilelink.innerHTML += `<div class="threedots">⋮</div>`;
    sidebarfilelink.id = 'sidebarfilelinklink' + newNavDot.getAttribute('data-index');
    sidebarfilelink.setAttribute('onclick', `editthisfile(${newNavDot.getAttribute('data-index')}, event)`);

    document.querySelector('.sidebarbardivbuttondiv1').appendChild(sidebarfilelink);

    // Optional: Add text content as individual lines
    const lines = optionalText.split('\n');
    const editorContainer = newSection.querySelector('.code-editor-container');
    lines.forEach((lineText) => {
        const line = document.createElement('div');
        line.classList.add('code-editor-line');
        line.setAttribute('contenteditable', 'true');
        line.innerText = lineText;
        editorContainer.appendChild(line);
    });

    // Update indices and numbering
    await updateDataIndex('nav-bar');
    newNavDot.classList.add('nav-dot', 'navdot' + newNavDot.getAttribute('data-index'));
    newRectangle.id = "rectangle" + newNavDot.getAttribute('data-index');
    navBarremoveeventlistenerscrollandadditagain();
}



        /*function handleFileNameInputChange(navDot) {
        const option = document.getElementById("option" + navDot.getAttribute('data-index'));
        const rectangle = document.getElementById("rectangle" + navDot.getAttribute('data-index'));
        let rectanglespan = rectangle.querySelector('span');
        const newValue = navDot.querySelector('.filePathInput').value;

        option.value = newValue;
        option.textContent = newValue; // Update displayed text in dropdown
        rectanglespan.innerText = newValue;
        }*/
        function downloadFile(name) {
            // Extract type and filename
            let type = name.split('.').pop();
            let filename = name.split('.').slice(0, -1).join('.');

            // Check if file content exists
            let content = checkiffile(name);
            if (!content) {
                return; // Abort if no content is found
            }

            // Map type to MIME type
            const mimeTypes = {
                html: 'text/html',
                css: 'text/css',
                js: 'application/javascript',
                txt: 'text/plain'
            };

            // Check if the type is valid
            const mimeType = mimeTypes[type];
            if (!mimeType) {
                return; // Abort for unknown types
            }

            // Create a Blob with the content and MIME type
            const blob = new Blob([content], { type: mimeType });

            // Create a temporary link element
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob); // Create a URL for the Blob
            link.download = `${filename}.${type}`; // Set the correct filename

            // Append the link to the document and trigger the download
            document.body.appendChild(link);
            link.click();

            // Clean up
            document.body.removeChild(link);
            URL.revokeObjectURL(link.href);
        }
        function onfilepathinputblur(inputField) {
    // Erstelle ein Array aller Dateinamen außer dem aktuellen Eingabefeld
    const allFileNames = Array.from(document.querySelectorAll('.filedot .filePathInput'))
        .filter(input => input !== inputField) // Ignoriere das aktuelle Eingabefeld
        .map(input => input.value);

    // Überprüfe, ob der eingegebene Wert bereits existiert
    if (allFileNames.includes(inputField.value)) {
        let baseName = inputField.value;
        let counter = 1;

        // Kürze den Basisnamen, wenn er zu lang ist
        if (baseName.length > 240 - String(counter).length - 1) {
            baseName = baseName.slice(0, 240 - String(counter).length - 1);
        }

        // Finde einen einzigartigen Namen, indem eine Zahl angehängt wird
        while (allFileNames.includes(`${counter}_${baseName}`)) {
            counter++;
        }

        // Setze den neuen Namen im Eingabefeld
        let newvalue = `${counter}_${baseName}`;
        if (newvalue.length >= 250) {
            newvalue = truncateText(newvalue, 250);
        }

        inputField.value = newvalue;

        // Aktualisiere die Änderungen für das übergeordnete Element
        if (inputField.parentElement) {
            handleFileNameInputChange(inputField.parentElement);
        }
    }
}

function truncateText(text, maxLength) {
    if (typeof text !== "string" || typeof maxLength !== "number") {
        throw new Error("Ungültige Argumente: text muss ein String und maxLength eine Zahl sein.");
    }

    // Schneide den Text auf die maximale Länge zu
    return text.slice(0, maxLength);
}



        function handleFileNameInputChange(navDot) {
            // Find related elements
            const dataIndex = navDot.getAttribute('data-index');
            const option = document.getElementById("option" + dataIndex);
            const rectangle = document.getElementById("rectangle" + dataIndex);
            const sidebarfilelinklink = document.getElementById("sidebarfilelinklink" + dataIndex);



            // Ensure option and rectangle exist
            if (!option || !rectangle) {
                return;
            }

            const filePathInput = navDot.querySelector('.filePathInput');
            const rectanglespan = rectangle.querySelector('span');
            const downloadBtn = rectangle.querySelector('.download-btn');

            // Ensure required child elements exist
            if (!filePathInput || !rectanglespan) {
                return;
            }

            // Get and sanitize new value
            const newValue = filePathInput.value.trim();
            if (!newValue) {
                return; // Abort if the new value is empty
            }
            const safeValue = newValue.replace(/['"<>&]/g, '');

            // Update option and rectangle
            option.value = safeValue;
            option.textContent = safeValue;
            rectanglespan.innerText = safeValue;

            // Update download button's action
            sidebarfilelinklink.textContent = safeValue;
            sidebarfilelinklink.innerHTML += `<div class="threedots">⋮</div>`;
            if (downloadBtn){
            downloadBtn.onclick = () => downloadFile(safeValue);
            }
        }



        document.querySelectorAll('.filedot .filePathInput').forEach(rect => {
            rect.addEventListener('input', () => {
                handleFileNameInputChange(rect.parentElement);
            });
        });




    document.querySelectorAll('.rectangle').forEach(rect => {
            let timer;

            // Touch and mouse handling
            rect.querySelector('.close').addEventListener('click', () => {
                rect.classList.remove('enlarged');
            });
            rect.addEventListener('mousedown', startEnlarge);
            rect.addEventListener('touchstart', startEnlarge);

            rect.addEventListener('mouseup', stopEnlarge);
            rect.addEventListener('mouseleave', stopEnlarge);
            rect.addEventListener('touchend', stopEnlarge);

            function startEnlarge(event) {
                timer = setTimeout(() => {
                    rect.classList.add('enlarged');
                }, 700); // 1 Sekunde halten
            }

            function stopEnlarge() {
                clearTimeout(timer); // Timer stoppen, wenn das Bild nicht lange genug gehalten wird
            }
        });

    document.querySelectorAll('.filePathInput').forEach(rect => {
            let timer;

            rect.addEventListener('mousedown', startEnlarge);
            rect.addEventListener('touchstart', startEnlarge);

            rect.addEventListener('mouseup', stopEnlarge);
            rect.addEventListener('mouseleave', stopEnlarge);
            rect.addEventListener('touchend', stopEnlarge);

            function startEnlarge(event) {
                timer = setTimeout(() => {
          updateviewthisfilebtn();
                    document.querySelector('.overlay-container').style.display = "flex";
          document.querySelector('.overlay-container').style.animation = "none";
                    void document.querySelector('.overlay-container').offsetWidth; // Trigger reflow
                    document.querySelector('.overlay-container').style.animation = "swipein 0.5s ease-out";
                }, 700);
            }

            function stopEnlarge() {
                clearTimeout(timer); // Timer stoppen, wenn das Bild nicht lange genug gehalten wird
            }
        });
    function hideelement(type, name, event){
      if (event.target !== event.currentTarget) {
                return;
            }
      if (type == 'class'){
        document.querySelector('.' + name).style.animation = "none";
                void document.querySelector('.' + name).offsetWidth; // Trigger reflow
                document.querySelector('.' + name).style.animation = "swipeout 0.5s ease-out";
                setTimeout(() => {
                    document.querySelector('.' + name).style.display = 'none';
                }, 500);
      }else if (type == 'id'){
        document.querySelector('#' + name).style.animation = "none";
                void document.querySelector('.' + name).offsetWidth; // Trigger reflow
                document.querySelector('#' + name).style.animation = "swipeout 0.5s ease-out";
                setTimeout(() => {
                    document.querySelector('#' + name).style.display = 'none';
                }, 500);
      }
    }
        const navBar = document.getElementById('nav-bar');
        let isDragging = false;
        let startY = 0;
        let currentHeight = 50; // Initial height
      let section = document.getElementById('section0');
      let sectionindex = 0;
      let inputDiv = section.querySelector('.code-editor-container');
    function gotonextorpreviousfile(vbackorforwardv){
            /*let scrolltothissection = container.querySelector('.navdot' + number);
            if(scrolltothissection){
                scrolltothissection.scrollIntoView({ behavior: 'smooth' });
            }*/
        if (!section){
        return;
        }
        let navbarindexnumbernumber = 0;
        if (vbackorforwardv == "back"){
        navbarindexnumbernumber = parseInt(section.id.replace('section', '')) - 1;
        }else if (vbackorforwardv == "forward"){
        navbarindexnumbernumber = parseInt(section.id.replace('section', '')) + 1;
        }
            let navBar = document.getElementById('nav-bar');
            let scrolltothissection = navBar.querySelector('.nav-dot[data-index="' + navbarindexnumbernumber + '"]');
            if (scrolltothissection){
                scrolltothissection.scrollIntoView({ behavior: 'smooth' });
                document.querySelector('.overlay-back-btn').click();
            }
        }
        function checkiflinenumberinputkeydownisenter(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // Verhindert, dass Enter normale Aktionen ausführt
                let input = event.target;
                let value = input.value.trim();

                if (value !== '') {
                    // Überprüfen, ob es eine gültige Zahl ist
                    if (isNaN(value)) {
                        return;
                    }

                    // Holen der Zeilen im Abschnitt
                    let lines = section.querySelectorAll('.code-editor-line');
                    let lineIndex = parseInt(value, 10) - 1;

                    if (lineIndex >= 0 && lineIndex < lines.length) {
                        let line = lines[lineIndex];

                        // Zeile in den sichtbaren Bereich scrollen
                        line.scrollIntoView({
                            behavior: 'smooth', // Sanftes Scrollen
                            block: 'center',    // Zeile in der Mitte des sichtbaren Bereichs anzeigen
                        });
                    }
                }
            }
        }
        function scrolltolinenumber(linenum){
            let lines = section.querySelectorAll('.code-editor-line');
            let lineIndex = parseInt(linenum);

            if (lineIndex >= 0 && lineIndex < lines.length) {
                let line = lines[lineIndex];

                // Zeile in den sichtbaren Bereich scrollen
                line.scrollIntoView({
                    behavior: 'smooth', // Sanftes Scrollen
                    block: 'center',    // Zeile in der Mitte des sichtbaren Bereichs anzeigen
                });
            }
        }

        /*function deletethisfile(number) {
            // Delete rectangle
            let rectangleToDelete = document.getElementById('rectangle' + number);
            if (rectangleToDelete) {
                rectangleToDelete.remove();
                document.querySelectorAll('.rectangle').forEach((rect, index) => {
                    if (rect.id != 'image-rectangle'){
                        rect.id = "rectangle" + index;
                        rect.querySelector('.rectangle-buttons .delete-btn').setAttribute('onclick', `deletethisfile(${index})`);
                        rect.querySelector('.rectangle-buttons .edit-btn').setAttribute('onclick', `editthisfile(${index})`);
                    }
                });
            }

            // Delete nav-dot
            let navBar = document.getElementById('nav-bar');
            if (navBar) {
                let deletethisnavdot = navBar.querySelector('.nav-dot[data-index="' + number + '"]');
                if (deletethisnavdot) {
                    let filePathInput = deletethisnavdot.querySelector('.filePathInput');
                    let deletethisnavdotvalue = filePathInput ? filePathInput.value : null;
                    deletethisnavdot.remove();

                    document.querySelectorAll('.nav-dot').forEach((navdot, index) => {
                        navdot.classList.remove('navdot' + navdot.getAttribute('data-index'));
                        navdot.classList.add('navdot' + index);
                        navdot.setAttribute('data-index', index);
                    });

                    // Delete option if applicable
                    if (deletethisnavdotvalue) {
                        let filenameOptions = document.getElementById('filenameoptions');
                        if (filenameOptions) {
                            let optionToDelete = document.getElementById("option" + number); //filenameOptions.querySelector('option[value="' + deletethisnavdotvalue + '"]');
                            if (optionToDelete) {
                                optionToDelete.remove();
                            }

                            document.getElementById('filenameoptions').querySelectorAll('option').forEach((option, index) => {
                                option.id = "option" + index;
                            });
                        }
                    }
                }
            }

            // Delete section
            let container = document.getElementById('container');
            if (container) {
                let deletethissection = container.querySelector('.section[id="section' + number + '"]');
                if (deletethissection) {
                    if (section.id == deletethissection.id){
                        let scrolltothisnavdot = document.getElementById('view-nav-dot');
                        if (scrolltothisnavdot){
                            scrolltothisnavdot.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                    deletethissection.remove();
                    document.querySelectorAll('.section').forEach((sectionv, index) => {
                        sectionv.id = "section" + index;
                    });
                }
            }
        }*/
        function deletethisfile(number) {
            // Delete rectangle
            let rectangleToDelete = document.getElementById('rectangle' + number);
            if (rectangleToDelete) {
                rectangleToDelete.remove();
                document.querySelectorAll('.rectangle').forEach((rect, index) => {
                    const sectionKey = rect.id.replace('rectangle', 'section');

// Überprüfe, ob der Key in pastevents existiert
if (pastevents[sectionKey]) {
    pastevents["section" + index] = pastevents[sectionKey];
}

// Überprüfe, ob der Key in futureevents existiert
if (futureevents[sectionKey]) {
    futureevents["section" + index] = futureevents[sectionKey];
}
                    if (rect.id !== 'image-rectangle') {
                        rect.id = "rectangle" + index;
                        if (rect.querySelector('.rectangle-buttons .delete-btn') && rect.querySelector('.rectangle-buttons .edit-btn')){
                        rect.querySelector('.rectangle-buttons .delete-btn').setAttribute('onclick', `deletethisfile(${index})`);
                        rect.querySelector('.rectangle-buttons .edit-btn').setAttribute('onclick', `editthisfile(${index})`);
                        }
                        rect.setAttribute('onclick', `editthisfile(${index}, event)`);
                    }
                });
            }
            let sidebarfilelinklink = document.getElementById("sidebarfilelinklink" + number);
            if (sidebarfilelinklink){
                sidebarfilelinklink.remove();
                document.querySelectorAll(".sidebarfilelinklink").forEach((sidebarfilelink, index) => {
                    sidebarfilelink.id = 'sidebarfilelinklink' + index;
                    sidebarfilelink.setAttribute('onclick', `editthisfile(${index}, event)`);
                });
            }

            // Delete nav-dot
            let navBar = document.getElementById('nav-bar');
            if (navBar) {
                let deletethisnavdot = navBar.querySelector('.nav-dot[data-index="' + number + '"]');
                if (deletethisnavdot) {
                    let filePathInput = deletethisnavdot.querySelector('.filePathInput');
                    let deletethisnavdotvalue = filePathInput ? filePathInput.value : null;
                    deletethisnavdot.remove();

                    document.querySelectorAll('.nav-dot').forEach((navdot, index) => {
                        navdot.classList.remove('navdot' + navdot.getAttribute('data-index'));
                        navdot.classList.add('navdot' + index);
                        navdot.setAttribute('data-index', index);
                    });

                    // Delete option if applicable
                    if (deletethisnavdotvalue) {
                        let filenameOptions = document.getElementById('filenameoptions');
                        if (filenameOptions) {
                            let optionToDelete = filenameOptions.querySelector(`option[value="${deletethisnavdotvalue}"]`);
                            if (optionToDelete) {
                                optionToDelete.remove();
                                document.querySelectorAll('#filenameoptions option').forEach((option, index) => {
                                    option.id = "option" + index;
                                });
                            }
                        }
                    }
                }
            }

            // Delete section
            let container = document.getElementById('container');
            if (container) {
                let deletethissection = container.querySelector('.section[id="section' + number + '"]');
                if (deletethissection) {
                    deletethissection.remove();
                    document.querySelectorAll('.section').forEach((sectionv, index) => {
                        sectionv.id = "section" + index;
                        
                    });
                }
            }
        }


        function editthisfile(number, event = null){
            if (event && event.target !== event.currentTarget && !event.target.classList.contains('notclickable') && !event.target.classList.contains('close')) {
                createOptionsContainer(event.target, number);
                return;
            }else if (event && event.target.classList.contains('close') || event.target.classList.contains('enlarged')){
                return;
            }
            /*let scrolltothissection = container.querySelector('.navdot' + number);
            if(scrolltothissection){
                scrolltothissection.scrollIntoView({ behavior: 'smooth' });
            }*/
        closesidebaronsmallscreensizes();
        closeeverything();
            let navBar = document.getElementById('nav-bar');
            let scrolltothissection = navBar.querySelector('.nav-dot[data-index="' + number + '"]');
            if (scrolltothissection){
                scrolltothissection.scrollIntoView({ behavior: 'smooth' });
                document.querySelector('.overlay-back-btn').click();
            }
            lasteventsparentsection = document.getElementById('section' + number);
        }
      function updateviewthisfilebtn() {
      if (!section || !section.id){
        return;
      }
        if (section.id == document.querySelector('.viewcontainer').id){
        document.querySelector('.viewthisfile').style.display = 'none';

      }else {
        document.querySelector('.viewthisfile').style.display = 'inline-block';
      }
      }
    function deleteAllEmptyLines() {
        const sectionlinecontainer = section.querySelector(".code-editor-container");
        const allsectionlines = sectionlinecontainer.querySelectorAll(".code-editor-line");
        let newpast = [];
lasteventsparentsection = section;
        allsectionlines.forEach((line, index) => {
            let pastelement = {
    element: line,
    type: "delete",
    index: index // Speichere den ursprünglichen Text
};
newpast.push(pastelement);
            // Korrigiere den Aufruf von `trim()`
            if (line.innerText.trim() === "") {
                if (section.querySelectorAll(".code-editor-line").length > 1 && !line.classList.contains('hiddenlinesparent')){
                    line.remove();
                }
            }
        });
        if (newpast.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    futureevents[lasteventsparentsection.id] = [];
    pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
    enablepastbtn();
}
    }
    function deleteAllCommentsInLines() {
    const sectionlinecontainer = section.querySelector(".code-editor-container");
    if (!sectionlinecontainer) return;

    const allsectionlines = sectionlinecontainer.querySelectorAll(".code-editor-line");
    let newpast = [];
    lasteventsparentsection = section;

    allsectionlines.forEach(line => {
        let pastelement = {
            element: line,
            type: "text",
            text: line.textContent // Speichere den ursprünglichen Text
        };
        newpast.push(pastelement);

        let text = line.textContent;
        text = text.replace(/\/\/.*/g, '').replace(/\/\*[\s\S]*?\*\//g, '');
        line.textContent = text; // Aktualisiere den Text
    });

    if (newpast.length > 0) {
        // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
        if (!pastevents[lasteventsparentsection.id]) {
            pastevents[lasteventsparentsection.id] = [];
        }
        futureevents[lasteventsparentsection.id] = [];
        pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
        enablepastbtn();
    }
}

    function positionElementAbove(elementToPosition, referenceElement) {
const referenceRect = referenceElement.getBoundingClientRect();
elementToPosition.style.position = 'absolute';
elementToPosition.style.top = `${referenceRect.top - window.innerHeight * 0.06}px`; // 3vh unterhalb

    if (document.querySelector('.sidebarenabled')){
        elementToPosition.style.right = `calc(${referenceRect.left + (referenceRect.width - elementToPosition.offsetWidth) / 2}px - 30vw)`;
    }else {
        elementToPosition.style.right = `${referenceRect.left + (referenceRect.width - elementToPosition.offsetWidth) / 2}px`;
    }
}
    let targetElementv = null;
    document.querySelectorAll('.code-editor-container').forEach(linecontainer => {
      lineoptioncontainerupdate(linecontainer);
    });
    function lineoptioncontainerupdate(linecontainer){

      linecontainer.addEventListener('mousedown', function(event) {
const targetElement = event.target;
targetElementv = targetElement;
targetElement.holdTimer = setTimeout(() => {
document.querySelector('.lineoptions').style.display = 'block';
performLongPressAction(targetElement);
}, 700); // 700 ms halten, um Aktion auszulösen
});

// Mouseup, um das lange Drücken abzubrechen, wenn die Maustaste losgelassen wird
linecontainer.addEventListener('mouseup', function(event) {
const targetElement = event.target;
clearTimeout(targetElement.holdTimer);
});

// Abbrechen, wenn die Maus das Element verlässt
linecontainer.addEventListener('mouseleave', function(event) {
const targetElement = event.target;
clearTimeout(targetElement.holdTimer);
});

// Einfacher Klick-Event
linecontainer.addEventListener('click', function(event) {
const targetElement = event.target;
performLongPressAction(targetElement);
targetElementv = targetElement;
});

// Keydown für fokussierte Zeile
linecontainer.addEventListener('keydown', function() {
const focusedline = document.querySelector('.code-editor-line:focus');
if (!focusedline) {
return;
}
const targetElement = focusedline;
performLongPressAction(targetElement);
targetElementv = targetElement;
});

// Scroll-Event, um die Aktion für das zuletzt ausgewählte Element zu aktualisieren
linecontainer.addEventListener('scroll', function() {
if (targetElementv) {
performLongPressAction(targetElementv);
}
});


      linecontainer.addEventListener('touchstart', function(event) {
const targetElement = event.target;
        targetElementv = targetElement;
targetElement.holdTimer = setTimeout(() => {
          document.querySelector('.lineoptions').style.display = 'block';
          performLongPressAction(targetElement);
}, 700);
});
      linecontainer.addEventListener('touchend', function(event) {
// Das berührte Element (event.target) erfassen
const targetElement = event.target;

        targetElementv = targetElement;
// Timer für das Ziel-Element abbrechen
clearTimeout(targetElement.holdTimer);
});
      linecontainer.addEventListener('click', function(event) {
        const targetElement = event.target;
        performLongPressAction(targetElement);
        targetElementv = targetElement;
      });
      linecontainer.addEventListener('keydown', function() {
const focusedline = document.querySelector('.code-editor-line:focus');
        if (!focusedline){
          return;
        }
        const targetElement = focusedline;
        performLongPressAction(targetElement);
        targetElementv = targetElement;
});


      linecontainer.addEventListener('scroll', function() {
        if (targetElementv){
          performLongPressAction(targetElementv);
        }
      });

    }

function performLongPressAction(element) {
      if (element.classList.contains('code-editor-line')) {
          positionElementAbove(document.querySelector('.lineoptions'), element);
      } else {
          document.querySelector('.lineoptions').style.display = 'none';
      }
}
    function closelineoptionscontainer() {
      document.querySelector('.lineoptions').style.display = 'none';
    }
    function swipethislineleft() {
        if (!section){
            return;
        }
        if (section.classList.contains('viewcontainer')){
          return;
        }
       if (!targetElementv){
         return;
       }
       if (targetElementv.classList.contains('selected')) {
                targetElementv.classList.remove('selected');  // Linie abwählen bei links Swipe
            if (!section.querySelector('.code-editor-line.selected')){
                section.querySelectorAll('.eslbtn').forEach(dline => {
                    dline.classList.add('disabled');
                });
            }
                updateSelectedClasses();
            } else if (!targetElementv.classList.contains('selected') && !targetElementv.classList.contains('hiddenlinesparent') && !targetElementv.classList.contains('superselected')) {
                //startLine.classList.add('hiddenlinesparent');
            analyzeAndHideElements(targetElementv);
                updateSelectedClasses();
            } else if (targetElementv.classList.contains('superselected')) {
                targetElementv.classList.remove('superselected');  // Linie abwählen bei links Swipe
                targetElementv.classList.add('selected');  // Linie auswählen
                targetElementv.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                    dline.classList.remove('disabled');
                });
                updateSelectedClasses();
        }
    }
    function swipethislineright() {
        if (!section){
            return;
        }
        if (section.classList.contains('viewcontainer')){
          return;
        }
      if (!targetElementv){
         return;
      }
      if (!targetElementv.classList.contains('selected') && !targetElementv.classList.contains('hiddenlinesparent') && !targetElementv.classList.contains('superselected')) {
                targetElementv.classList.add('selected');  // Linie auswählen
            section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                dline.classList.remove('disabled');
            });
                updateSelectedClasses();
            } else if (targetElementv.classList.contains('hiddenlinesparent')) {
                targetElementv.classList.remove('hiddenlinesparent');
            showHiddenElements(targetElementv);
                updateSelectedClasses();
            }else if (targetElementv.classList.contains('selected')) {
            let anothersuperselectedline = false;
            let superselectedline = section.querySelector('.code-editor-line.superselected');
            if (superselectedline){
                anothersuperselectedline = true;
            }
            targetElementv.classList.remove('selected');
            targetElementv.classList.add('superselected');  // Linie auswählen
            if (!section.querySelector('.code-editor-line.selected')){
                section.querySelectorAll('.eslbtn').forEach(dline => {
                    dline.classList.add('disabled');
                });
            }
            if (anothersuperselectedline == true){
                superselect(superselectedline, targetElementv);
                superselectedline.classList.remove('superselected');
                targetElementv.classList.remove('superselected');
                superselectedline.classList.add('selected');
                targetElementv.classList.add('selected');
                section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                    dline.classList.remove('disabled');
                });

            }
            updateSelectedClasses();
        }
    }

    const initialviewcontainerzindex = document.querySelector('.viewcontainer').style.zIndex;
    const initialviewcontainertop = document.querySelector('.viewcontainer').style.top;
    const initialviewcontainerleft = document.querySelector('.viewcontainer').style.left;
    let initialviewcontainerdisplay = document.querySelector('.viewcontainer').style.display;
    function viewthisfile() {

      initialviewcontainerdisplay = document.querySelector('.viewcontainer').style.display;
      document.querySelector('.viewcontainer').style.animation = "none";
        document.querySelector('.viewcontainer').style.position = "fixed";
        document.querySelector('.viewcontainer').style.top = "0";
        document.querySelector('.viewcontainer').style.left = "0"; /*`${sectionindex * 100}vh`;*/
      document.querySelector('.viewcontainer').style.zIndex = "1111";
      document.querySelector('.viewcontainer').style.display = "flex";

      let sidebarenabledviewcontainer = document.querySelector('.sidebarenabled .viewcontainer');
      if (sidebarenabledviewcontainer){
          sidebarenabledviewcontainer.style.left = "30vw";
      }


        // Hier wird die Klasse mit einem Punkt korrekt referenziert
        let filepathtext = document.querySelector('.navdot' + sectionindex + ' input[type="text"]').value;

        // Setzt den Wert für die URL-Eingaben
        document.getElementById('computer-url-input').value = filepathtext;
        document.getElementById('mobile-url-input').value = filepathtext;

      document.querySelector('.closeviewthisfilebtn').style.display = "flex";;
    }

    function closeviewthisfile() {
        document.querySelector('.viewcontainer').style.position = "relative";
        document.querySelector('.viewcontainer').style.top = initialviewcontainertop;
        document.querySelector('.viewcontainer').style.left = initialviewcontainerleft;
      document.querySelector('.viewcontainer').style.zIndex = initialviewcontainerzindex;
      document.querySelector('.viewcontainer').style.display = initialviewcontainerdisplay;

      document.querySelector('.closeviewthisfilebtn').style.display = "none";
    }







        function checkiffile(filename) {
            let fileContent = "";
            document.querySelectorAll('.filedot').forEach(fd => {
                let filePathInputva = fd.querySelector('.filePathInput');
                if (filePathInputva && filePathInputva.value == filename) {
                    let sectionv = document.getElementById(`section${fd.getAttribute('data-index')}`);
                    if (sectionv) {
                        let container = sectionv.querySelector('.code-editor-container');
                        if (container) {
                            container.querySelectorAll('.code-editor-line').forEach(line => {
                                fileContent += line.innerText + "\n";
                            });
                            /*fileContent = container.textContent; // Verwende textContent für konsistenteren Zugriff*/
                            return; // Beendet die Schleife
                        }
                    }
                }
            });
            return fileContent;
        }



        function replaceLinksAndScripts(values) {
            let htmlString = checkiffile(values);
            const fileCache = new Map();

            // Hilfsfunktion, um Datei-Inhalte zu cachen
            const getFileContent = (filename) => {
                if (!fileCache.has(filename)) {
                    fileCache.set(filename, checkiffile(filename));
                }
                return fileCache.get(filename);
            };

            // Ersetze <link> mit CSS-Inhalt
            htmlString = htmlString.replace(/<link\s+[^>]*rel=["']stylesheet["'][^>]*href=["']([^"']+)["'][^>]*>/g, (match, href) => {
                const fileContent = checkiffile(href);
                return fileContent ? `<style>\n${fileContent}\n</style>` : match;
            });

            // Ersetze <script> mit JavaScript-Inhalt
            htmlString = htmlString.replace(/<script\s+[^>]*src=["']([^"']+)["'][^>]*><\/script>/g, (match, src) => {
                const fileContent = checkiffile(src);
                return fileContent ? `<script>\n${fileContent}\n<\/script>` : match;
            });

            return htmlString;
        }


        function textCode(textcontainerid, iframeid) {
            const code = replaceLinksAndScripts(document.getElementById(textcontainerid).value);
            document.getElementById(iframeid).srcdoc = code;
        }


        const swipeContainer = document.querySelector('.swipe-container');
        let startXvvv;

        // Update iFrame function for both views
        function updateIframe(type) {
            const iframe = document.getElementById(`${type}-frame`);
            const url = document.getElementById(`${type}-url-input`).value;
            iframe.src = url;
        }

        // Add touch event for swiping
        swipeContainer.addEventListener('touchstart', (e) => {
            startXvvv = e.touches[0].clientX;
        });

        swipeContainer.addEventListener('touchend', (e) => {
            const endX = e.changedTouches[0].clientX;
            handleSwipe(startXvvv, endX);
        });

        // Add mouse event for dragging to switch views
        swipeContainer.addEventListener('mousedown', (e) => {
            startXvvv = e.clientX;
        });

        swipeContainer.addEventListener('mouseup', (e) => {
            const endX = e.clientX;
            handleSwipe(startXvvv, endX);
        });

        // Function to handle swipe action
        function handleSwipe(start, end) {
            const distance = start - end;
            const threshold = 100; // Minimum swipe distance to trigger a change

            if (distance > threshold) {
                swipeContainer.scrollBy({ left: window.innerWidth, behavior: 'smooth' });
            } else if (distance < -threshold) {
                swipeContainer.scrollBy({ left: -window.innerWidth, behavior: 'smooth' });
            }
        }
        let originalDisplayStatus = [];




        function searchcode(thiselementhasthevalue) {
            if (!section){
                return;
            }
            if (section.classList.contains('viewcontainer')){
              return;
            }
            closelineoptionscontainer(); 

            const codesearchresults = document.querySelector('.codesearchresults');

            positionElementBelow(codesearchresults, thiselementhasthevalue);

            const inputvalue = thiselementhasthevalue.value.trim().toLowerCase();

            codesearchresults.style.display = inputvalue ? "flex" : "none";  

            codesearchresults.innerHTML = "";  

            if (inputvalue) {
                const parentSection = thiselementhasthevalue.closest(".section");
                const sectionlinecontainer = parentSection.querySelector('.code-editor-container');

                const importantElements = sectionlinecontainer.querySelectorAll('.code-editor-line.importantpin');
                const nonImportantElements = sectionlinecontainer.querySelectorAll('.code-editor-line:not(.importantpin)');
                const combinedList = [...importantElements, ...nonImportantElements];

                combinedList.forEach(lineelement => {
                    if (lineelement.textContent.toLowerCase().includes(inputvalue)) {

                        const newspan = document.createElement('span');
                        newspan.classList.add('result');
                        if (lineelement.classList.contains('importantpin')){
                            newspan.classList.add('importantsearchresult');
                        }
                        newspan.innerText = lineelement.textContent;
                        codesearchresults.appendChild(newspan);  

                        /*lineelement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'center',
                        });*/
                        function scrollthislineintoviewnow(){
                            lineelement.scrollIntoView({
                                behavior: 'smooth',
                                block: 'center',
                            });
                            setTimeout(() => {
                                performLongPressAction(lineelement);
                            }, 500);
                        }

                        newspan.addEventListener('click', () => {
                            scrollthislineintoviewnow();
                        });
                    }
                });
            }
        }








function positionElementBelow(elementToPosition, referenceElement) {
const referenceRect = referenceElement.getBoundingClientRect();
elementToPosition.style.position = 'absolute';
elementToPosition.style.top = `${referenceRect.bottom + window.innerHeight * 0.03}px`; // 3vh
elementToPosition.style.left = `${referenceRect.left}px`;
elementToPosition.style.display = "block"; // Sicherstellen, dass das Element sichtbar ist
}

    function updatelinenumbercheckbox(checkbox){
        if (!section){
            return;
        }
        if (section.classList.contains('viewcontainer')){
          return;
        }
      const dataValue = checkbox.getAttribute('data-update-id');
      if (dataValue){
        if (checkbox.checked == false){
          section.querySelector(`.code-editor-container`).id = dataValue + "off";
        }else if (checkbox.checked == true){
          section.querySelector(`.code-editor-container`).id = dataValue + "on";
        }
      }
    }

    function updatecheckboxed(checkbox){
        if (!section){
            return;
        }
        if (section.classList.contains('viewcontainer')){
          return;
        }
      const dataValue = checkbox.getAttribute('data-checked');
      if (dataValue){
        if (checkbox.checked == false){
          section.querySelectorAll(`#${dataValue}`).forEach(btn => {
              btn.style.display = "none";
            });
        }else if (checkbox.checked == true){
          section.querySelectorAll(`#${dataValue}`).forEach(btn => {
              btn.style.display = "inline-block";
            });
        }
      }
    }

    function checkboxupdatefunction() {
        if (!section){
            return;
        }
          if (section.classList.contains('viewcontainer')){
            return;
          }
          document.querySelectorAll('.switchbox').forEach(checkbox0 => {
              const dataValue = checkbox0.getAttribute('data-checked');

            section.querySelectorAll(`#${dataValue}`).forEach(btn0 => {
                  const displayStyle = btn0.style.display; // Holen des tatsächlichen Display-Werts

                if (displayStyle == "none") {
                    checkbox0.checked = false;
                } else {
                    checkbox0.checked = true; // Sobald das Element angezeigt wird, setzen wir die Checkbox auf true
                }
            });
        if (section.querySelector('.code-editor-container')){
          if (!dataValue && section.querySelector('.code-editor-container').id == "linenumberingoff"){
            checkbox0.checked = false;
          }else if (!dataValue && section.querySelector('.code-editor-container').id == "linenumberingon"){
            checkbox0.checked = true;
          }
        }
        });
    }



        navBar.addEventListener('mousedown', (e) => {
            isDragging = true;
            startY = e.clientY;
        });

        navBar.addEventListener('touchstart', (e) => {
            isDragging = true;
            startY = e.touches[0].clientY;
        });

        window.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaY = startY - e.clientY;
                let newHeight = currentHeight + deltaY;

        if (section.classList.contains('viewcontainer')){
          return;
        }
                /*if (newHeight > 100) newHeight = 100;
                if (newHeight < 50) newHeight = 50;*/
                if (newHeight > 100) {
    newHeight = 100;
    navBar.style.overflow = "hidden";
}
if (newHeight < 50) {
    newHeight = 50;
    navBar.style.overflow = "scroll";
    navBar.style.overflowY = "hidden";
}

                navBar.style.height = `${newHeight}vh`;
            }
        });

        window.addEventListener('touchmove', (e) => {
            if (isDragging) {
                const deltaY = startY - e.touches[0].clientY;
                let newHeight = currentHeight + deltaY;

        if (section.classList.contains('viewcontainer')){
          return;
        }
                if (newHeight > 100) {
                    newHeight = 100;
                    navBar.style.overflow = "hidden";
                }
                if (newHeight < 50) {
                    newHeight = 50;
                    navBar.style.overflow = "scroll";
                    navBar.style.overflowY = "hidden";
                }

                navBar.style.height = `${newHeight}vh`;
            }
        });

    const seccontainer = document.querySelector('.seccontainer');
        window.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                if (parseInt(navBar.style.height) > 75 && !section.classList.contains('viewcontainer')) {
                    navBar.style.height = '100vh';
                    navBar.classList.add('expanded');
          seccontainer.style.display = 'flex';
                } else {
                    navBar.style.height = '50px';
                    navBar.classList.remove('expanded');
          seccontainer.style.display = 'none';
                }
            }
        });

        window.addEventListener('touchend', () => {
            if (isDragging) {
                isDragging = false;
                if (section && parseInt(navBar.style.height) > 75 && !section.classList.contains('viewcontainer')) {
                    navBar.style.height = '100vh';
                    navBar.classList.add('expanded');
          seccontainer.style.display = 'flex';
                } else {
                    navBar.style.height = '50px';
                    navBar.classList.remove('expanded');
          seccontainer.style.display = 'none';
                }
            }
        });

    const container = document.getElementById('container');
        let navDots = document.querySelectorAll('.nav-dot');
        let currentIndex = 0;

        // Function to scroll to specific section horizontally
      let previoussectionfsts = section;
        function scrollToSection(index) {
            lasteventsparentsection = document.getElementById('section' + index);
            if (section){
                if (section.classList.contains('viewcontainer')){
                    if (navBar.classList.contains('expanded')) {
                        navBar.style.height = '50px';
                        navBar.classList.remove('expanded');
                        seccontainer.style.display = 'none';
                    }
                }
            }

      const codesearchresults = document.querySelector('.codesearchresults');
codesearchresults.style.display = "none";
      closelineoptionscontainer();
            const sectionWidth = parseFloat(getComputedStyle(document.querySelector('.nav-bar div')).width);
          document.querySelectorAll('.section').forEach(sec => {
            if (sec.id != `section${index}`){
                  sec.style.animation = "none";
                        void sec.offsetWidth; // Trigger reflow
                        sec.style.animation = "swipeout 0.5s ease-out";
                        setTimeout(() => {
                            sec.style.display = 'none';
                         }, 400);
            }
          });
          setTimeout(() => {
            document.querySelector(`#section${index}`).style.display = 'flex';
            document.querySelector(`#section${index}`).style.animation = "none";
                void document.querySelector(`#section${index}`).offsetWidth; // Trigger reflow
                document.querySelector(`#section${index}`).style.animation = "swipein 0.5s ease-out";
          }, 400);
            //container.style.transform = `translateX(-${sectionWidth * index}px)`;
        }
        // Highlight active dot
        function highlightDot(index) {
            navDots.forEach(dot => {
                dot.classList.remove('active');
            });
            navDots[index].classList.add('active');
        }

        // Listen for scroll events on the navigation bar
    function scrolleivs() {
           if (!section){
               return;
           }
            navDots = document.querySelectorAll('.nav-dot');
      const sectionWidth = parseFloat(getComputedStyle(document.querySelector('.nav-bar div')).width);
            const scrollPos = navBar.scrollLeft;
            const index = Math.round(scrollPos / sectionWidth);
            if (index !== currentIndex) {
                    previoussectionfsts = section;
                    sectionindex = index;

        section = document.getElementById(`section${index}`);
                if (!section.classList.contains('viewcontainer')){
                    inputDiv = section.querySelector('.code-editor-container');
                    checkboxupdatefunction();
                }
                scrollToSection(index);
                highlightDot(index);
                currentIndex = index;
                updateviewthisfilebtn();
            }
    }
        navBar.addEventListener('scroll', () => {
      scrolleivs();
    });

    function navBarremoveeventlistenerscrollandadditagain() {
      navBar.removeEventListener('scroll', () => {
          scrolleivs();
        });
      navBar.addEventListener('scroll', () => {
          scrolleivs();
        });
    }

    function updateDataIndex(divId) {
           // Hole das div-Element mit der übergebenen ID
           const container = document.getElementById(divId);
           // Hole alle direkten Kind-Elemente des div
           const elements = container.children;
           // Iteriere durch die Elemente und setze den data-index-Wert
           for (let i = 0; i < elements.length; i++) {
                 elements[i].setAttribute('data-index', i);
           }
        }
    function updateClass(divclass) {
           // Hole das div-Element mit der übergebenen ID
           const container = document.querySelector("." + divId);
           // Hole alle direkten Kind-Elemente des div
           const elements = container.children;
           // Iteriere durch die Elemente und setze den data-index-Wert
           for (let i = 0; i < elements.length; i++) {
                 elements[i].id = `section${i}`;
           }
        }
        // Event listeners for navigation dots
        function dotonclick() {
            if (!section){
                return;
            }
            const sectionWidth = parseFloat(getComputedStyle(document.querySelector('.nav-bar div')).width);/*window.innerWidth;*/
            const scrollPos = navBar.scrollLeft;
            const index = Math.round(scrollPos / sectionWidth);
            if (section.id == document.getElementById(`section${index}`).id){
                return;
            }
            //const index = parseInt(dot.getAttribute('data-index'));
            scrollToSection(index);
            highlightDot(index);
            navBar.scrollLeft = index * window.innerWidth; // Scroll the bar
        section = document.getElementById(`section${index}`);
        lasteventsparentsection = section;
            if (!section.classList.contains('viewcontainer')){
                inputDiv = section.querySelector('.code-editor-container');
            }
      checkboxupdatefunction();
            currentIndex = index;
        }

        // Initialize first dot as active
        highlightDot(0);
    let correntids = 2;


      function checkifselectedlines() {
          if (!section){
              return;
          }
          const check = section.querySelector(".code-editor-line.selected");
          if (!check) {
            section.querySelectorAll('.eslbtn').forEach(dline => {
                dline.classList.add('disabled');
            });
          }
      }
      function getElementIndexInParent(element) {
    if (!element || !element.parentElement) {
        return -1; // Gibt -1 zurück, wenn das Element oder sein Elternteil nicht existiert
    }
    const parent = element.parentElement;
    return Array.from(parent.children).indexOf(element);
}

      function deleteSelectedLines() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            let newpast = [];
lasteventsparentsection = section;

            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                    let pastelement = {
    element: selectedline,
    type: "delete",
    index: getElementIndexInParent(selectedline) // Speichere den ursprünglichen Text
};
newpast.push(pastelement);

                if (selectedline.previousElementSibling || selectedline.nextElementSibling){
                  selectedline.remove();
                }else {
                  selectedline.innerHTML = "";
                }
                selectedline.classList.remove('selected');
                checkifselectedlines();
                });
            }
            if (newpast.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    futureevents[lasteventsparentsection.id] = [];
    pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
    enablepastbtn();
}
        }

      function deleteAllLines() {
            const allselectedlines = section.querySelectorAll(".code-editor-line");
            let newpast = [];
lasteventsparentsection = section;
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                    
                if (selectedline.previousElementSibling || selectedline.nextElementSibling){
                    let pastelement = {
    element: selectedline,
    type: "delete",
    index: getElementIndexInParent(selectedline) // Speichere den ursprünglichen Text
};
newpast.push(pastelement);
                  selectedline.remove();
                }else {
                    let pastelement = {
    element: selectedline,
    type: "text",
    text: selectedline.textContent // Speichere den ursprünglichen Text
};
newpast.push(pastelement);
                  selectedline.innerHTML = "";
                }
                checkifselectedlines();
                });
            }
            if (newpast.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    futureevents[lasteventsparentsection.id] = [];
    pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
    enablepastbtn();
}
        }

        function importantselectedlines() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.toggle("importantpin");
                selectedline.classList.remove('selected');
                checkifselectedlines();
                });
            }
        }

      function unselectalllines() {
          const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('selected');  // Linie abwählen bei links Swipe
                if (!section.querySelector('.code-editor-line.selected')){
                    section.querySelectorAll('.eslbtn').forEach(dline => {
                        dline.classList.add('disabled');
                    });
                }
                    updateSelectedClasses();
                });
            }
      }

      function unfoldalllines() {
          const allselectedlines = section.querySelectorAll(".hiddenlinesparent");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('hiddenlinesparent');  // Linie auswählen
                showHiddenElements(selectedline);
                    updateSelectedClasses();
                });
            }
      }

      function importantalllines() {
            const allselectedlines = section.querySelectorAll(".importantpin");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove("importantpin");
                checkifselectedlines();
                });
            }
        }

        function moveselectedlineup() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                    const previousLine = selectedline.previousElementSibling;
                    if (previousLine) {
                        selectedline.parentNode.insertBefore(selectedline, previousLine);
                    }
                });
            }
        }

        function moveselectedlinedown() {
            //const allselectedlines = document.querySelectorAll(".code-editor-line.selected");
          let allselectedlines = [...section.querySelectorAll('.code-editor-line.selected')];
            allselectedlines.reverse();
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                    const nextLine = selectedline.nextElementSibling;
                    if (nextLine) {
                        selectedline.parentNode.insertBefore(nextLine, selectedline);
                    }
                });
            }
        }

        function restselectedline() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                selectedline.classList.toggle("disableline");
                selectedline.classList.remove('selected');
                checkifselectedlines();
                }); // Korrekte Klammerung hier
            }
        }

      function unsleepalllines() {
            const allselectedlines = section.querySelectorAll(".disableline");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                allselectedlines.forEach(selectedline => {
                selectedline.classList.remove('disableline');
                });
            }
        }

      function changedeletebtn(deletebtnnnn) {
          const initialsign = deletebtnnnn.textContent;
      deletebtnnnn.style.animation = "none";
            void deletebtnnnn.offsetWidth; // Trigger reflow
            deletebtnnnn.style.animation = "rotatesign 0.5s ease-out";
      deletebtnnnn.disabled = true;
      setTimeout(() => {
          deletebtnnnn.textContent = '☑';
        }, 250);
        setTimeout(() => {
        deletebtnnnn.style.animation = "none";
                void deletebtnnnn.offsetWidth; // Trigger reflow
                deletebtnnnn.style.animation = "rotatesign 0.5s ease-out";
        setTimeout(() => {
          deletebtnnnn.textContent = initialsign;
          deletebtnnnn.disabled = false;
        }, 250);
      }, 1000);
      }
      function changebtnnotinsquare(deletebtnnnn){
      const initialsign = deletebtnnnn.textContent;
      deletebtnnnn.style.animation = "none";
            void deletebtnnnn.offsetWidth; // Trigger reflow
            deletebtnnnn.style.animation = "rotatesign 0.5s ease-out";
      deletebtnnnn.disabled = true;
      setTimeout(() => {
          deletebtnnnn.textContent = '✓';
        }, 250);
        setTimeout(() => {
        deletebtnnnn.style.animation = "none";
                void deletebtnnnn.offsetWidth; // Trigger reflow
                deletebtnnnn.style.animation = "rotatesign 0.5s ease-out";
        setTimeout(() => {
          deletebtnnnn.textContent = initialsign;
          deletebtnnnn.disabled = false;
        }, 250);
      }, 1000);
      }
      function trimAllselectedlinetexts(){
        let newpast = [];
lasteventsparentsection = section;
        const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                    allselectedlines.forEach(selectedline => {
                        let pastelement = {
    element: selectedline,
    type: "text",
    text: selectedline.textContent // Speichere den ursprünglichen Text
};
                    selectedline.textContent = selectedline.textContent.trim();
                    checkifselectedlines();
                }); // Korrekte Klammerung hier
            }
            if (newpast.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
    enablepastbtn();
}
      }

        function copyselectedlinetexts() {
            const allselectedlines = section.querySelectorAll(".code-editor-line.selected");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                let linetexts = "";
                allselectedlines.forEach(selectedline => {
                    linetexts += selectedline.textContent + "\n"; // Füge Zeilenumbruch hinzu
                }); // Korrekte Klammerung hier

            try {
                const newtextarea = document.createElement('textarea');
                    newtextarea.value = linetexts;
                    document.body.appendChild(newtextarea);
                    newtextarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(newtextarea);
                } catch (error) {
                    const thiserrorwascatched = error;
                }

                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('selected');
                });

            checkifselectedlines();
                // Verwende die Clipboard API
                //navigator.clipboard.writeText(linetexts)
                //    .then(() => {
                //        console.log('Text copied to clipboard');
                //    })
                //    .catch(err => {
                //        console.error('Error copying text: ', err);
                //    });
            }
        }
      function copyalllinetexts() {
            const allselectedlines = section.querySelectorAll(".code-editor-line");
            if (allselectedlines.length) {  // Überprüfe, ob es ausgewählte Linien gibt
                let linetexts = "";
                allselectedlines.forEach(selectedline => {
                    linetexts += selectedline.textContent + "\n"; // Füge Zeilenumbruch hinzu
                }); // Korrekte Klammerung hier

            try {
                const newtextarea = document.createElement('textarea');
                    newtextarea.value = linetexts;
                    document.body.appendChild(newtextarea);
                    newtextarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(newtextarea);
                } catch (error) {
                    const thiserrorwascatched = error;
                }

                allselectedlines.forEach(selectedline => {
                    selectedline.classList.remove('selected');
                });
            checkifselectedlines();
                // Verwende die Clipboard API
                //navigator.clipboard.writeText(linetexts)
                //    .then(() => {
                //        console.log('Text copied to clipboard');
                //    })
                //    .catch(err => {
                //        console.error('Error copying text: ', err);
                //    });
            }
        }


        let startX, startLine;

        // Allgemeiner Event Listener für Touch-Events
        document.addEventListener('touchstart', function(event) {
            // Überprüfen, ob das Element eine Linie ist
            let target = event.target.closest('.code-editor-line');
            if (target) {
                startX = event.touches[0].clientX;  // Startkoordinate speichern
                startLine = target;  // Die Zeile speichern, auf der der Touch gestartet wurde
            }
        });

      let result = {};
        document.addEventListener('touchend', function(event) {
            if (!startLine) return;  // Keine Linie gestartet, nichts tun

            let endX = event.changedTouches[0].clientX;  // Endkoordinate speichern
            let diffX = endX - startX;  // Unterschied zwischen Start und Ende berechnen

            // Wenn nach rechts geswiped wird und auf derselben Zeile geendet wird
            if (diffX > 50 && !startLine.classList.contains('selected') && !startLine.classList.contains('hiddenlinesparent') && !startLine.classList.contains('superselected')) {
                startLine.classList.add('selected');  // Linie auswählen
            section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                dline.classList.remove('disabled');
            });
                updateSelectedClasses();
            } else if (diffX > 50 && startLine.classList.contains('hiddenlinesparent')) {
                startLine.classList.remove('hiddenlinesparent');  // Linie auswählen
            showHiddenElements(startLine);
                updateSelectedClasses();
            } else if (diffX > 50 && startLine.classList.contains('selected')) {
                let anothersuperselectedline = false;
                let superselectedline = section.querySelector('.code-editor-line.superselected');
                if (superselectedline){
                    anothersuperselectedline = true;
                }
                startLine.classList.remove('selected');
                startLine.classList.add('superselected');  // Linie auswählen
                if (!section.querySelector('.code-editor-line.selected')){
                    section.querySelectorAll('.eslbtn').forEach(dline => {
                        dline.classList.add('disabled');
                    });
                }
                if (anothersuperselectedline == true){
                    superselect(superselectedline, startLine);
                    superselectedline.classList.remove('superselected');
                    startLine.classList.remove('superselected');
                    superselectedline.classList.add('selected');
                    startLine.classList.add('selected');
                    section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                        dline.classList.remove('disabled');
                    });

                }
                updateSelectedClasses();
            } else if (diffX < -50 && startLine.classList.contains('selected')) {
                startLine.classList.remove('selected');  // Linie abwählen bei links Swipe
            if (!section.querySelector('.code-editor-line.selected')){
                section.querySelectorAll('.eslbtn').forEach(dline => {
                    dline.classList.add('disabled');
                });
            }
                updateSelectedClasses();
            } else if (diffX < -50 && startLine.classList.contains('superselected')) {
                startLine.classList.remove('superselected');  // Linie abwählen bei links Swipe
                startLine.classList.add('selected');  // Linie auswählen
                section.querySelectorAll('.eslbtn.disabled').forEach(dline => {
                    dline.classList.remove('disabled');
                });
                updateSelectedClasses();
            } else if (diffX < -50 && !startLine.classList.contains('selected') && !startLine.classList.contains('hiddenlinesparent')) {
                //startLine.classList.add('hiddenlinesparent');
            analyzeAndHideElements(startLine);
                updateSelectedClasses();
            } 

            startLine = null;  // Touch-Zustand zurücksetzen
        });

        //let inputDiv = section.querySelector('.code-editor-container');

        function superselect(superselectedline, superselectedline2) {
            // select every line inbetween superselectedline and superselectedline2
            let allselectedlines = Array.from(section.querySelectorAll('.code-editor-line'));
            let startindex = allselectedlines.indexOf(superselectedline);
            let endindex = allselectedlines.indexOf(superselectedline2);

            if (superselectedline.classList.contains('hidden') || superselectedline2.classList.contains('hidden')){
                return;
            }

            // select the lines inbetween startindex and endindex
            if (startindex < endindex) {
                for (let i = startindex + 1; i < endindex; i++) {
                    if (allselectedlines[i].classList.contains('hiddenlinesparent')) {
                        allselectedlines[i].classList.remove('hiddenlinesparent');  // Linie auswählen
                        showHiddenElements(allselectedlines[i]);
                        updateSelectedClasses();
                    }
                    if (!allselectedlines[i].classList.contains('selected')){
                        allselectedlines[i].classList.add('selected');
                    }
                }
            } else if (startindex > endindex) {
                for (let i = startindex - 1; i > endindex; i--) {
                    if (allselectedlines[i].classList.contains('hiddenlinesparent')) {
                        allselectedlines[i].classList.remove('hiddenlinesparent');  // Linie auswählen
                        showHiddenElements(allselectedlines[i]);
                        updateSelectedClasses();
                    }
                    if (!allselectedlines[i].classList.contains('selected')){
                        allselectedlines[i].classList.add('selected');
                    }
                }
            }
            updateSelectedClasses();
        }

        // Paste Event-Listener
       /*function handlePaste(event) {
            event.preventDefault(); // Verhindert das Standardverhalten des Einfügens

            let celine = section.querySelector('.code-editor-line:focus');
            if (!celine) return; // Sicherstellen, dass celine existiert

            // Ermitteln der führenden Leerzeichen in der aktuellen Linie
            let spaces = "";
            let continueSpaces = true;
            for (let i = 0; i < celine.textContent.length; i++) {
                let character = celine.textContent[i];
                if ((character === " " || character === "\u00A0") && continueSpaces) {
                    spaces += "\u00A0"; // Unicode für nicht-trennbares Leerzeichen
                } else {
                    continueSpaces = false;
                }
            }

            // Kopierten Text aus der Zwischenablage holen
            let pasteText = (event.clipboardData || window.clipboardData).getData('text');

            // Aufteilen des eingefügten Textes bei Zeilenumbrüchen
            let lines = pasteText.split(/\r\n|\n|\r/);

            let selection = window.getSelection();
            if (selection.rangeCount === 0) return; // Überprüfen, ob ein Range existiert

            let range = selection.getRangeAt(0);
            let cursorOffset = range.startOffset;

            // Text vor dem Cursor behalten und Text nach dem Cursor extrahieren
            let currentText = celine.textContent;
            let textAfterCursor = currentText.substring(cursorOffset);
            celine.textContent = currentText.substring(0, cursorOffset);

            // Verarbeite die erste Linie: Der Text wird in die aktuelle Linie eingefügt
            celine.textContent += convertToNonBreakingSpaces(lines[0]);

            // Für die folgenden Zeilen, füge sie als neue Linien (divs) hinzu
            for (let i = 1; i < lines.length; i++) {
                correntids += 1;
                const newline = document.createElement('div');
                newline.setAttribute('contenteditable', 'true');
                newline.id = correntids;
                newline.classList.add('code-editor-line');
                newline.textContent = spaces + convertToNonBreakingSpaces(lines[i]);
                celine.insertAdjacentElement('afterend', newline);
                celine = newline;
            }

            // Text nach dem Cursor in die letzte Linie einfügen
            celine.textContent += convertToNonBreakingSpaces(textAfterCursor);

            // Setze den Cursor ans Ende der letzten Linie
            const newRange = document.createRange();

            // Sicherstellen, dass der neue Range korrekt auf das letzte Kind des celine-Elements gesetzt wird
            let lastChild = celine.lastChild;
            if (lastChild) {
                newRange.setStart(lastChild, lastChild.length); // Cursor ans Ende des letzten Kindes setzen
            } else {
                // Falls kein Textknoten vorhanden ist, einfach auf das Ende des Elements setzen
                newRange.setStart(celine, celine.textContent.length);
            }

            newRange.collapse(true);
            selection.removeAllRanges();
            selection.addRange(newRange);
        }*/




    function handlePaste(event) {
            event.preventDefault(); // Verhindert das Standardverhalten des Einfügens
        
            let celine = section.querySelector('.code-editor-line:focus');
            if (!celine) return; // Sicherstellen, dass celine existiert
            let newpast2 = [];
lasteventsparentsection = section;
let pastelement2 = {
    element: celine,
    type: "text",
    text: celine.textContent // Speichere den ursprünglichen Text
};
newpast2.push(pastelement2);
        
            // Ermitteln der führenden Leerzeichen in der aktuellen Linie
            let spaces = "";
            let continueSpaces = true;
            for (let i = 0; i < celine.textContent.length; i++) {
                let character = celine.textContent[i];
                if ((character === " " || character === "\u00A0") && continueSpaces) {
                    spaces += "\u00A0"; // Unicode für nicht-trennbares Leerzeichen
                } else {
                    continueSpaces = false;
                }
            }
        
            // Kopierten Text aus der Zwischenablage holen
            let pasteText = (event.clipboardData || window.clipboardData).getData('text');
        
            // Aufteilen des eingefügten Textes bei Zeilenumbrüchen
            let lines = pasteText.split(/\r\n|\n|\r/);
        
            let selection = window.getSelection();
            if (selection.rangeCount === 0) return; // Überprüfen, ob ein Range existiert
        
            let range = selection.getRangeAt(0);
            let cursorOffset = range.startOffset;
        
            // Text vor dem Cursor behalten und Text nach dem Cursor extrahieren
            let currentText = celine.textContent;
            let textAfterCursor = currentText.substring(cursorOffset);
            celine.textContent = currentText.substring(0, cursorOffset);
        
            // Verarbeite die erste Linie: Der Text wird in die aktuelle Linie eingefügt
        let firstreferencespacesforspacecoun = convertToNonBreakingSpaces(lines[0]);

        let space2 = "";
            let continueSpace2 = true;
            for (let i = 0; i < firstreferencespacesforspacecoun.length; i++) {
                let character = firstreferencespacesforspacecoun[i];
                if ((character === " " || character === "\u00A0") && continueSpace2) {
                    space2 += "\u00A0"; // Unicode für nicht-trennbares Leerzeichen
                } else {
                    continueSpace2 = false;
                }
            }
        const firstLineLeadingSpacesCount = space2.length;
        let lineSpacesCoun2 = 0;
                let continueLineSpac2 = true;
        
                for (let j = 0; j < lines[0].length; j++) {
                    let character = lines[0][j];
                    if ((character === " " || character === "\u00A0") && continueLineSpac2) {
                        lineSpacesCoun2++;
                    } else {
                        continueLineSpac2 = false;
                    }
                }
        
                // Entfernen der führenden Leerzeichen, falls sie gleich oder größer als die der ersten Zeile sind
            let adjustedLin2 = lines[0];
            if (lineSpacesCoun2 >= firstLineLeadingSpacesCount) {
               adjustedLin2 = lines[0].slice(firstLineLeadingSpacesCount);
            }
            celine.textContent += convertToNonBreakingSpaces(adjustedLin2);
            // Für die folgenden Zeilen, füge sie als neue Linien (divs) hinzu
            for (let i = 1; i < lines.length; i++) {
                correntids += 1;
                const newline = document.createElement('div');
                newline.setAttribute('contenteditable', 'true');
                newline.id = correntids;
                newline.classList.add('code-editor-line');
        
                // Zählen der führenden Leerzeichen in der aktuellen Linie
                let lineSpacesCount = 0;
                let continueLineSpaces = true;
        
                for (let j = 0; j < lines[i].length; j++) {
                    let character = lines[i][j];
                    if ((character === " " || character === "\u00A0") && continueLineSpaces) {
                        lineSpacesCount++;
                    } else {
                        continueLineSpaces = false;
                    }
                }
        
                // Entfernen der führenden Leerzeichen, falls sie gleich oder größer als die der ersten Zeile sind
                let adjustedLine = lines[i];
                if (lineSpacesCount >= firstLineLeadingSpacesCount) {
                    adjustedLine = lines[i].slice(firstLineLeadingSpacesCount);
                }
        
                newline.textContent = spaces + convertToNonBreakingSpaces(adjustedLine);
                celine.insertAdjacentElement('afterend', newline);
                celine = newline;
                let pastelement = {
    element: celine,
    type: "create",
    index: getElementIndexInParent(celine) // Speichere den ursprünglichen Text
};
newpast2.push(pastelement);
        if (i == lines.length - 1){
            celine.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center', // Aligns the element in the middle vertically
                        inline: 'center' // Aligns the element in the middle horizontally (optional)
                    });
        }
            }
        
            // Text nach dem Cursor in die letzte Linie einfügen
            celine.textContent += convertToNonBreakingSpaces(textAfterCursor);
        
            // Setze den Cursor ans Ende der letzten Linie
            const newRange = document.createRange();
        
            // Sicherstellen, dass der neue Range korrekt auf das letzte Kind des celine-Elements gesetzt wird
            let lastChild = celine.lastChild;
            if (lastChild) {
                newRange.setStart(lastChild, lastChild.length - textAfterCursor.length); // Cursor ans Ende des letzten Kindes setzen
            } else {
                // Falls kein Textknoten vorhanden ist, einfach auf das Ende des Elements setzen
                newRange.setStart(celine, celine.textContent.length - textAfterCursor.length);
            }
            
            if (newpast2.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast2); // Speichere das Event
    enablepastbtn();
}
        
            newRange.collapse(true);
            selection.removeAllRanges();
            selection.addRange(newRange);
        }


      function analyzeAndHideElements(element) {
          function countLeadingSpaces(text) {
              //return text.match(/^ * /)[0].length;
            let spaces = 0;
              let continueSpaces = true;
              for (let i = 0; i < text.length; i++) {
                  let character = text[i];
                  if ((character === " " || character === "\u00A0") && continueSpaces) {
                      spaces += 1;
                  } else {
                      continueSpaces = false;
                  }
              }
            return spaces;
          }

          // Das empfangene Element und seine führenden Leerzeichen ermitteln
          const referenceSpaces = countLeadingSpaces(element.textContent);
          const hiddenElements = [];

          // Nächstes Element in der DOM-Hierarchie bekommen
          let nextElement = element.nextElementSibling;
          let nextElementValid = false;
        if (nextElement){
            element.classList.add('hiddenlinesparent');
        }else {
            return;
        }
          // Schleife durch alle nachfolgenden Geschwister-Elemente
          while (nextElement) {
              const nextText = nextElement.textContent;
              const nextSpaces = countLeadingSpaces(nextText);

              // Überprüfen, ob das nächste Element mehr führende Leerzeichen hat
              if (nextSpaces > referenceSpaces || nextText.trim() == "") {
                  // Element in die Liste der versteckten Elemente aufnehmen
                  hiddenElements.push(nextElement);
                  nextElement.classList.add('hidden');  // Element verstecken
                  nextElementValid = true;
              } else {
                  break;  // Schleife beenden, wenn weniger oder gleich viele Leerzeichen
              }

              // Zum nächsten Geschwister-Element wechseln
              nextElement = nextElement.nextElementSibling;
          }
          if (!nextElementValid) {
    element.classList.remove('hiddenlinesparent');
}

          // JSON-Struktur erstellen
          result[element.id] = hiddenElements;
        }

      function showHiddenElements(element) {
            if (result[element.id]) {
                const hiddenElements = result[element.id].reverse();
                hiddenElements.forEach(hiddenElement => {
                if (hiddenElement){
                  hiddenElement.classList.remove('hidden');
                  if (hiddenElement.classList.contains('hiddenlinesparent')){
                      hiddenElement.classList.remove('hiddenlinesparent');
                      showHiddenElements(hiddenElement);
                      analyzeAndHideElements(hiddenElement);
                  }
                }
                });
                delete result[element.id];
            }
        }



        // Hilfsfunktion, um Leerzeichen in &nbsp; zu konvertieren
        function convertToNonBreakingSpaces(text) {
            return text.replace(/ /g, ' ').replace(/\t/g, '    '); // Konvertiert Leerzeichen und Tabs in nicht-brechende Leerzeichen
        }

    function handleKeyUpEvent(event) {
    let celine = document.activeElement?.closest('.code-editor-line');
    if (!celine) return; // Keine aktive Code-Editor-Zeile gefunden

    let selection = window.getSelection();
    if (!selection.rangeCount) return; // Kein Range vorhanden

    let range = selection.getRangeAt(0);
    let cursorOffset = range.startOffset;

    // Funktion zum Einfügen eines Ersetzungszeichens
    function insertClosingCharacter(replacetext, openingChar, closingChar) {
        let text = celine.textContent;
        if (!text.includes(replacetext)) return; // Nur ersetzen, wenn das Kommando vorhanden ist
        let newpast2 = [];
lasteventsparentsection = section;
let pastelement2 = {
    element: celine,
    type: "text",
    text: celine.textContent // Speichere den ursprünglichen Text
};
newpast2.push(pastelement2);
if (newpast2.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast2); // Speichere das Event
    enablepastbtn();
}

        let textAfterCursor = text.substring(cursorOffset);
        celine.textContent = text.substring(0, cursorOffset).replace(replacetext, '') + openingChar + closingChar + textAfterCursor;

        // Cursor zwischen den Zeichen positionieren
        const newCursorOffset = cursorOffset + (openingChar.length - replacetext.length);
        range.setStart(celine.firstChild, newCursorOffset);
        range.collapse(true);
        selection.removeAllRanges();
        selection.addRange(range);
    }

    function replaceCommandsWithSymbols(textelement) {
        // Liste der Kommandos und ihrer Symbole
        const commandToSymbol = {
            "/alert": "⚠",
            "/arrowbottomleft": "↙",
            "/arrowbottomright": "↘",
            "/arrowdown": "↓",
            "/arrowgoleft": "↤",
            "/arrowgoright": "↦",
            "/arrowleft": "←",
            "/arrowright": "→",
            "/arrowtopleft": "↖",
            "/arrowtopright": "↗",
            "/arrowup": "↑",
            "/bigspark": "✶",
            "/bottomleftedge": "◣",
            "/bottomrightedge": "◢",
            "/smallcheckmark": "✓",
            "/emptycircle": "◯",
            "/copyright": "©",
            "/bigcross": "✘",
            "/crossincirkle": "⊗",
            "/crossinsquare": "⌧",
            "/crossnotinsquare": "×",
            "/cutoutcircle": "◌",
            "/diamond": "◆",
            "/emptyspark": "✧",
            "/emptysquare": "□",
            "/emptystar": "☆",
            "/emptytriangleleft": "◁",
            "/emptytriangledown": "▽",
            "/emptytriangleright": "▷",
            "/emptytriangletop": "△",
            "/filledcircle": "●",
            "/heart": "♥",
            "/infinite": "∞",
            "/magnifyingglass": "⌕",
            "/minus": "−",
            "/moonleft": "☽",
            "/moonright": "☾",
            "/movable": "✣",
            "/eighthnote": "♪",
            "/beamednote": "♫",
            "/chordsymbol": "♬",
            "/quarternote": "♩",
            "/paperplane": "➤",
            "/pencil": "✎",
            "/plus": "+",
            "/refreshright": "↻",
            "/refreshleft": "↺",
            "/registered": "®",
            "/sidebar": "≡",
            "/smallcross": "×",
            "/filledspark": "✦",
            "/filledsquare": "■",
            "/filledstar": "★",
            "/sun": "☼",
            "/toprightedge": "◥",
            "/topleftedge": "◤",
            "/trademark": "™",
            "/triangleleft": "◀",
            "/triangleright": "▶",
            "/triangledown": "▼",
            "/triangletop": "▲",
            "/updownleftarrow": "↵",
        };

    const shortCutCommands = {
        "/:func": {
        firstpart: "function definition() {",
        seccondpart: "}"
        },
        "/:if": {
        firstpart: "if (condition) {",
        seccondpart: "}"
        },
        "/:for": {
        firstpart: "for (let i = 0; i < array.length; i++) {",
        seccondpart: "}"
        },
        "/:try": {
        firstpart: 'try {',
        seccondpart: "} catch (error) { console.error(error); }"
        },
        "/:div": {
        firstpart: '<div class="className">',
        seccondpart: "</div>"
        },
        "/:btn": {
        firstpart: '<button id="buttonId">',
        seccondpart: "</button>"
        },
        "/:span": {
        firstpart: '<span id="spanId">',
        seccondpart: "</span>"
        },
        "/:img": {
        firstpart: '<image src="',
        seccondpart: '">'
        }
    }
        // Iteriere durch alle Kommandos und ersetze sie
        for (const command in commandToSymbol) {
            const symbol = commandToSymbol[command];
            insertClosingCharacter(command.toUpperCase(), symbol, '');
        }
    for (const command in shortCutCommands) {
            const firstpart = shortCutCommands[command].firstpart;
            const seccondpart = shortCutCommands[command].seccondpart;
            insertClosingCharacter(command.toUpperCase(), firstpart, seccondpart);
        }
    for (const command in shortCutCommands) {
            const firstpart = shortCutCommands[command].firstpart;
            const seccondpart = shortCutCommands[command].seccondpart;
            insertClosingCharacter(command, firstpart, seccondpart);
        }

    }

    // Ersetzen nur, wenn ein '/' und der Schalter aktiviert ist
    if (celine.textContent.includes('/') && document.querySelector('.commandsswitch')?.checked) {
        replaceCommandsWithSymbols(celine);
    }
}


        function getLastNonSpaceCharInText(text) {
    // Den Text nach vorn durchlaufen und das letzte Zeichen finden, das kein Leerzeichen ist
    for (let i = text.length - 1; i >= 0; i--) {
        if (text[i] !== ' ') {
            return text[i];
        }
    }
    return null;  // Falls nur Leerzeichen vorhanden sind
}
function getFirstNonSpaceCharInTextaftercursor(text) {
    // Den Text nach vorn durchlaufen und das letzte Zeichen finden, das kein Leerzeichen ist
    for (let i = text.length - 1; i >= 0; i++) {
        if (text[i] !== ' ') {
            return text[i];
        }
    }
    return null; // Falls nur Leerzeichen vorhanden sind
}

        // Enter- und Backspace-Event-Listener
        function handleKeyDown(event) {
            let celine = section.querySelector('.code-editor-line:focus');

            if (event.key === 'Enter') {
                event.preventDefault(); // Verhindert das Standardverhalten der Enter-Taste

                if (celine) {
                    correntids += 1;
                    const newid = correntids;
                    let newpast = [];
lasteventsparentsection = section;
let pastelement = {
    element: celine,
    type: "text",
    text: celine.textContent // Speichere den ursprünglichen Text
};
newpast.push(pastelement);
                    // Teile den Text basierend auf der Cursorposition
                    const text = celine.textContent;
                    const selection = window.getSelection();
                    const range = selection.getRangeAt(0);
                    const cursorOffset = range.startOffset;

                    const textBehindCursor = text.substring(cursorOffset);
                    celine.textContent = text.substring(0, cursorOffset);

                    let lastsignincelineelement = getLastNonSpaceCharInText(celine.textContent);
                    let firstsignintextbehindcursor = getFirstNonSpaceCharInTextaftercursor(textBehindCursor);
                    // Berechne führende Leerzeichen oder Tabs
                    let spaces = "";
                    for (let i = 0; i < celine.textContent.length; i++) {
                        const character = celine.textContent[i];
                        if (character === " " || character === "\u00A0") {
                            spaces += "\u00A0"; // Unicode für ein nicht-trennbares Leerzeichen
                        } else {
                            break;
                        }
                    }
                    let firstspaces = spaces;
                    const openingsignsincssandjavascript = ["{", "[", "(", ":"];
                    const clisingsignsincssandjavascript = ["}", "]", ")", "\""];
if (openingsignsincssandjavascript.includes(lastsignincelineelement)) {
    spaces += "\u00A0\u00A0\u00A0\u00A0";
}
                    // Neue Zeile erstellen
                    const newline = document.createElement('div');
                    newline.setAttribute('contenteditable', 'true');
                    newline.id = newid;
                    newline.classList.add('code-editor-line');
                    
                    if (clisingsignsincssandjavascript.includes(firstsignintextbehindcursor)){
                        newline.textContent = spaces;
                    }else {
                        newline.textContent = spaces + textBehindCursor;
                    }
                    

                    // Neue Zeile einfügen
                    celine.insertAdjacentElement('afterend', newline);
                    let pastelemen4 = {
    element: newline,
    type: "create",
    index: getElementIndexInParent(newline) // Speichere den ursprünglichen Text
};
newpast.push(pastelemen4);
                    
                    if (clisingsignsincssandjavascript.includes(firstsignintextbehindcursor)){
                        const newline2 = document.createElement('div');
newline2.setAttribute('contenteditable', 'true');
newline2.id = parseInt(newid);
newline2.classList.add('code-editor-line');
newline2.textContent = firstspaces + textBehindCursor;
newline.insertAdjacentElement('afterend', newline2);
let pastelement = {
    element: newline2,
    type: "create",
    index: getElementIndexInParent(newline2) // Speichere den ursprünglichen Text
};
newpast.push(pastelement);
                    }
                    // Fokus und Cursor in die neue Zeile setzen
                    newline.focus();
                    const newRange = document.createRange();
                    newRange.setStart(newline.firstChild || newline, spaces.length);
                    newRange.collapse(true);
                    selection.removeAllRanges();
                    selection.addRange(newRange);
                    
                    if (newpast.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
    enablepastbtn();
}

                    updateSelectedClasses();
                }
            }


            if (event.key === 'Backspace') {
                let newpast = [];
lasteventsparentsection = section;
                function handleBackspaceWithMatchingCharacters(event) {
    if (event.key !== 'Backspace') return;

    // Abrufen der aktuellen Auswahl und des Cursors
    const selection = window.getSelection();
    if (!selection.rangeCount) return;
    const range = selection.getRangeAt(0);
    const cursorOffset = range.startOffset;
    const celine = range.startContainer;

    if (!celine || celine.nodeType !== Node.TEXT_NODE) return;
    
    let pastelemen3 = {
    element: celine,
    type: "text",
    text: celine.textContent // Speichere den ursprünglichen Text
};
newpast.push(pastelemen3);

    const text = celine.textContent;

    // Zeichenpaare definieren
    const matchingPairs = {
        '(': ')',
        '{': '}',
        '[': ']',
        '"': '"',
        "'": "'",
        '`': '`'
    };

    // Zeichen vor und nach dem Cursor analysieren
    const previousChar = text.charAt(cursorOffset - 1);
    const nextChar = text.charAt(cursorOffset);

    // Prüfen, ob `previousChar` und `nextChar` ein passendes Paar sind
    if (matchingPairs[previousChar] === nextChar) {
        event.preventDefault(); // Standardverhalten der Backspace-Taste verhindern

        // Entferne die Zeichen vor und nach dem Cursor
        const updatedText =
            text.slice(0, cursorOffset - 1) + text.slice(cursorOffset + 1);
        celine.textContent = updatedText;

        // Cursor-Position bleibt an derselben Stelle
        const newCursorPosition = cursorOffset - 1;
        range.setStart(celine, newCursorPosition);
        range.collapse(true);

        // Auswahl aktualisieren
        selection.removeAllRanges();
        selection.addRange(range);
    }
}

// Hinzufügen des Event Listeners für die Backspace-Taste
handleBackspaceWithMatchingCharacters(event);
                let selection = window.getSelection();
                let range = selection.getRangeAt(0);

                if (range.startOffset === 0 && celine) {
                    event.preventDefault();

                    const previousLine = celine.previousElementSibling;
                    if (previousLine) {
                        newpast = [];
                        updateSelectedClasses();

                        // Hole den aktuellen Text der aktuellen Zeile und der vorherigen Zeile
                        const currentLineText = celine.textContent;
                        const previousLineText = previousLine.textContent;

                        // Entferne die aktuelle Zeil
                        let pastelement2 = {
    element: celine,
    type: "delete",
    index: getElementIndexInParent(celine) // Speichere den ursprünglichen Text
};
newpast.push(pastelement2);
                        celine.remove();
                        if (!section.querySelector('.code-editor-line.selected')) {
    section.querySelectorAll('.eslbtn').forEach(dline => {
        if (!dline.classList.contains('disabled')){
        dline.classList.add('disabled');
        }
    });
}

                        // Füge den Text der aktuellen Zeile zur vorherigen Zeile hinzu
                        previousLine.textContent = previousLineText + currentLineText;

                        // Setze den Fokus auf die vorherige Zeile und positioniere den Cursor ans Ende
                        const newRange = document.createRange();
                        const textLength = previousLine.textContent.length;

                        newRange.setStart(previousLine.firstChild || previousLine, textLength - currentLineText.length);
                        newRange.collapse(true);

                        selection.removeAllRanges();
                        selection.addRange(newRange);
                    }
                }
                if (newpast.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
    enablepastbtn();
}
            }


            // Backspace-Taste
            /*if (event.key === 'Backspace') {
                let selection = window.getSelection();
                let range = selection.getRangeAt(0);

                if (range.startOffset === 0 && celine) {
                    event.preventDefault();

                    const previousLine = celine.previousElementSibling;
                    if (previousLine) {
                  updateSelectedClasses();
                        let currentLineText = celine.textContent;

                        celine.remove();
                        previousLine.textContent += currentLineText;

                        previousLine.focus();
                        range = document.createRange();
                        range.setStart(previousLine.childNodes[0], previousLine.childNodes[0].length - currentLineText.length);
                        range.collapse(true);
                        selection.removeAllRanges();
                        selection.addRange(range);
                    }
                }
            }*/

          if (event.key === '>') {
              let newpast = [];
lasteventsparentsection = section;
let pastelement = {
    element: celine,
    type: "text",
    text: celine.textContent // Speichere den ursprünglichen Text
};
newpast.push(pastelement);
if (newpast.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast); // Speichere das Event
    enablepastbtn();
}
             const selfClosingTags = [
    "br",
    "img",
    "input",
    "hr",
    "meta",
    "link",
    "area",
    "base",
    "source",
    "track",
    "col",
    "wbr",
    "command",
    "basefont",
    "frame"
];

             let selection = window.getSelection();
             let range = selection.getRangeAt(0);
             let cursorOffset = range.startOffset;

             // Holen des aktuellen Texts vor dem Cursor
             let text = celine.textContent.substring(0, cursorOffset);
             // Prüfen, ob der Text einen öffnenden Tag enthält
             let openTagMatch = text.match(/<(\w+)([^>]*)$/);

             if (openTagMatch) {

                 // Tag automatisch schließen
                 let tagName = openTagMatch[1];
                 if (selfClosingTags.includes(tagName)){
                     return;
                 }else {
                     event.preventDefault();
                 }
                 let tagEnd = `</${tagName}>`;
                 // Fügen Sie den schließenden Tag direkt nach dem Cursor ein
                 let textAfterCursor = celine.textContent.substring(cursorOffset);
                 celine.textContent = text + '>' + tagEnd + textAfterCursor;

                 // Setzen Sie den Cursor zwischen die Tags
                 range.setStart(celine.firstChild, cursorOffset + 1);
                 range.collapse(true);
                 selection.removeAllRanges();
                 selection.addRange(range);
             }
          }

          let selection = window.getSelection();

          let range = selection.getRangeAt(0);
          let cursorOffset = range.startOffset;

            // Erstellen einer Funktion, die das aktuelle Zeichen schließt
            function insertClosingCharacter(openingChar, closingChar) {
                let newpast2 = [];
lasteventsparentsection = section;
let pastelement2 = {
    element: celine,
    type: "text",
    text: celine.textContent // Speichere den ursprünglichen Text
};
newpast2.push(pastelement2);
if (newpast2.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast2); // Speichere das Event
    enablepastbtn();
}
                let text = celine.textContent;
                let textAfterCursor = text.substring(cursorOffset);
                celine.textContent = text.substring(0, cursorOffset) + openingChar + closingChar + textAfterCursor;

                // Cursor zwischen den Zeichen platzieren
                range.setStart(celine.firstChild, cursorOffset + 1);
                range.collapse(true);
                selection.removeAllRanges();
                selection.addRange(range);
            }

            // Automatisches Schließen von '{'
            if (event.key === '{') {
                event.preventDefault();
                insertClosingCharacter('{', '}');
            }

          if (event.key === '[') {
                event.preventDefault();
                insertClosingCharacter('[', ']');
            }

            // Automatisches Schließen von '('
            if (event.key === '(') {
                event.preventDefault();
                insertClosingCharacter('(', ')');
            }

            // Automatisches Schließen von '`'
            /*if (event.key === '`') {
                event.preventDefault();
                insertClosingCharacter('`', '`');
            }

            // Automatisches Schließen von '„'
            if (event.key === '„') {
                event.preventDefault();
                insertClosingCharacter('"', '"');
            }

            // Automatisches Schließen von '‚'
            if (event.key === '‚') {
                event.preventDefault();
                insertClosingCharacter('\'', '\'');
            }

      if (event.key === '“') {
                event.preventDefault();
                insertClosingCharacter('"', '"');
            }

            // Automatisches Schließen von '‚'
            if (event.key === "‘") {
                event.preventDefault();
                insertClosingCharacter('\'', '\'');
            }

            if (event.key === '"') {
                event.preventDefault();
                insertClosingCharacter('"', '"');
            }

            // Automatisches Schließen von '‚'
            if (event.key === "'") {
                event.preventDefault();
                insertClosingCharacter('\'', '\'');
            }*/
            
            if (event.key != "'" && event.key != "\"" && event.key != "`" && event.key != "(" && event.key != "{" && event.key != "[" && event.key != "“" && event.key != "‚" && event.key != ">" && event.key != "„" && event.key != "Backspace" && event.key != "‘" && event.key != "Enter" && event.key != "}" && event.key != "]" && event.key != ")" && event.key != ";"){
                let newpast2 = [];
lasteventsparentsection = section;
let pastelement2 = {
    element: celine,
    type: "text",
    text: celine.textContent // Speichere den ursprünglichen Text
};
newpast2.push(pastelement2);
if (newpast2.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast2); // Speichere das Event
    enablepastbtn();
}
            }

          function checkAndSkipClosingCharacter(closingChar) {
              let text = celine.textContent;
            let nextChar = text.charAt(cursorOffset);
            if (nextChar === closingChar) {
                event.preventDefault();
                range.setStart(celine.firstChild, cursorOffset + 1);
                range.collapse(true);
                selection.removeAllRanges();
                selection.addRange(range);
              }else {
                  let newpast2 = [];
lasteventsparentsection = section;
let pastelement2 = {
    element: celine,
    type: "text",
    text: celine.textContent // Speichere den ursprünglichen Text
};
newpast2.push(pastelement2);
if (newpast2.length > 0) {
    // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
    if (!pastevents[lasteventsparentsection.id]) {
        pastevents[lasteventsparentsection.id] = [];
    }
    pastevents[lasteventsparentsection.id].push(newpast2); // Speichere das Event
    enablepastbtn();
}
              }
          }

          function checkAndSkipornotClosingCharacter(closingChar) {
    let text = celine.textContent;
    let nextChar = text.charAt(cursorOffset);
    if (nextChar === closingChar) {
        event.preventDefault();
        range.setStart(celine.firstChild, cursorOffset + 1);
        range.collapse(true);
        selection.removeAllRanges();
        selection.addRange(range);
    } else {
        let newpast2 = [];
        lasteventsparentsection = section;
        let pastelement2 = {
            element: celine,
            type: "text",
            text: celine.textContent // Speichere den ursprünglichen Text
        };
        newpast2.push(pastelement2);
        if (newpast2.length > 0) {
            // Stelle sicher, dass pastevents[lasteventsparentsection.id] ein Array ist
            if (!pastevents[lasteventsparentsection.id]) {
                pastevents[lasteventsparentsection.id] = [];
            }
            pastevents[lasteventsparentsection.id].push(newpast2); // Speichere das Event
            enablepastbtn();
        }
        event.preventDefault();
        insertClosingCharacter(closingChar, closingChar);
    }
}
          if (event.key === ']') {
              checkAndSkipClosingCharacter(']');
          }
          if (event.key === '}') {
            checkAndSkipClosingCharacter('}');
          }
          if (event.key === '"') {
              checkAndSkipornotClosingCharacter('"');
          }
          if (event.key === "'") {
            checkAndSkipornotClosingCharacter("'");
          }
          if (event.key === ')') {
            checkAndSkipClosingCharacter(')');
          }
          if (event.key === ';') {
            checkAndSkipClosingCharacter(';');
          }
      if (event.key === '„') {
            checkAndSkipornotClosingCharacter('"');
          }
      if (event.key === '“') {
            checkAndSkipornotClosingCharacter('"');
          }
      if (event.key === "‘") {
            checkAndSkipornotClosingCharacter('\'');
          }
      if (event.key === "‚") {
            checkAndSkipornotClosingCharacter('\'');
          }
      }
        function updateSelectedClasses() {
            const lines = section.querySelectorAll('.code-editor-line');

            lines.forEach((line, index) => {
                const isSelected = line.classList.contains('selected');

                // Überprüfen, ob es über und unter der Zeile selektierte Zeilen gibt
                const hasAbove = index > 0 && lines[index - 1].classList.contains('selected');
                const hasBelow = index < lines.length - 1 && lines[index + 1].classList.contains('selected');

                // Entfernen aller relevanten Klassen
            if (line.classList.contains('topSelected')){
                line.classList.remove('topSelected');
            }
            if (line.classList.contains('bottomSelected')){
                line.classList.remove('bottomSelected');
            }
            if (line.classList.contains('middleSelected')){
                line.classList.remove('middleSelected');
            }
            if (line.classList.contains('singleSelected')){
                line.classList.remove('singleSelected');
            }

                if (isSelected) {
                    if (!hasAbove && !hasBelow) {
                        // Single selected
                        line.classList.add('singleSelected');
                    } else if (!hasAbove && hasBelow) {
                        // Top selected
                        line.classList.add('topSelected');
                    } else if (hasAbove && !hasBelow) {
                        // Bottom selected
                        line.classList.add('bottomSelected');
                    } else if (hasAbove && hasBelow) {
                        // Middle selected
                        line.classList.add('middleSelected');
                    }
                }
            });
        }

  </script>

</body>
</html>
